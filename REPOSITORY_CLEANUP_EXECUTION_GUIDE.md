# Repository Cleanup Execution Guide
**Generated by Repository Forensics Analysis**
**Date:** 2025-07-17
**Agent:** Repo-Scanner

## Overview
This guide provides step-by-step instructions for executing the repository cleanup based on the forensic analysis findings.

## Pre-Cleanup Checklist
- [ ] **Create backup branch**: `git checkout -b cleanup-backup`
- [ ] **Review forensics report**: Read `REPOSITORY_FORENSICS_REPORT.md`
- [ ] **Verify current working directory**: Ensure you're in repository root
- [ ] **Check git status**: Commit any pending changes
- [ ] **Notify team**: Inform team members of cleanup activities

## Cleanup Scripts Overview

### 1. Python Cache Cleanup (`01_remove_cache_files.sh`)
**Purpose:** Remove Python bytecode files and caches
**Files removed:** ~6,471 files
**Estimated space freed:** ~50MB
**Risk level:** ‚ö™ LOW (Safe to execute)

**What it removes:**
- `__pycache__/` directories
- `*.pyc` files
- `*.pyo` files
- `.pytest_cache/` directories
- `.mypy_cache/` directories
- `.coverage` files

### 2. Obsolete Reports Cleanup (`02_remove_obsolete_reports.sh`)
**Purpose:** Remove task completion reports and obsolete documentation
**Files removed:** ~60 files
**Estimated space freed:** ~100MB
**Risk level:** üü° MEDIUM (Review backup list)

**What it removes:**
- Task completion summaries (TASK_*.md)
- Validation reports (*_VALIDATION_REPORT.md)
- Audit reports (*_AUDIT*.md)
- Performance reports (*_PERFORMANCE*.md)
- Security reports (*_SECURITY*.md)
- JSON validation reports
- Development artifacts

### 3. Test Artifacts Cleanup (`03_remove_test_artifacts.sh`)
**Purpose:** Remove test databases, logs, and temporary test files
**Files removed:** ~40 files
**Estimated space freed:** ~200MB
**Risk level:** üü° MEDIUM (Verify no important test data)

**What it removes:**
- Test database files (*.db)
- Test output files
- Archived test reports
- Performance benchmark results
- Disabled test files (.DISABLED_MOCKS)
- Jest/Next.js cache
- TypeScript build info

### 4. Master Cleanup Script (`04_run_all_cleanup.sh`)
**Purpose:** Execute all cleanup scripts in sequence with logging
**Risk level:** üü° MEDIUM (Comprehensive cleanup)

**Additional cleanup:**
- Empty directories
- Temporary files (*.tmp, *.temp)
- IDE configuration files
- Backup files (*~)

## Execution Instructions

### Option A: Full Automated Cleanup (Recommended)
```bash
# Execute master cleanup script
./cleanup_scripts/04_run_all_cleanup.sh
```

### Option B: Step-by-Step Manual Cleanup
```bash
# Step 1: Python cache cleanup
./cleanup_scripts/01_remove_cache_files.sh

# Step 2: Obsolete reports cleanup
./cleanup_scripts/02_remove_obsolete_reports.sh

# Step 3: Test artifacts cleanup
./cleanup_scripts/03_remove_test_artifacts.sh
```

### Option C: Selective Cleanup
```bash
# Only remove safe cache files
./cleanup_scripts/01_remove_cache_files.sh

# Review removed files before proceeding
cat cleanup_scripts/removed_files_*.log
```

## Post-Cleanup Verification

### 1. Application Testing
```bash
# Run basic application tests
make test

# Start application to verify functionality
python main.py

# Check for import errors
python -m py_compile main.py
```

### 2. Documentation Verification
```bash
# Check that critical documentation remains
ls -la README.md CLAUDE.md

# Verify docs structure
tree docs/ -L 2
```

### 3. Git Status Check
```bash
# Review changes
git status

# Check diff for unexpected removals
git diff --name-only
```

## Log Files Review

Each cleanup script generates detailed log files in `cleanup_scripts/`:
- `removed_files_YYYYMMDD_HHMMSS.log` - Obsolete reports removal log
- `removed_test_artifacts_YYYYMMDD_HHMMSS.log` - Test artifacts removal log
- `master_cleanup_YYYYMMDD_HHMMSS.log` - Master cleanup log

**Review these logs before committing changes.**

## Recovery Procedures

### If Important Files Were Removed
```bash
# Check git log for removed files
git log --follow --name-only -- <filepath>

# Restore from backup branch
git checkout cleanup-backup -- <filepath>

# Or restore from git history
git checkout HEAD~1 -- <filepath>
```

### If Application Breaks
```bash
# Revert all changes
git checkout cleanup-backup
git branch -D cleanup-main

# Or revert specific files
git checkout HEAD -- <problematic_file>
```

## Safety Measures

### Before Execution
1. **Git Branch**: Create backup branch
2. **Team Notification**: Inform team of cleanup
3. **Documentation**: Review what will be removed
4. **Testing**: Ensure test suite passes

### During Execution
1. **Monitor Logs**: Watch for errors during cleanup
2. **Verify Counts**: Check file counts match expectations
3. **Space Monitoring**: Monitor disk space freed

### After Execution
1. **Test Application**: Verify functionality
2. **Review Logs**: Check all log files
3. **Team Review**: Have team member review changes
4. **Staged Commit**: Commit cleanup in logical chunks

## Expected Results

### Files to be Removed
- **Python Cache**: ~6,471 files
- **Obsolete Reports**: ~60 files
- **Test Artifacts**: ~40 files
- **Temporary Files**: ~20 files
- **Total**: ~6,591 files

### Estimated Space Freed
- **Python Cache**: ~50MB
- **Obsolete Reports**: ~100MB
- **Test Artifacts**: ~200MB
- **Total**: ~350MB

### Repository Improvements
- Cleaner root directory structure
- Removed obsolete documentation
- Improved navigation for developers
- Reduced repository size
- Better maintainability

## Rollback Plan

If cleanup causes issues:

1. **Immediate Rollback**
   ```bash
   git reset --hard cleanup-backup
   ```

2. **Selective Rollback**
   ```bash
   git checkout cleanup-backup -- <specific_file>
   ```

3. **Restore from Logs**
   ```bash
   # Use backup logs to restore specific files
   # Check cleanup_scripts/*.log files
   ```

## Follow-up Actions

### Update .gitignore
Add entries to prevent future accumulation:
```gitignore
# Python cache
__pycache__/
*.pyc
*.pyo
.pytest_cache/
.mypy_cache/
.coverage

# Test artifacts
*.db
test_*.tmp
test_output.txt

# IDE files
.vscode/settings.json
.idea/
```

### Establish Maintenance Procedures
1. **Weekly Cache Cleanup**: Add to CI/CD pipeline
2. **Monthly Report Review**: Regular cleanup of obsolete reports
3. **Documentation Standards**: Establish naming conventions
4. **Automated Monitoring**: Set up alerts for repository size

## Success Criteria

‚úÖ **Cleanup Successful If:**
- All tests pass after cleanup
- Application starts without errors
- Critical documentation remains
- No important configuration files removed
- Team can navigate repository easily

‚ùå **Cleanup Failed If:**
- Application fails to start
- Tests fail due to missing files
- Critical documentation removed
- Team workflow disrupted

## Support

If you encounter issues during cleanup:
1. Check log files in `cleanup_scripts/`
2. Review `REPOSITORY_FORENSICS_REPORT.md`
3. Use rollback procedures above
4. Restore from backup branch if needed

---

**Remember:** This cleanup removes obsolete files identified through forensic analysis. Always verify changes before final commit to main branch.
