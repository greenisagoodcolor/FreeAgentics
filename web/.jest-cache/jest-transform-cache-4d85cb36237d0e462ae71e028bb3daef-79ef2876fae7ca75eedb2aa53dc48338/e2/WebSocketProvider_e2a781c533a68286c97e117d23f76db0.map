{"version":3,"names":["cov_20tpms0eu2","actualCoverage","s","WebSocketProvider","f","default","_default","children","autoConnect","b","showConnectionStatus","mounted","setMounted","_react","useState","websocket","_useWebSocket","useWebSocket","onConnect","console","log","onDisconnect","onError","error","useEffect","_jsxruntime","jsx","Fragment","jsxs","className","ConnectionStatusIndicator","isConnected","isConnecting","latency","reconnectAttempts","getStatusColor","getStatusText"],"sources":["/Users/matthewmoroney/builds/FreeAgentics/web/components/WebSocketProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useWebSocket } from \"@/hooks/useWebSocket\";\n\ninterface WebSocketProviderProps {\n  children: React.ReactNode;\n  autoConnect?: boolean;\n  showConnectionStatus?: boolean;\n}\n\nexport function WebSocketProvider({\n  children,\n  autoConnect = true,\n  showConnectionStatus = false,\n}: WebSocketProviderProps) {\n  const [mounted, setMounted] = useState(false);\n\n  const websocket = useWebSocket({\n    autoConnect,\n    onConnect: () => {\n      console.log(\"ðŸŸ¢ WebSocket connected successfully\");\n    },\n    onDisconnect: () => {\n      console.log(\"ðŸ”´ WebSocket disconnected\");\n    },\n    onError: (error) => {\n      console.error(\"ðŸŸ  WebSocket error:\", error);\n    },\n  });\n\n  // Handle client-side mounting\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // Don't render on server side\n  if (!mounted) {\n    return <>{children}</>;\n  }\n\n  return (\n    <>\n      {showConnectionStatus && (\n        <div className=\"fixed top-4 right-4 z-50\">\n          <ConnectionStatusIndicator\n            isConnected={websocket.isConnected}\n            isConnecting={websocket.isConnecting}\n            error={websocket.error}\n            latency={websocket.latency}\n            reconnectAttempts={websocket.reconnectAttempts}\n          />\n        </div>\n      )}\n      {children}\n    </>\n  );\n}\n\ninterface ConnectionStatusIndicatorProps {\n  isConnected: boolean;\n  isConnecting: boolean;\n  error: string | null;\n  latency: number | null;\n  reconnectAttempts: number;\n}\n\nfunction ConnectionStatusIndicator({\n  isConnected,\n  isConnecting,\n  error,\n  latency,\n  reconnectAttempts,\n}: ConnectionStatusIndicatorProps) {\n  const getStatusColor = () => {\n    if (isConnected) return \"bg-green-500\";\n    if (isConnecting) return \"bg-yellow-500\";\n    if (error) return \"bg-red-500\";\n    return \"bg-gray-500\";\n  };\n\n  const getStatusText = () => {\n    if (isConnected) return `Connected ${latency ? `(${latency}ms)` : \"\"}`;\n    if (isConnecting) return \"Connecting...\";\n    if (error) return `Error: ${error}`;\n    return \"Disconnected\";\n  };\n\n  return (\n    <div className=\"flex items-center space-x-2 px-3 py-2 bg-gray-900 rounded-lg border border-gray-700 text-sm\">\n      <div className={`w-2 h-2 rounded-full ${getStatusColor()}`} />\n      <span className=\"text-gray-200\">{getStatusText()}</span>\n      {reconnectAttempts > 0 && (\n        <span className=\"text-yellow-400 text-xs\">\n          (Retry {reconnectAttempts})\n        </span>\n      )}\n    </div>\n  );\n}\n\nexport default WebSocketProvider;\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}