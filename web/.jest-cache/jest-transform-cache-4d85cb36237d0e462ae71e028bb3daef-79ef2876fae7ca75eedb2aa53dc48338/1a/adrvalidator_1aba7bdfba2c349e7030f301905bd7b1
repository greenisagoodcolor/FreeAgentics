65d4aee536ba439f40eb37b9813b2455
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    ADRComplianceValidator: function() {
        return ADRComplianceValidator;
    },
    complianceValidator: function() {
        return complianceValidator;
    },
    validateAPIRoute: function() {
        return validateAPIRoute;
    },
    validateComponent: function() {
        return validateComponent;
    },
    validateHook: function() {
        return validateHook;
    }
});
// ADR-002: Canonical Directory Structure Rules
const adr002Rules = [
    {
        id: "ADR002-001",
        adr: "ADR-002",
        title: "Components in Correct Directory",
        description: "React components must be in /components directory with proper subdirectories",
        severity: "error",
        category: "structure",
        check: (context)=>{
            const { filePath } = context;
            if (filePath.includes(".tsx") && filePath.includes("component")) {
                const validPaths = [
                    "/components/ui/",
                    "/components/conversation/",
                    "/components/dashboard/",
                    "/app/"
                ];
                const isValidLocation = validPaths.some((path)=>filePath.includes(path));
                return {
                    passed: isValidLocation,
                    message: isValidLocation ? "Component is in correct directory structure" : `Component should be in one of: ${validPaths.join(", ")}`,
                    severity: "error",
                    suggestions: isValidLocation ? [] : [
                        "Move component to appropriate /components subdirectory",
                        "Follow feature-based organization pattern"
                    ]
                };
            }
            return {
                passed: true,
                message: "Not a component file",
                severity: "info"
            };
        }
    },
    {
        id: "ADR002-002",
        adr: "ADR-002",
        title: "Hooks in /hooks Directory",
        description: "Custom React hooks must be in /hooks directory",
        severity: "error",
        category: "structure",
        check: (context)=>{
            const { filePath, fileContent } = context;
            if (filePath.includes(".ts") && fileContent?.includes("use") && fileContent.match(/export\s+function\s+use[A-Z]/)) {
                const isInHooksDir = filePath.includes("/hooks/");
                return {
                    passed: isInHooksDir,
                    message: isInHooksDir ? "Hook is in correct /hooks directory" : "Custom hooks must be in /hooks directory",
                    severity: "error",
                    suggestions: isInHooksDir ? [] : [
                        "Move custom hook to /hooks directory",
                        'Ensure hook name starts with "use"'
                    ]
                };
            }
            return {
                passed: true,
                message: "Not a custom hook",
                severity: "info"
            };
        }
    },
    {
        id: "ADR002-003",
        adr: "ADR-002",
        title: "Utilities in /lib Directory",
        description: "Utility functions and libraries must be in /lib directory",
        severity: "error",
        category: "structure",
        check: (context)=>{
            const { filePath, fileContent } = context;
            if (filePath.includes(".ts") && !filePath.includes(".tsx") && !filePath.includes("/hooks/") && !filePath.includes("/api/") && fileContent?.includes("export")) {
                const isInLibDir = filePath.includes("/lib/");
                return {
                    passed: isInLibDir,
                    message: isInLibDir ? "Utility is in correct /lib directory" : "Utility functions should be in /lib directory",
                    severity: "warning",
                    suggestions: isInLibDir ? [] : [
                        "Move utility functions to /lib directory",
                        "Organize by functional domain (e.g., /lib/utils, /lib/api)"
                    ]
                };
            }
            return {
                passed: true,
                message: "Not a utility file",
                severity: "info"
            };
        }
    },
    {
        id: "ADR002-004",
        adr: "ADR-002",
        title: "UI Components in /components/ui",
        description: "Reusable UI components must be in /components/ui directory",
        severity: "error",
        category: "structure",
        check: (context)=>{
            const { filePath, componentName } = context;
            const uiComponentNames = [
                "Button",
                "Input",
                "Card",
                "Badge",
                "Dialog",
                "Tooltip",
                "Select",
                "Checkbox",
                "Slider",
                "Progress",
                "Avatar",
                "Calendar",
                "Tabs"
            ];
            if (componentName && uiComponentNames.some((name)=>componentName.includes(name))) {
                const isInUIDir = filePath.includes("/components/ui/");
                return {
                    passed: isInUIDir,
                    message: isInUIDir ? "UI component is in correct directory" : "UI components should be in /components/ui directory",
                    severity: "error",
                    suggestions: isInUIDir ? [] : [
                        "Move UI component to /components/ui directory",
                        "Ensure component is reusable and generic"
                    ]
                };
            }
            return {
                passed: true,
                message: "Not a UI component",
                severity: "info"
            };
        }
    }
];
// ADR-008: API Interface Layer Rules
const adr008Rules = [
    {
        id: "ADR008-001",
        adr: "ADR-008",
        title: "API Routes in Correct Structure",
        description: "API routes must follow /api/[resource]/[action] pattern",
        severity: "error",
        category: "architecture",
        check: (context)=>{
            const { filePath } = context;
            if (filePath.includes("/api/") && filePath.includes("route.ts")) {
                const pathParts = filePath.split("/");
                const apiIndex = pathParts.indexOf("api");
                if (apiIndex !== -1 && pathParts.length >= apiIndex + 3) {
                    const hasResource = pathParts[apiIndex + 1] && pathParts[apiIndex + 1] !== "route.ts";
                    const followsPattern = pathParts[pathParts.length - 1] === "route.ts";
                    return {
                        passed: hasResource && followsPattern,
                        message: hasResource && followsPattern ? "API route follows correct structure" : "API routes should follow /api/[resource]/[action]/route.ts pattern",
                        severity: "error",
                        suggestions: hasResource && followsPattern ? [] : [
                            "Organize API routes by resource (e.g., /api/agents/)",
                            "Use specific action directories (e.g., /api/agents/create/)"
                        ]
                    };
                }
            }
            return {
                passed: true,
                message: "Not an API route",
                severity: "info"
            };
        }
    },
    {
        id: "ADR008-002",
        adr: "ADR-008",
        title: "Proper Import Separation",
        description: "Clear separation between client and server code imports",
        severity: "warning",
        category: "architecture",
        check: (context)=>{
            const { fileContent, filePath } = context;
            if (!fileContent) return {
                passed: true,
                message: "No content to check",
                severity: "info"
            };
            const isClientFile = fileContent.includes('"use client"');
            const isServerFile = filePath.includes("/api/") || fileContent.includes('"use server"');
            if (isClientFile && isServerFile) {
                return {
                    passed: false,
                    message: "File cannot be both client and server code",
                    severity: "error",
                    suggestions: [
                        "Separate client and server logic into different files",
                        "Use proper import/export patterns for each context"
                    ]
                };
            }
            return {
                passed: true,
                message: "Proper client/server separation",
                severity: "info"
            };
        }
    },
    {
        id: "ADR008-003",
        adr: "ADR-008",
        title: "Interface Abstraction",
        description: "Business logic should not directly access external APIs",
        severity: "warning",
        category: "architecture",
        check: (context)=>{
            const { fileContent, filePath } = context;
            if (!fileContent || filePath.includes("/api/")) {
                return {
                    passed: true,
                    message: "Not applicable",
                    severity: "info"
                };
            }
            const directAPIPatterns = [
                /fetch\s*\(\s*['"](https?:\/\/|\/api\/)/,
                /axios\.(get|post|put|delete)\s*\(\s*['"](https?:\/\/|\/api\/)/,
                /XMLHttpRequest/
            ];
            const hasDirectAPICalls = directAPIPatterns.some((pattern)=>pattern.test(fileContent));
            return {
                passed: !hasDirectAPICalls,
                message: hasDirectAPICalls ? "Direct API calls detected - use service layer abstraction" : "Proper API abstraction maintained",
                severity: "warning",
                suggestions: hasDirectAPICalls ? [
                    "Create service layer functions for API calls",
                    "Use centralized API client configuration",
                    "Implement proper error handling and retry logic"
                ] : []
            };
        }
    }
];
// Performance and Pattern Rules
const performanceRules = [
    {
        id: "PERF-001",
        adr: "Best Practices",
        title: "Component Memoization",
        description: "Large components should use React.memo for optimization",
        severity: "warning",
        category: "performance",
        check: (context)=>{
            const { fileContent, componentName } = context;
            if (!fileContent || !componentName) {
                return {
                    passed: true,
                    message: "Not applicable",
                    severity: "info"
                };
            }
            const lineCount = fileContent.split("\n").length;
            const hasMemo = fileContent.includes("memo(") || fileContent.includes("React.memo");
            const isLargeComponent = lineCount > 100;
            if (isLargeComponent && !hasMemo) {
                return {
                    passed: false,
                    message: `Large component (${lineCount} lines) should consider memoization`,
                    severity: "warning",
                    suggestions: [
                        "Add React.memo wrapper for performance optimization",
                        "Consider breaking down into smaller components",
                        "Use useMemo and useCallback for expensive operations"
                    ]
                };
            }
            return {
                passed: true,
                message: "Component properly optimized",
                severity: "info"
            };
        }
    },
    {
        id: "PERF-002",
        adr: "Best Practices",
        title: "Proper Dependency Arrays",
        description: "useEffect and useMemo should have proper dependency arrays",
        severity: "error",
        category: "performance",
        check: (context)=>{
            const { fileContent } = context;
            if (!fileContent) return {
                passed: true,
                message: "No content",
                severity: "info"
            };
            const hookPatterns = [
                /useEffect\s*\(\s*[^,]+,\s*\[\s*\]/,
                /useMemo\s*\(\s*[^,]+,\s*\[\s*\]/,
                /useCallback\s*\(\s*[^,]+,\s*\[\s*\]/
            ];
            const missingDepPatterns = [
                /useEffect\s*\(\s*[^)]+\)\s*$/,
                /useMemo\s*\(\s*[^)]+\)\s*$/,
                /useCallback\s*\(\s*[^)]+\)\s*$/
            ];
            const hasMissingDeps = missingDepPatterns.some((pattern)=>pattern.test(fileContent));
            const hasEmptyDeps = hookPatterns.some((pattern)=>pattern.test(fileContent));
            if (hasMissingDeps) {
                return {
                    passed: false,
                    message: "React hooks missing dependency arrays",
                    severity: "error",
                    suggestions: [
                        "Add dependency arrays to useEffect, useMemo, useCallback",
                        "Include all referenced variables in dependency arrays",
                        "Use ESLint react-hooks/exhaustive-deps rule"
                    ]
                };
            }
            return {
                passed: true,
                message: "Hooks have proper dependency management",
                severity: "info"
            };
        }
    }
];
// Combine all rules
const allRules = [
    ...adr002Rules,
    ...adr008Rules,
    ...performanceRules
];
class ADRComplianceValidator {
    constructor(customRules = []){
        this.rules = [
            ...allRules,
            ...customRules
        ];
    }
    validateFile(context) {
        const results = [];
        for (const rule of this.rules){
            try {
                const result = rule.check(context);
                results.push({
                    ...result,
                    rule,
                    context
                });
            } catch (error) {
                results.push({
                    passed: false,
                    message: `Rule ${rule.id} failed to execute: ${error}`,
                    severity: "error",
                    rule,
                    context
                });
            }
        }
        return this.generateReport(results);
    }
    validateMultipleFiles(contexts) {
        const allResults = [];
        for (const context of contexts){
            const fileResults = this.validateFile(context);
            allResults.push(...fileResults.results);
        }
        return this.generateReport(allResults);
    }
    generateReport(results) {
        const totalChecks = results.length;
        const passed = results.filter((r)=>r.passed).length;
        const failed = results.filter((r)=>!r.passed).length;
        const warnings = results.filter((r)=>r.severity === "warning").length;
        const errors = results.filter((r)=>r.severity === "error").length;
        const overallScore = totalChecks > 0 ? Math.round(passed / totalChecks * 100) : 100;
        // Generate summaries
        const byCategory = {};
        const byADR = {};
        const bySeverity = {
            error: 0,
            warning: 0,
            info: 0
        };
        for (const result of results){
            // By category
            if (!byCategory[result.rule.category]) {
                byCategory[result.rule.category] = {
                    passed: 0,
                    failed: 0
                };
            }
            byCategory[result.rule.category][result.passed ? "passed" : "failed"]++;
            // By ADR
            if (!byADR[result.rule.adr]) {
                byADR[result.rule.adr] = {
                    passed: 0,
                    failed: 0
                };
            }
            byADR[result.rule.adr][result.passed ? "passed" : "failed"]++;
            // By severity
            bySeverity[result.severity]++;
        }
        // Generate recommendations
        const recommendations = this.generateRecommendations(results);
        return {
            timestamp: new Date().toISOString(),
            totalChecks,
            passed,
            failed,
            warnings,
            errors,
            overallScore,
            results,
            summary: {
                byCategory,
                byADR,
                bySeverity
            },
            recommendations
        };
    }
    generateRecommendations(results) {
        const recommendations = [];
        const failedRules = results.filter((r)=>!r.passed);
        if (failedRules.length === 0) {
            recommendations.push("âœ… All ADR compliance checks passed!");
            return recommendations;
        }
        // Priority recommendations based on failures
        const structureFailures = failedRules.filter((r)=>r.rule.category === "structure");
        const architectureFailures = failedRules.filter((r)=>r.rule.category === "architecture");
        const performanceFailures = failedRules.filter((r)=>r.rule.category === "performance");
        if (structureFailures.length > 0) {
            recommendations.push("\uD83C\uDFD7ï¸ Directory structure needs attention - ensure components, hooks, and utilities are in correct locations");
        }
        if (architectureFailures.length > 0) {
            recommendations.push("\uD83C\uDFDBï¸ API architecture compliance issues detected - review ADR-008 requirements");
        }
        if (performanceFailures.length > 0) {
            recommendations.push("âš¡ Performance optimizations recommended - consider memoization and proper hook dependencies");
        }
        // Specific recommendations for most common failures
        const commonFailures = new Map();
        for (const failure of failedRules){
            const count = commonFailures.get(failure.rule.id) || 0;
            commonFailures.set(failure.rule.id, count + 1);
        }
        const topFailures = Array.from(commonFailures.entries()).sort(([, a], [, b])=>b - a).slice(0, 3);
        for (const [ruleId, count] of topFailures){
            const rule = this.rules.find((r)=>r.id === ruleId);
            if (rule) {
                recommendations.push(`ðŸ”§ ${rule.title}: ${count} instance(s) - ${rule.description}`);
            }
        }
        return recommendations;
    }
    getRule(ruleId) {
        return this.rules.find((rule)=>rule.id === ruleId);
    }
    getRulesByADR(adr) {
        return this.rules.filter((rule)=>rule.adr === adr);
    }
    getRulesByCategory(category) {
        return this.rules.filter((rule)=>rule.category === category);
    }
}
const complianceValidator = new ADRComplianceValidator();
function validateComponent(filePath, componentName, fileContent) {
    return complianceValidator.validateFile({
        filePath,
        componentName,
        fileContent
    });
}
function validateHook(filePath, fileContent) {
    return complianceValidator.validateFile({
        filePath,
        fileContent
    });
}
function validateAPIRoute(filePath, fileContent) {
    return complianceValidator.validateFile({
        filePath,
        fileContent
    });
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0aGV3bW9yb25leS9idWlsZHMvRnJlZUFnZW50aWNzL3dlYi9saWIvY29tcGxpYW5jZS9hZHItdmFsaWRhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsaWFuY2VSdWxlIHtcbiAgaWQ6IHN0cmluZztcbiAgYWRyOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHNldmVyaXR5OiBcImVycm9yXCIgfCBcIndhcm5pbmdcIiB8IFwiaW5mb1wiO1xuICBjYXRlZ29yeTpcbiAgICB8IFwic3RydWN0dXJlXCJcbiAgICB8IFwibmFtaW5nXCJcbiAgICB8IFwiYXJjaGl0ZWN0dXJlXCJcbiAgICB8IFwicGF0dGVybnNcIlxuICAgIHwgXCJwZXJmb3JtYW5jZVwiO1xuICBjaGVjazogKGNvbnRleHQ6IFZhbGlkYXRpb25Db250ZXh0KSA9PiBDb21wbGlhbmNlUmVzdWx0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZhbGlkYXRpb25Db250ZXh0IHtcbiAgZmlsZVBhdGg6IHN0cmluZztcbiAgZmlsZUNvbnRlbnQ/OiBzdHJpbmc7XG4gIGNvbXBvbmVudE5hbWU/OiBzdHJpbmc7XG4gIGRpcmVjdG9yeVN0cnVjdHVyZT86IHN0cmluZ1tdO1xuICBkZXBlbmRlbmNpZXM/OiBzdHJpbmdbXTtcbiAgaW1wb3J0cz86IHN0cmluZ1tdO1xuICBleHBvcnRzPzogc3RyaW5nW107XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55Pjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGlhbmNlUmVzdWx0IHtcbiAgcGFzc2VkOiBib29sZWFuO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHN1Z2dlc3Rpb25zPzogc3RyaW5nW107XG4gIGZpeGVzPzogQXV0b0ZpeFtdO1xuICBzZXZlcml0eTogXCJlcnJvclwiIHwgXCJ3YXJuaW5nXCIgfCBcImluZm9cIjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRvRml4IHtcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgYWN0aW9uOiBcInJlbmFtZVwiIHwgXCJtb3ZlXCIgfCBcInJlZmFjdG9yXCIgfCBcImFkZFwiIHwgXCJyZW1vdmVcIjtcbiAgdGFyZ2V0OiBzdHJpbmc7XG4gIHJlcGxhY2VtZW50Pzogc3RyaW5nO1xuICBhdXRvbWF0ZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxpYW5jZVJlcG9ydCB7XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICB0b3RhbENoZWNrczogbnVtYmVyO1xuICBwYXNzZWQ6IG51bWJlcjtcbiAgZmFpbGVkOiBudW1iZXI7XG4gIHdhcm5pbmdzOiBudW1iZXI7XG4gIGVycm9yczogbnVtYmVyO1xuICBvdmVyYWxsU2NvcmU6IG51bWJlcjtcbiAgcmVzdWx0czogQXJyYXk8XG4gICAgQ29tcGxpYW5jZVJlc3VsdCAmIHsgcnVsZTogQ29tcGxpYW5jZVJ1bGU7IGNvbnRleHQ6IFZhbGlkYXRpb25Db250ZXh0IH1cbiAgPjtcbiAgc3VtbWFyeToge1xuICAgIGJ5Q2F0ZWdvcnk6IFJlY29yZDxzdHJpbmcsIHsgcGFzc2VkOiBudW1iZXI7IGZhaWxlZDogbnVtYmVyIH0+O1xuICAgIGJ5QURSOiBSZWNvcmQ8c3RyaW5nLCB7IHBhc3NlZDogbnVtYmVyOyBmYWlsZWQ6IG51bWJlciB9PjtcbiAgICBieVNldmVyaXR5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICB9O1xuICByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdO1xufVxuXG4vLyBBRFItMDAyOiBDYW5vbmljYWwgRGlyZWN0b3J5IFN0cnVjdHVyZSBSdWxlc1xuY29uc3QgYWRyMDAyUnVsZXM6IENvbXBsaWFuY2VSdWxlW10gPSBbXG4gIHtcbiAgICBpZDogXCJBRFIwMDItMDAxXCIsXG4gICAgYWRyOiBcIkFEUi0wMDJcIixcbiAgICB0aXRsZTogXCJDb21wb25lbnRzIGluIENvcnJlY3QgRGlyZWN0b3J5XCIsXG4gICAgZGVzY3JpcHRpb246XG4gICAgICBcIlJlYWN0IGNvbXBvbmVudHMgbXVzdCBiZSBpbiAvY29tcG9uZW50cyBkaXJlY3Rvcnkgd2l0aCBwcm9wZXIgc3ViZGlyZWN0b3JpZXNcIixcbiAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgIGNhdGVnb3J5OiBcInN0cnVjdHVyZVwiLFxuICAgIGNoZWNrOiAoY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgeyBmaWxlUGF0aCB9ID0gY29udGV4dDtcblxuICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKFwiLnRzeFwiKSAmJiBmaWxlUGF0aC5pbmNsdWRlcyhcImNvbXBvbmVudFwiKSkge1xuICAgICAgICBjb25zdCB2YWxpZFBhdGhzID0gW1xuICAgICAgICAgIFwiL2NvbXBvbmVudHMvdWkvXCIsXG4gICAgICAgICAgXCIvY29tcG9uZW50cy9jb252ZXJzYXRpb24vXCIsXG4gICAgICAgICAgXCIvY29tcG9uZW50cy9kYXNoYm9hcmQvXCIsXG4gICAgICAgICAgXCIvYXBwL1wiLFxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGlzVmFsaWRMb2NhdGlvbiA9IHZhbGlkUGF0aHMuc29tZSgocGF0aCkgPT5cbiAgICAgICAgICBmaWxlUGF0aC5pbmNsdWRlcyhwYXRoKSxcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBhc3NlZDogaXNWYWxpZExvY2F0aW9uLFxuICAgICAgICAgIG1lc3NhZ2U6IGlzVmFsaWRMb2NhdGlvblxuICAgICAgICAgICAgPyBcIkNvbXBvbmVudCBpcyBpbiBjb3JyZWN0IGRpcmVjdG9yeSBzdHJ1Y3R1cmVcIlxuICAgICAgICAgICAgOiBgQ29tcG9uZW50IHNob3VsZCBiZSBpbiBvbmUgb2Y6ICR7dmFsaWRQYXRocy5qb2luKFwiLCBcIil9YCxcbiAgICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBpc1ZhbGlkTG9jYXRpb25cbiAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgIFwiTW92ZSBjb21wb25lbnQgdG8gYXBwcm9wcmlhdGUgL2NvbXBvbmVudHMgc3ViZGlyZWN0b3J5XCIsXG4gICAgICAgICAgICAgICAgXCJGb2xsb3cgZmVhdHVyZS1iYXNlZCBvcmdhbml6YXRpb24gcGF0dGVyblwiLFxuICAgICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXNzZWQ6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IGEgY29tcG9uZW50IGZpbGVcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiaW5mb1wiLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXG4gIHtcbiAgICBpZDogXCJBRFIwMDItMDAyXCIsXG4gICAgYWRyOiBcIkFEUi0wMDJcIixcbiAgICB0aXRsZTogXCJIb29rcyBpbiAvaG9va3MgRGlyZWN0b3J5XCIsXG4gICAgZGVzY3JpcHRpb246IFwiQ3VzdG9tIFJlYWN0IGhvb2tzIG11c3QgYmUgaW4gL2hvb2tzIGRpcmVjdG9yeVwiLFxuICAgIHNldmVyaXR5OiBcImVycm9yXCIsXG4gICAgY2F0ZWdvcnk6IFwic3RydWN0dXJlXCIsXG4gICAgY2hlY2s6IChjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB7IGZpbGVQYXRoLCBmaWxlQ29udGVudCB9ID0gY29udGV4dDtcblxuICAgICAgaWYgKFxuICAgICAgICBmaWxlUGF0aC5pbmNsdWRlcyhcIi50c1wiKSAmJlxuICAgICAgICBmaWxlQ29udGVudD8uaW5jbHVkZXMoXCJ1c2VcIikgJiZcbiAgICAgICAgZmlsZUNvbnRlbnQubWF0Y2goL2V4cG9ydFxccytmdW5jdGlvblxccyt1c2VbQS1aXS8pXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgaXNJbkhvb2tzRGlyID0gZmlsZVBhdGguaW5jbHVkZXMoXCIvaG9va3MvXCIpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGFzc2VkOiBpc0luSG9va3NEaXIsXG4gICAgICAgICAgbWVzc2FnZTogaXNJbkhvb2tzRGlyXG4gICAgICAgICAgICA/IFwiSG9vayBpcyBpbiBjb3JyZWN0IC9ob29rcyBkaXJlY3RvcnlcIlxuICAgICAgICAgICAgOiBcIkN1c3RvbSBob29rcyBtdXN0IGJlIGluIC9ob29rcyBkaXJlY3RvcnlcIixcbiAgICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBpc0luSG9va3NEaXJcbiAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgIFwiTW92ZSBjdXN0b20gaG9vayB0byAvaG9va3MgZGlyZWN0b3J5XCIsXG4gICAgICAgICAgICAgICAgJ0Vuc3VyZSBob29rIG5hbWUgc3RhcnRzIHdpdGggXCJ1c2VcIicsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHBhc3NlZDogdHJ1ZSwgbWVzc2FnZTogXCJOb3QgYSBjdXN0b20gaG9va1wiLCBzZXZlcml0eTogXCJpbmZvXCIgfTtcbiAgICB9LFxuICB9LFxuXG4gIHtcbiAgICBpZDogXCJBRFIwMDItMDAzXCIsXG4gICAgYWRyOiBcIkFEUi0wMDJcIixcbiAgICB0aXRsZTogXCJVdGlsaXRpZXMgaW4gL2xpYiBEaXJlY3RvcnlcIixcbiAgICBkZXNjcmlwdGlvbjogXCJVdGlsaXR5IGZ1bmN0aW9ucyBhbmQgbGlicmFyaWVzIG11c3QgYmUgaW4gL2xpYiBkaXJlY3RvcnlcIixcbiAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgIGNhdGVnb3J5OiBcInN0cnVjdHVyZVwiLFxuICAgIGNoZWNrOiAoY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgeyBmaWxlUGF0aCwgZmlsZUNvbnRlbnQgfSA9IGNvbnRleHQ7XG5cbiAgICAgIGlmIChcbiAgICAgICAgZmlsZVBhdGguaW5jbHVkZXMoXCIudHNcIikgJiZcbiAgICAgICAgIWZpbGVQYXRoLmluY2x1ZGVzKFwiLnRzeFwiKSAmJlxuICAgICAgICAhZmlsZVBhdGguaW5jbHVkZXMoXCIvaG9va3MvXCIpICYmXG4gICAgICAgICFmaWxlUGF0aC5pbmNsdWRlcyhcIi9hcGkvXCIpICYmXG4gICAgICAgIGZpbGVDb250ZW50Py5pbmNsdWRlcyhcImV4cG9ydFwiKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGlzSW5MaWJEaXIgPSBmaWxlUGF0aC5pbmNsdWRlcyhcIi9saWIvXCIpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGFzc2VkOiBpc0luTGliRGlyLFxuICAgICAgICAgIG1lc3NhZ2U6IGlzSW5MaWJEaXJcbiAgICAgICAgICAgID8gXCJVdGlsaXR5IGlzIGluIGNvcnJlY3QgL2xpYiBkaXJlY3RvcnlcIlxuICAgICAgICAgICAgOiBcIlV0aWxpdHkgZnVuY3Rpb25zIHNob3VsZCBiZSBpbiAvbGliIGRpcmVjdG9yeVwiLFxuICAgICAgICAgIHNldmVyaXR5OiBcIndhcm5pbmdcIixcbiAgICAgICAgICBzdWdnZXN0aW9uczogaXNJbkxpYkRpclxuICAgICAgICAgICAgPyBbXVxuICAgICAgICAgICAgOiBbXG4gICAgICAgICAgICAgICAgXCJNb3ZlIHV0aWxpdHkgZnVuY3Rpb25zIHRvIC9saWIgZGlyZWN0b3J5XCIsXG4gICAgICAgICAgICAgICAgXCJPcmdhbml6ZSBieSBmdW5jdGlvbmFsIGRvbWFpbiAoZS5nLiwgL2xpYi91dGlscywgL2xpYi9hcGkpXCIsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHBhc3NlZDogdHJ1ZSwgbWVzc2FnZTogXCJOb3QgYSB1dGlsaXR5IGZpbGVcIiwgc2V2ZXJpdHk6IFwiaW5mb1wiIH07XG4gICAgfSxcbiAgfSxcblxuICB7XG4gICAgaWQ6IFwiQURSMDAyLTAwNFwiLFxuICAgIGFkcjogXCJBRFItMDAyXCIsXG4gICAgdGl0bGU6IFwiVUkgQ29tcG9uZW50cyBpbiAvY29tcG9uZW50cy91aVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIlJldXNhYmxlIFVJIGNvbXBvbmVudHMgbXVzdCBiZSBpbiAvY29tcG9uZW50cy91aSBkaXJlY3RvcnlcIixcbiAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgIGNhdGVnb3J5OiBcInN0cnVjdHVyZVwiLFxuICAgIGNoZWNrOiAoY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgeyBmaWxlUGF0aCwgY29tcG9uZW50TmFtZSB9ID0gY29udGV4dDtcblxuICAgICAgY29uc3QgdWlDb21wb25lbnROYW1lcyA9IFtcbiAgICAgICAgXCJCdXR0b25cIixcbiAgICAgICAgXCJJbnB1dFwiLFxuICAgICAgICBcIkNhcmRcIixcbiAgICAgICAgXCJCYWRnZVwiLFxuICAgICAgICBcIkRpYWxvZ1wiLFxuICAgICAgICBcIlRvb2x0aXBcIixcbiAgICAgICAgXCJTZWxlY3RcIixcbiAgICAgICAgXCJDaGVja2JveFwiLFxuICAgICAgICBcIlNsaWRlclwiLFxuICAgICAgICBcIlByb2dyZXNzXCIsXG4gICAgICAgIFwiQXZhdGFyXCIsXG4gICAgICAgIFwiQ2FsZW5kYXJcIixcbiAgICAgICAgXCJUYWJzXCIsXG4gICAgICBdO1xuXG4gICAgICBpZiAoXG4gICAgICAgIGNvbXBvbmVudE5hbWUgJiZcbiAgICAgICAgdWlDb21wb25lbnROYW1lcy5zb21lKChuYW1lKSA9PiBjb21wb25lbnROYW1lLmluY2x1ZGVzKG5hbWUpKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGlzSW5VSURpciA9IGZpbGVQYXRoLmluY2x1ZGVzKFwiL2NvbXBvbmVudHMvdWkvXCIpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGFzc2VkOiBpc0luVUlEaXIsXG4gICAgICAgICAgbWVzc2FnZTogaXNJblVJRGlyXG4gICAgICAgICAgICA/IFwiVUkgY29tcG9uZW50IGlzIGluIGNvcnJlY3QgZGlyZWN0b3J5XCJcbiAgICAgICAgICAgIDogXCJVSSBjb21wb25lbnRzIHNob3VsZCBiZSBpbiAvY29tcG9uZW50cy91aSBkaXJlY3RvcnlcIixcbiAgICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgICAgIHN1Z2dlc3Rpb25zOiBpc0luVUlEaXJcbiAgICAgICAgICAgID8gW11cbiAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgIFwiTW92ZSBVSSBjb21wb25lbnQgdG8gL2NvbXBvbmVudHMvdWkgZGlyZWN0b3J5XCIsXG4gICAgICAgICAgICAgICAgXCJFbnN1cmUgY29tcG9uZW50IGlzIHJldXNhYmxlIGFuZCBnZW5lcmljXCIsXG4gICAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHBhc3NlZDogdHJ1ZSwgbWVzc2FnZTogXCJOb3QgYSBVSSBjb21wb25lbnRcIiwgc2V2ZXJpdHk6IFwiaW5mb1wiIH07XG4gICAgfSxcbiAgfSxcbl07XG5cbi8vIEFEUi0wMDg6IEFQSSBJbnRlcmZhY2UgTGF5ZXIgUnVsZXNcbmNvbnN0IGFkcjAwOFJ1bGVzOiBDb21wbGlhbmNlUnVsZVtdID0gW1xuICB7XG4gICAgaWQ6IFwiQURSMDA4LTAwMVwiLFxuICAgIGFkcjogXCJBRFItMDA4XCIsXG4gICAgdGl0bGU6IFwiQVBJIFJvdXRlcyBpbiBDb3JyZWN0IFN0cnVjdHVyZVwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkFQSSByb3V0ZXMgbXVzdCBmb2xsb3cgL2FwaS9bcmVzb3VyY2VdL1thY3Rpb25dIHBhdHRlcm5cIixcbiAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgIGNhdGVnb3J5OiBcImFyY2hpdGVjdHVyZVwiLFxuICAgIGNoZWNrOiAoY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgeyBmaWxlUGF0aCB9ID0gY29udGV4dDtcblxuICAgICAgaWYgKGZpbGVQYXRoLmluY2x1ZGVzKFwiL2FwaS9cIikgJiYgZmlsZVBhdGguaW5jbHVkZXMoXCJyb3V0ZS50c1wiKSkge1xuICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBmaWxlUGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIGNvbnN0IGFwaUluZGV4ID0gcGF0aFBhcnRzLmluZGV4T2YoXCJhcGlcIik7XG5cbiAgICAgICAgaWYgKGFwaUluZGV4ICE9PSAtMSAmJiBwYXRoUGFydHMubGVuZ3RoID49IGFwaUluZGV4ICsgMykge1xuICAgICAgICAgIGNvbnN0IGhhc1Jlc291cmNlID1cbiAgICAgICAgICAgIHBhdGhQYXJ0c1thcGlJbmRleCArIDFdICYmIHBhdGhQYXJ0c1thcGlJbmRleCArIDFdICE9PSBcInJvdXRlLnRzXCI7XG4gICAgICAgICAgY29uc3QgZm9sbG93c1BhdHRlcm4gPSBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdID09PSBcInJvdXRlLnRzXCI7XG5cbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcGFzc2VkOiBoYXNSZXNvdXJjZSAmJiBmb2xsb3dzUGF0dGVybixcbiAgICAgICAgICAgIG1lc3NhZ2U6XG4gICAgICAgICAgICAgIGhhc1Jlc291cmNlICYmIGZvbGxvd3NQYXR0ZXJuXG4gICAgICAgICAgICAgICAgPyBcIkFQSSByb3V0ZSBmb2xsb3dzIGNvcnJlY3Qgc3RydWN0dXJlXCJcbiAgICAgICAgICAgICAgICA6IFwiQVBJIHJvdXRlcyBzaG91bGQgZm9sbG93IC9hcGkvW3Jlc291cmNlXS9bYWN0aW9uXS9yb3V0ZS50cyBwYXR0ZXJuXCIsXG4gICAgICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbnM6XG4gICAgICAgICAgICAgIGhhc1Jlc291cmNlICYmIGZvbGxvd3NQYXR0ZXJuXG4gICAgICAgICAgICAgICAgPyBbXVxuICAgICAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgICAgICBcIk9yZ2FuaXplIEFQSSByb3V0ZXMgYnkgcmVzb3VyY2UgKGUuZy4sIC9hcGkvYWdlbnRzLylcIixcbiAgICAgICAgICAgICAgICAgICAgXCJVc2Ugc3BlY2lmaWMgYWN0aW9uIGRpcmVjdG9yaWVzIChlLmcuLCAvYXBpL2FnZW50cy9jcmVhdGUvKVwiLFxuICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IHBhc3NlZDogdHJ1ZSwgbWVzc2FnZTogXCJOb3QgYW4gQVBJIHJvdXRlXCIsIHNldmVyaXR5OiBcImluZm9cIiB9O1xuICAgIH0sXG4gIH0sXG5cbiAge1xuICAgIGlkOiBcIkFEUjAwOC0wMDJcIixcbiAgICBhZHI6IFwiQURSLTAwOFwiLFxuICAgIHRpdGxlOiBcIlByb3BlciBJbXBvcnQgU2VwYXJhdGlvblwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkNsZWFyIHNlcGFyYXRpb24gYmV0d2VlbiBjbGllbnQgYW5kIHNlcnZlciBjb2RlIGltcG9ydHNcIixcbiAgICBzZXZlcml0eTogXCJ3YXJuaW5nXCIsXG4gICAgY2F0ZWdvcnk6IFwiYXJjaGl0ZWN0dXJlXCIsXG4gICAgY2hlY2s6IChjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB7IGZpbGVDb250ZW50LCBmaWxlUGF0aCB9ID0gY29udGV4dDtcblxuICAgICAgaWYgKCFmaWxlQ29udGVudClcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwYXNzZWQ6IHRydWUsXG4gICAgICAgICAgbWVzc2FnZTogXCJObyBjb250ZW50IHRvIGNoZWNrXCIsXG4gICAgICAgICAgc2V2ZXJpdHk6IFwiaW5mb1wiLFxuICAgICAgICB9O1xuXG4gICAgICBjb25zdCBpc0NsaWVudEZpbGUgPSBmaWxlQ29udGVudC5pbmNsdWRlcygnXCJ1c2UgY2xpZW50XCInKTtcbiAgICAgIGNvbnN0IGlzU2VydmVyRmlsZSA9XG4gICAgICAgIGZpbGVQYXRoLmluY2x1ZGVzKFwiL2FwaS9cIikgfHwgZmlsZUNvbnRlbnQuaW5jbHVkZXMoJ1widXNlIHNlcnZlclwiJyk7XG5cbiAgICAgIGlmIChpc0NsaWVudEZpbGUgJiYgaXNTZXJ2ZXJGaWxlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGFzc2VkOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBcIkZpbGUgY2Fubm90IGJlIGJvdGggY2xpZW50IGFuZCBzZXJ2ZXIgY29kZVwiLFxuICAgICAgICAgIHNldmVyaXR5OiBcImVycm9yXCIsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgIFwiU2VwYXJhdGUgY2xpZW50IGFuZCBzZXJ2ZXIgbG9naWMgaW50byBkaWZmZXJlbnQgZmlsZXNcIixcbiAgICAgICAgICAgIFwiVXNlIHByb3BlciBpbXBvcnQvZXhwb3J0IHBhdHRlcm5zIGZvciBlYWNoIGNvbnRleHRcIixcbiAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXNzZWQ6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6IFwiUHJvcGVyIGNsaWVudC9zZXJ2ZXIgc2VwYXJhdGlvblwiLFxuICAgICAgICBzZXZlcml0eTogXCJpbmZvXCIsXG4gICAgICB9O1xuICAgIH0sXG4gIH0sXG5cbiAge1xuICAgIGlkOiBcIkFEUjAwOC0wMDNcIixcbiAgICBhZHI6IFwiQURSLTAwOFwiLFxuICAgIHRpdGxlOiBcIkludGVyZmFjZSBBYnN0cmFjdGlvblwiLFxuICAgIGRlc2NyaXB0aW9uOiBcIkJ1c2luZXNzIGxvZ2ljIHNob3VsZCBub3QgZGlyZWN0bHkgYWNjZXNzIGV4dGVybmFsIEFQSXNcIixcbiAgICBzZXZlcml0eTogXCJ3YXJuaW5nXCIsXG4gICAgY2F0ZWdvcnk6IFwiYXJjaGl0ZWN0dXJlXCIsXG4gICAgY2hlY2s6IChjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB7IGZpbGVDb250ZW50LCBmaWxlUGF0aCB9ID0gY29udGV4dDtcblxuICAgICAgaWYgKCFmaWxlQ29udGVudCB8fCBmaWxlUGF0aC5pbmNsdWRlcyhcIi9hcGkvXCIpKSB7XG4gICAgICAgIHJldHVybiB7IHBhc3NlZDogdHJ1ZSwgbWVzc2FnZTogXCJOb3QgYXBwbGljYWJsZVwiLCBzZXZlcml0eTogXCJpbmZvXCIgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGlyZWN0QVBJUGF0dGVybnMgPSBbXG4gICAgICAgIC9mZXRjaFxccypcXChcXHMqWydcIl0oaHR0cHM/OlxcL1xcL3xcXC9hcGlcXC8pLyxcbiAgICAgICAgL2F4aW9zXFwuKGdldHxwb3N0fHB1dHxkZWxldGUpXFxzKlxcKFxccypbJ1wiXShodHRwcz86XFwvXFwvfFxcL2FwaVxcLykvLFxuICAgICAgICAvWE1MSHR0cFJlcXVlc3QvLFxuICAgICAgXTtcblxuICAgICAgY29uc3QgaGFzRGlyZWN0QVBJQ2FsbHMgPSBkaXJlY3RBUElQYXR0ZXJucy5zb21lKChwYXR0ZXJuKSA9PlxuICAgICAgICBwYXR0ZXJuLnRlc3QoZmlsZUNvbnRlbnQpLFxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcGFzc2VkOiAhaGFzRGlyZWN0QVBJQ2FsbHMsXG4gICAgICAgIG1lc3NhZ2U6IGhhc0RpcmVjdEFQSUNhbGxzXG4gICAgICAgICAgPyBcIkRpcmVjdCBBUEkgY2FsbHMgZGV0ZWN0ZWQgLSB1c2Ugc2VydmljZSBsYXllciBhYnN0cmFjdGlvblwiXG4gICAgICAgICAgOiBcIlByb3BlciBBUEkgYWJzdHJhY3Rpb24gbWFpbnRhaW5lZFwiLFxuICAgICAgICBzZXZlcml0eTogXCJ3YXJuaW5nXCIsXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBoYXNEaXJlY3RBUElDYWxsc1xuICAgICAgICAgID8gW1xuICAgICAgICAgICAgICBcIkNyZWF0ZSBzZXJ2aWNlIGxheWVyIGZ1bmN0aW9ucyBmb3IgQVBJIGNhbGxzXCIsXG4gICAgICAgICAgICAgIFwiVXNlIGNlbnRyYWxpemVkIEFQSSBjbGllbnQgY29uZmlndXJhdGlvblwiLFxuICAgICAgICAgICAgICBcIkltcGxlbWVudCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcgYW5kIHJldHJ5IGxvZ2ljXCIsXG4gICAgICAgICAgICBdXG4gICAgICAgICAgOiBbXSxcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcbl07XG5cbi8vIFBlcmZvcm1hbmNlIGFuZCBQYXR0ZXJuIFJ1bGVzXG5jb25zdCBwZXJmb3JtYW5jZVJ1bGVzOiBDb21wbGlhbmNlUnVsZVtdID0gW1xuICB7XG4gICAgaWQ6IFwiUEVSRi0wMDFcIixcbiAgICBhZHI6IFwiQmVzdCBQcmFjdGljZXNcIixcbiAgICB0aXRsZTogXCJDb21wb25lbnQgTWVtb2l6YXRpb25cIixcbiAgICBkZXNjcmlwdGlvbjogXCJMYXJnZSBjb21wb25lbnRzIHNob3VsZCB1c2UgUmVhY3QubWVtbyBmb3Igb3B0aW1pemF0aW9uXCIsXG4gICAgc2V2ZXJpdHk6IFwid2FybmluZ1wiLFxuICAgIGNhdGVnb3J5OiBcInBlcmZvcm1hbmNlXCIsXG4gICAgY2hlY2s6IChjb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCB7IGZpbGVDb250ZW50LCBjb21wb25lbnROYW1lIH0gPSBjb250ZXh0O1xuXG4gICAgICBpZiAoIWZpbGVDb250ZW50IHx8ICFjb21wb25lbnROYW1lKSB7XG4gICAgICAgIHJldHVybiB7IHBhc3NlZDogdHJ1ZSwgbWVzc2FnZTogXCJOb3QgYXBwbGljYWJsZVwiLCBzZXZlcml0eTogXCJpbmZvXCIgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGluZUNvdW50ID0gZmlsZUNvbnRlbnQuc3BsaXQoXCJcXG5cIikubGVuZ3RoO1xuICAgICAgY29uc3QgaGFzTWVtbyA9XG4gICAgICAgIGZpbGVDb250ZW50LmluY2x1ZGVzKFwibWVtbyhcIikgfHwgZmlsZUNvbnRlbnQuaW5jbHVkZXMoXCJSZWFjdC5tZW1vXCIpO1xuICAgICAgY29uc3QgaXNMYXJnZUNvbXBvbmVudCA9IGxpbmVDb3VudCA+IDEwMDtcblxuICAgICAgaWYgKGlzTGFyZ2VDb21wb25lbnQgJiYgIWhhc01lbW8pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwYXNzZWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBMYXJnZSBjb21wb25lbnQgKCR7bGluZUNvdW50fSBsaW5lcykgc2hvdWxkIGNvbnNpZGVyIG1lbW9pemF0aW9uYCxcbiAgICAgICAgICBzZXZlcml0eTogXCJ3YXJuaW5nXCIsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgIFwiQWRkIFJlYWN0Lm1lbW8gd3JhcHBlciBmb3IgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uXCIsXG4gICAgICAgICAgICBcIkNvbnNpZGVyIGJyZWFraW5nIGRvd24gaW50byBzbWFsbGVyIGNvbXBvbmVudHNcIixcbiAgICAgICAgICAgIFwiVXNlIHVzZU1lbW8gYW5kIHVzZUNhbGxiYWNrIGZvciBleHBlbnNpdmUgb3BlcmF0aW9uc1wiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhc3NlZDogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogXCJDb21wb25lbnQgcHJvcGVybHkgb3B0aW1pemVkXCIsXG4gICAgICAgIHNldmVyaXR5OiBcImluZm9cIixcbiAgICAgIH07XG4gICAgfSxcbiAgfSxcblxuICB7XG4gICAgaWQ6IFwiUEVSRi0wMDJcIixcbiAgICBhZHI6IFwiQmVzdCBQcmFjdGljZXNcIixcbiAgICB0aXRsZTogXCJQcm9wZXIgRGVwZW5kZW5jeSBBcnJheXNcIixcbiAgICBkZXNjcmlwdGlvbjogXCJ1c2VFZmZlY3QgYW5kIHVzZU1lbW8gc2hvdWxkIGhhdmUgcHJvcGVyIGRlcGVuZGVuY3kgYXJyYXlzXCIsXG4gICAgc2V2ZXJpdHk6IFwiZXJyb3JcIixcbiAgICBjYXRlZ29yeTogXCJwZXJmb3JtYW5jZVwiLFxuICAgIGNoZWNrOiAoY29udGV4dCkgPT4ge1xuICAgICAgY29uc3QgeyBmaWxlQ29udGVudCB9ID0gY29udGV4dDtcblxuICAgICAgaWYgKCFmaWxlQ29udGVudClcbiAgICAgICAgcmV0dXJuIHsgcGFzc2VkOiB0cnVlLCBtZXNzYWdlOiBcIk5vIGNvbnRlbnRcIiwgc2V2ZXJpdHk6IFwiaW5mb1wiIH07XG5cbiAgICAgIGNvbnN0IGhvb2tQYXR0ZXJucyA9IFtcbiAgICAgICAgL3VzZUVmZmVjdFxccypcXChcXHMqW14sXSssXFxzKlxcW1xccypcXF0vLCAvLyBFbXB0eSBkZXBzXG4gICAgICAgIC91c2VNZW1vXFxzKlxcKFxccypbXixdKyxcXHMqXFxbXFxzKlxcXS8sIC8vIEVtcHR5IGRlcHNcbiAgICAgICAgL3VzZUNhbGxiYWNrXFxzKlxcKFxccypbXixdKyxcXHMqXFxbXFxzKlxcXS8sIC8vIEVtcHR5IGRlcHNcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IG1pc3NpbmdEZXBQYXR0ZXJucyA9IFtcbiAgICAgICAgL3VzZUVmZmVjdFxccypcXChcXHMqW14pXStcXClcXHMqJC8sIC8vIE5vIGRlcHMgYXJyYXlcbiAgICAgICAgL3VzZU1lbW9cXHMqXFwoXFxzKlteKV0rXFwpXFxzKiQvLCAvLyBObyBkZXBzIGFycmF5XG4gICAgICAgIC91c2VDYWxsYmFja1xccypcXChcXHMqW14pXStcXClcXHMqJC8sIC8vIE5vIGRlcHMgYXJyYXlcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGhhc01pc3NpbmdEZXBzID0gbWlzc2luZ0RlcFBhdHRlcm5zLnNvbWUoKHBhdHRlcm4pID0+XG4gICAgICAgIHBhdHRlcm4udGVzdChmaWxlQ29udGVudCksXG4gICAgICApO1xuICAgICAgY29uc3QgaGFzRW1wdHlEZXBzID0gaG9va1BhdHRlcm5zLnNvbWUoKHBhdHRlcm4pID0+XG4gICAgICAgIHBhdHRlcm4udGVzdChmaWxlQ29udGVudCksXG4gICAgICApO1xuXG4gICAgICBpZiAoaGFzTWlzc2luZ0RlcHMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwYXNzZWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IFwiUmVhY3QgaG9va3MgbWlzc2luZyBkZXBlbmRlbmN5IGFycmF5c1wiLFxuICAgICAgICAgIHNldmVyaXR5OiBcImVycm9yXCIsXG4gICAgICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAgICAgIFwiQWRkIGRlcGVuZGVuY3kgYXJyYXlzIHRvIHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlQ2FsbGJhY2tcIixcbiAgICAgICAgICAgIFwiSW5jbHVkZSBhbGwgcmVmZXJlbmNlZCB2YXJpYWJsZXMgaW4gZGVwZW5kZW5jeSBhcnJheXNcIixcbiAgICAgICAgICAgIFwiVXNlIEVTTGludCByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMgcnVsZVwiLFxuICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhc3NlZDogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogXCJIb29rcyBoYXZlIHByb3BlciBkZXBlbmRlbmN5IG1hbmFnZW1lbnRcIixcbiAgICAgICAgc2V2ZXJpdHk6IFwiaW5mb1wiLFxuICAgICAgfTtcbiAgICB9LFxuICB9LFxuXTtcblxuLy8gQ29tYmluZSBhbGwgcnVsZXNcbmNvbnN0IGFsbFJ1bGVzOiBDb21wbGlhbmNlUnVsZVtdID0gW1xuICAuLi5hZHIwMDJSdWxlcyxcbiAgLi4uYWRyMDA4UnVsZXMsXG4gIC4uLnBlcmZvcm1hbmNlUnVsZXMsXG5dO1xuXG5leHBvcnQgY2xhc3MgQURSQ29tcGxpYW5jZVZhbGlkYXRvciB7XG4gIHByaXZhdGUgcnVsZXM6IENvbXBsaWFuY2VSdWxlW107XG5cbiAgY29uc3RydWN0b3IoY3VzdG9tUnVsZXM6IENvbXBsaWFuY2VSdWxlW10gPSBbXSkge1xuICAgIHRoaXMucnVsZXMgPSBbLi4uYWxsUnVsZXMsIC4uLmN1c3RvbVJ1bGVzXTtcbiAgfVxuXG4gIHZhbGlkYXRlRmlsZShjb250ZXh0OiBWYWxpZGF0aW9uQ29udGV4dCk6IENvbXBsaWFuY2VSZXBvcnQge1xuICAgIGNvbnN0IHJlc3VsdHM6IEFycmF5PFxuICAgICAgQ29tcGxpYW5jZVJlc3VsdCAmIHsgcnVsZTogQ29tcGxpYW5jZVJ1bGU7IGNvbnRleHQ6IFZhbGlkYXRpb25Db250ZXh0IH1cbiAgICA+ID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgdGhpcy5ydWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcnVsZS5jaGVjayhjb250ZXh0KTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHsgLi4ucmVzdWx0LCBydWxlLCBjb250ZXh0IH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBwYXNzZWQ6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6IGBSdWxlICR7cnVsZS5pZH0gZmFpbGVkIHRvIGV4ZWN1dGU6ICR7ZXJyb3J9YCxcbiAgICAgICAgICBzZXZlcml0eTogXCJlcnJvclwiLFxuICAgICAgICAgIHJ1bGUsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2VuZXJhdGVSZXBvcnQocmVzdWx0cyk7XG4gIH1cblxuICB2YWxpZGF0ZU11bHRpcGxlRmlsZXMoY29udGV4dHM6IFZhbGlkYXRpb25Db250ZXh0W10pOiBDb21wbGlhbmNlUmVwb3J0IHtcbiAgICBjb25zdCBhbGxSZXN1bHRzOiBBcnJheTxcbiAgICAgIENvbXBsaWFuY2VSZXN1bHQgJiB7IHJ1bGU6IENvbXBsaWFuY2VSdWxlOyBjb250ZXh0OiBWYWxpZGF0aW9uQ29udGV4dCB9XG4gICAgPiA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb250ZXh0IG9mIGNvbnRleHRzKSB7XG4gICAgICBjb25zdCBmaWxlUmVzdWx0cyA9IHRoaXMudmFsaWRhdGVGaWxlKGNvbnRleHQpO1xuICAgICAgYWxsUmVzdWx0cy5wdXNoKC4uLmZpbGVSZXN1bHRzLnJlc3VsdHMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmdlbmVyYXRlUmVwb3J0KGFsbFJlc3VsdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZVJlcG9ydChcbiAgICByZXN1bHRzOiBBcnJheTxcbiAgICAgIENvbXBsaWFuY2VSZXN1bHQgJiB7IHJ1bGU6IENvbXBsaWFuY2VSdWxlOyBjb250ZXh0OiBWYWxpZGF0aW9uQ29udGV4dCB9XG4gICAgPixcbiAgKTogQ29tcGxpYW5jZVJlcG9ydCB7XG4gICAgY29uc3QgdG90YWxDaGVja3MgPSByZXN1bHRzLmxlbmd0aDtcbiAgICBjb25zdCBwYXNzZWQgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5wYXNzZWQpLmxlbmd0aDtcbiAgICBjb25zdCBmYWlsZWQgPSByZXN1bHRzLmZpbHRlcigocikgPT4gIXIucGFzc2VkKS5sZW5ndGg7XG4gICAgY29uc3Qgd2FybmluZ3MgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5zZXZlcml0eSA9PT0gXCJ3YXJuaW5nXCIpLmxlbmd0aDtcbiAgICBjb25zdCBlcnJvcnMgPSByZXN1bHRzLmZpbHRlcigocikgPT4gci5zZXZlcml0eSA9PT0gXCJlcnJvclwiKS5sZW5ndGg7XG5cbiAgICBjb25zdCBvdmVyYWxsU2NvcmUgPVxuICAgICAgdG90YWxDaGVja3MgPiAwID8gTWF0aC5yb3VuZCgocGFzc2VkIC8gdG90YWxDaGVja3MpICogMTAwKSA6IDEwMDtcblxuICAgIC8vIEdlbmVyYXRlIHN1bW1hcmllc1xuICAgIGNvbnN0IGJ5Q2F0ZWdvcnk6IFJlY29yZDxzdHJpbmcsIHsgcGFzc2VkOiBudW1iZXI7IGZhaWxlZDogbnVtYmVyIH0+ID0ge307XG4gICAgY29uc3QgYnlBRFI6IFJlY29yZDxzdHJpbmcsIHsgcGFzc2VkOiBudW1iZXI7IGZhaWxlZDogbnVtYmVyIH0+ID0ge307XG4gICAgY29uc3QgYnlTZXZlcml0eTogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcbiAgICAgIGVycm9yOiAwLFxuICAgICAgd2FybmluZzogMCxcbiAgICAgIGluZm86IDAsXG4gICAgfTtcblxuICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgIC8vIEJ5IGNhdGVnb3J5XG4gICAgICBpZiAoIWJ5Q2F0ZWdvcnlbcmVzdWx0LnJ1bGUuY2F0ZWdvcnldKSB7XG4gICAgICAgIGJ5Q2F0ZWdvcnlbcmVzdWx0LnJ1bGUuY2F0ZWdvcnldID0geyBwYXNzZWQ6IDAsIGZhaWxlZDogMCB9O1xuICAgICAgfVxuICAgICAgYnlDYXRlZ29yeVtyZXN1bHQucnVsZS5jYXRlZ29yeV1bcmVzdWx0LnBhc3NlZCA/IFwicGFzc2VkXCIgOiBcImZhaWxlZFwiXSsrO1xuXG4gICAgICAvLyBCeSBBRFJcbiAgICAgIGlmICghYnlBRFJbcmVzdWx0LnJ1bGUuYWRyXSkge1xuICAgICAgICBieUFEUltyZXN1bHQucnVsZS5hZHJdID0geyBwYXNzZWQ6IDAsIGZhaWxlZDogMCB9O1xuICAgICAgfVxuICAgICAgYnlBRFJbcmVzdWx0LnJ1bGUuYWRyXVtyZXN1bHQucGFzc2VkID8gXCJwYXNzZWRcIiA6IFwiZmFpbGVkXCJdKys7XG5cbiAgICAgIC8vIEJ5IHNldmVyaXR5XG4gICAgICBieVNldmVyaXR5W3Jlc3VsdC5zZXZlcml0eV0rKztcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSByZWNvbW1lbmRhdGlvbnNcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSB0aGlzLmdlbmVyYXRlUmVjb21tZW5kYXRpb25zKHJlc3VsdHMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgdG90YWxDaGVja3MsXG4gICAgICBwYXNzZWQsXG4gICAgICBmYWlsZWQsXG4gICAgICB3YXJuaW5ncyxcbiAgICAgIGVycm9ycyxcbiAgICAgIG92ZXJhbGxTY29yZSxcbiAgICAgIHJlc3VsdHMsXG4gICAgICBzdW1tYXJ5OiB7IGJ5Q2F0ZWdvcnksIGJ5QURSLCBieVNldmVyaXR5IH0sXG4gICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoXG4gICAgcmVzdWx0czogQXJyYXk8XG4gICAgICBDb21wbGlhbmNlUmVzdWx0ICYgeyBydWxlOiBDb21wbGlhbmNlUnVsZTsgY29udGV4dDogVmFsaWRhdGlvbkNvbnRleHQgfVxuICAgID4sXG4gICk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgZmFpbGVkUnVsZXMgPSByZXN1bHRzLmZpbHRlcigocikgPT4gIXIucGFzc2VkKTtcblxuICAgIGlmIChmYWlsZWRSdWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFwi4pyFIEFsbCBBRFIgY29tcGxpYW5jZSBjaGVja3MgcGFzc2VkIVwiKTtcbiAgICAgIHJldHVybiByZWNvbW1lbmRhdGlvbnM7XG4gICAgfVxuXG4gICAgLy8gUHJpb3JpdHkgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGZhaWx1cmVzXG4gICAgY29uc3Qgc3RydWN0dXJlRmFpbHVyZXMgPSBmYWlsZWRSdWxlcy5maWx0ZXIoXG4gICAgICAocikgPT4gci5ydWxlLmNhdGVnb3J5ID09PSBcInN0cnVjdHVyZVwiLFxuICAgICk7XG4gICAgY29uc3QgYXJjaGl0ZWN0dXJlRmFpbHVyZXMgPSBmYWlsZWRSdWxlcy5maWx0ZXIoXG4gICAgICAocikgPT4gci5ydWxlLmNhdGVnb3J5ID09PSBcImFyY2hpdGVjdHVyZVwiLFxuICAgICk7XG4gICAgY29uc3QgcGVyZm9ybWFuY2VGYWlsdXJlcyA9IGZhaWxlZFJ1bGVzLmZpbHRlcihcbiAgICAgIChyKSA9PiByLnJ1bGUuY2F0ZWdvcnkgPT09IFwicGVyZm9ybWFuY2VcIixcbiAgICApO1xuXG4gICAgaWYgKHN0cnVjdHVyZUZhaWx1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFxuICAgICAgICBcIvCfj5fvuI8gRGlyZWN0b3J5IHN0cnVjdHVyZSBuZWVkcyBhdHRlbnRpb24gLSBlbnN1cmUgY29tcG9uZW50cywgaG9va3MsIGFuZCB1dGlsaXRpZXMgYXJlIGluIGNvcnJlY3QgbG9jYXRpb25zXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChhcmNoaXRlY3R1cmVGYWlsdXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcbiAgICAgICAgXCLwn4+b77iPIEFQSSBhcmNoaXRlY3R1cmUgY29tcGxpYW5jZSBpc3N1ZXMgZGV0ZWN0ZWQgLSByZXZpZXcgQURSLTAwOCByZXF1aXJlbWVudHNcIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHBlcmZvcm1hbmNlRmFpbHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgIFwi4pqhIFBlcmZvcm1hbmNlIG9wdGltaXphdGlvbnMgcmVjb21tZW5kZWQgLSBjb25zaWRlciBtZW1vaXphdGlvbiBhbmQgcHJvcGVyIGhvb2sgZGVwZW5kZW5jaWVzXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFNwZWNpZmljIHJlY29tbWVuZGF0aW9ucyBmb3IgbW9zdCBjb21tb24gZmFpbHVyZXNcbiAgICBjb25zdCBjb21tb25GYWlsdXJlcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgZm9yIChjb25zdCBmYWlsdXJlIG9mIGZhaWxlZFJ1bGVzKSB7XG4gICAgICBjb25zdCBjb3VudCA9IGNvbW1vbkZhaWx1cmVzLmdldChmYWlsdXJlLnJ1bGUuaWQpIHx8IDA7XG4gICAgICBjb21tb25GYWlsdXJlcy5zZXQoZmFpbHVyZS5ydWxlLmlkLCBjb3VudCArIDEpO1xuICAgIH1cblxuICAgIGNvbnN0IHRvcEZhaWx1cmVzID0gQXJyYXkuZnJvbShjb21tb25GYWlsdXJlcy5lbnRyaWVzKCkpXG4gICAgICAuc29ydCgoWywgYV0sIFssIGJdKSA9PiBiIC0gYSlcbiAgICAgIC5zbGljZSgwLCAzKTtcblxuICAgIGZvciAoY29uc3QgW3J1bGVJZCwgY291bnRdIG9mIHRvcEZhaWx1cmVzKSB7XG4gICAgICBjb25zdCBydWxlID0gdGhpcy5ydWxlcy5maW5kKChyKSA9PiByLmlkID09PSBydWxlSWQpO1xuICAgICAgaWYgKHJ1bGUpIHtcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXG4gICAgICAgICAgYPCflKcgJHtydWxlLnRpdGxlfTogJHtjb3VudH0gaW5zdGFuY2UocykgLSAke3J1bGUuZGVzY3JpcHRpb259YCxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVjb21tZW5kYXRpb25zO1xuICB9XG5cbiAgZ2V0UnVsZShydWxlSWQ6IHN0cmluZyk6IENvbXBsaWFuY2VSdWxlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5ydWxlcy5maW5kKChydWxlKSA9PiBydWxlLmlkID09PSBydWxlSWQpO1xuICB9XG5cbiAgZ2V0UnVsZXNCeUFEUihhZHI6IHN0cmluZyk6IENvbXBsaWFuY2VSdWxlW10ge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmZpbHRlcigocnVsZSkgPT4gcnVsZS5hZHIgPT09IGFkcik7XG4gIH1cblxuICBnZXRSdWxlc0J5Q2F0ZWdvcnkoY2F0ZWdvcnk6IHN0cmluZyk6IENvbXBsaWFuY2VSdWxlW10ge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzLmZpbHRlcigocnVsZSkgPT4gcnVsZS5jYXRlZ29yeSA9PT0gY2F0ZWdvcnkpO1xuICB9XG59XG5cbi8vIEV4cG9ydCBkZWZhdWx0IHZhbGlkYXRvciBpbnN0YW5jZVxuZXhwb3J0IGNvbnN0IGNvbXBsaWFuY2VWYWxpZGF0b3IgPSBuZXcgQURSQ29tcGxpYW5jZVZhbGlkYXRvcigpO1xuXG4vLyBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgZWFzeSB2YWxpZGF0aW9uXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVDb21wb25lbnQoXG4gIGZpbGVQYXRoOiBzdHJpbmcsXG4gIGNvbXBvbmVudE5hbWU6IHN0cmluZyxcbiAgZmlsZUNvbnRlbnQ/OiBzdHJpbmcsXG4pOiBDb21wbGlhbmNlUmVwb3J0IHtcbiAgcmV0dXJuIGNvbXBsaWFuY2VWYWxpZGF0b3IudmFsaWRhdGVGaWxlKHtcbiAgICBmaWxlUGF0aCxcbiAgICBjb21wb25lbnROYW1lLFxuICAgIGZpbGVDb250ZW50LFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlSG9vayhcbiAgZmlsZVBhdGg6IHN0cmluZyxcbiAgZmlsZUNvbnRlbnQ/OiBzdHJpbmcsXG4pOiBDb21wbGlhbmNlUmVwb3J0IHtcbiAgcmV0dXJuIGNvbXBsaWFuY2VWYWxpZGF0b3IudmFsaWRhdGVGaWxlKHtcbiAgICBmaWxlUGF0aCxcbiAgICBmaWxlQ29udGVudCxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUFQSVJvdXRlKFxuICBmaWxlUGF0aDogc3RyaW5nLFxuICBmaWxlQ29udGVudD86IHN0cmluZyxcbik6IENvbXBsaWFuY2VSZXBvcnQge1xuICByZXR1cm4gY29tcGxpYW5jZVZhbGlkYXRvci52YWxpZGF0ZUZpbGUoe1xuICAgIGZpbGVQYXRoLFxuICAgIGZpbGVDb250ZW50LFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJBRFJDb21wbGlhbmNlVmFsaWRhdG9yIiwiY29tcGxpYW5jZVZhbGlkYXRvciIsInZhbGlkYXRlQVBJUm91dGUiLCJ2YWxpZGF0ZUNvbXBvbmVudCIsInZhbGlkYXRlSG9vayIsImFkcjAwMlJ1bGVzIiwiaWQiLCJhZHIiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2V2ZXJpdHkiLCJjYXRlZ29yeSIsImNoZWNrIiwiY29udGV4dCIsImZpbGVQYXRoIiwiaW5jbHVkZXMiLCJ2YWxpZFBhdGhzIiwiaXNWYWxpZExvY2F0aW9uIiwic29tZSIsInBhdGgiLCJwYXNzZWQiLCJtZXNzYWdlIiwiam9pbiIsInN1Z2dlc3Rpb25zIiwiZmlsZUNvbnRlbnQiLCJtYXRjaCIsImlzSW5Ib29rc0RpciIsImlzSW5MaWJEaXIiLCJjb21wb25lbnROYW1lIiwidWlDb21wb25lbnROYW1lcyIsIm5hbWUiLCJpc0luVUlEaXIiLCJhZHIwMDhSdWxlcyIsInBhdGhQYXJ0cyIsInNwbGl0IiwiYXBpSW5kZXgiLCJpbmRleE9mIiwibGVuZ3RoIiwiaGFzUmVzb3VyY2UiLCJmb2xsb3dzUGF0dGVybiIsImlzQ2xpZW50RmlsZSIsImlzU2VydmVyRmlsZSIsImRpcmVjdEFQSVBhdHRlcm5zIiwiaGFzRGlyZWN0QVBJQ2FsbHMiLCJwYXR0ZXJuIiwidGVzdCIsInBlcmZvcm1hbmNlUnVsZXMiLCJsaW5lQ291bnQiLCJoYXNNZW1vIiwiaXNMYXJnZUNvbXBvbmVudCIsImhvb2tQYXR0ZXJucyIsIm1pc3NpbmdEZXBQYXR0ZXJucyIsImhhc01pc3NpbmdEZXBzIiwiaGFzRW1wdHlEZXBzIiwiYWxsUnVsZXMiLCJjb25zdHJ1Y3RvciIsImN1c3RvbVJ1bGVzIiwicnVsZXMiLCJ2YWxpZGF0ZUZpbGUiLCJyZXN1bHRzIiwicnVsZSIsInJlc3VsdCIsInB1c2giLCJlcnJvciIsImdlbmVyYXRlUmVwb3J0IiwidmFsaWRhdGVNdWx0aXBsZUZpbGVzIiwiY29udGV4dHMiLCJhbGxSZXN1bHRzIiwiZmlsZVJlc3VsdHMiLCJ0b3RhbENoZWNrcyIsImZpbHRlciIsInIiLCJmYWlsZWQiLCJ3YXJuaW5ncyIsImVycm9ycyIsIm92ZXJhbGxTY29yZSIsIk1hdGgiLCJyb3VuZCIsImJ5Q2F0ZWdvcnkiLCJieUFEUiIsImJ5U2V2ZXJpdHkiLCJ3YXJuaW5nIiwiaW5mbyIsInJlY29tbWVuZGF0aW9ucyIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25zIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3VtbWFyeSIsImZhaWxlZFJ1bGVzIiwic3RydWN0dXJlRmFpbHVyZXMiLCJhcmNoaXRlY3R1cmVGYWlsdXJlcyIsInBlcmZvcm1hbmNlRmFpbHVyZXMiLCJjb21tb25GYWlsdXJlcyIsIk1hcCIsImZhaWx1cmUiLCJjb3VudCIsImdldCIsInNldCIsInRvcEZhaWx1cmVzIiwiQXJyYXkiLCJmcm9tIiwiZW50cmllcyIsInNvcnQiLCJhIiwiYiIsInNsaWNlIiwicnVsZUlkIiwiZmluZCIsImdldFJ1bGUiLCJnZXRSdWxlc0J5QURSIiwiZ2V0UnVsZXNCeUNhdGVnb3J5Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0lBa2RhQSxzQkFBc0I7ZUFBdEJBOztJQW1MQUMsbUJBQW1CO2VBQW5CQTs7SUF5QkdDLGdCQUFnQjtlQUFoQkE7O0lBdEJBQyxpQkFBaUI7ZUFBakJBOztJQVlBQyxZQUFZO2VBQVpBOzs7QUFybEJoQiwrQ0FBK0M7QUFDL0MsTUFBTUMsY0FBZ0M7SUFDcEM7UUFDRUMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsYUFDRTtRQUNGQyxVQUFVO1FBQ1ZDLFVBQVU7UUFDVkMsT0FBTyxDQUFDQztZQUNOLE1BQU0sRUFBRUMsUUFBUSxFQUFFLEdBQUdEO1lBRXJCLElBQUlDLFNBQVNDLFFBQVEsQ0FBQyxXQUFXRCxTQUFTQyxRQUFRLENBQUMsY0FBYztnQkFDL0QsTUFBTUMsYUFBYTtvQkFDakI7b0JBQ0E7b0JBQ0E7b0JBQ0E7aUJBQ0Q7Z0JBRUQsTUFBTUMsa0JBQWtCRCxXQUFXRSxJQUFJLENBQUMsQ0FBQ0MsT0FDdkNMLFNBQVNDLFFBQVEsQ0FBQ0k7Z0JBR3BCLE9BQU87b0JBQ0xDLFFBQVFIO29CQUNSSSxTQUFTSixrQkFDTCxnREFDQSxDQUFDLCtCQUErQixFQUFFRCxXQUFXTSxJQUFJLENBQUMsTUFBTSxDQUFDO29CQUM3RFosVUFBVTtvQkFDVmEsYUFBYU4sa0JBQ1QsRUFBRSxHQUNGO3dCQUNFO3dCQUNBO3FCQUNEO2dCQUNQO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMRyxRQUFRO2dCQUNSQyxTQUFTO2dCQUNUWCxVQUFVO1lBQ1o7UUFDRjtJQUNGO0lBRUE7UUFDRUosSUFBSTtRQUNK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