{"version":3,"sources":["/Users/matthewmoroney/builds/FreeAgentics/web/__tests__/hooks/useDebounce.test.ts"],"sourcesContent":["/**\n * useDebounce Hook Smoke Tests\n * Tests the debounce hook functionality\n */\n\nimport { renderHook, act } from \"@testing-library/react\";\nimport { useDebounce } from \"@/hooks/useDebounce\";\n\n// Mock timers\njest.useFakeTimers();\n\ndescribe(\"useDebounce Hook\", () => {\n  afterEach(() => {\n    jest.clearAllTimers();\n  });\n\n  it(\"returns initial value immediately\", () => {\n    const { result } = renderHook(() => useDebounce(\"initial\", 500));\n    expect(result.current).toBe(\"initial\");\n  });\n\n  it(\"debounces value updates\", () => {\n    const { result, rerender } = renderHook(\n      ({ value, delay }) => useDebounce(value, delay),\n      {\n        initialProps: { value: \"initial\", delay: 500 },\n      },\n    );\n\n    expect(result.current).toBe(\"initial\");\n\n    // Update the value\n    rerender({ value: \"updated\", delay: 500 });\n\n    // Value should still be initial immediately after update\n    expect(result.current).toBe(\"initial\");\n\n    // Fast forward time by 250ms (less than delay)\n    act(() => {\n      jest.advanceTimersByTime(250);\n    });\n\n    // Value should still be initial\n    expect(result.current).toBe(\"initial\");\n\n    // Fast forward time by another 250ms (total 500ms, equal to delay)\n    act(() => {\n      jest.advanceTimersByTime(250);\n    });\n\n    // Now value should be updated\n    expect(result.current).toBe(\"updated\");\n  });\n\n  it(\"resets timer on rapid value changes\", () => {\n    const { result, rerender } = renderHook(\n      ({ value, delay }) => useDebounce(value, delay),\n      {\n        initialProps: { value: \"initial\", delay: 500 },\n      },\n    );\n\n    // Rapid updates\n    rerender({ value: \"update1\", delay: 500 });\n\n    act(() => {\n      jest.advanceTimersByTime(250);\n    });\n\n    rerender({ value: \"update2\", delay: 500 });\n\n    act(() => {\n      jest.advanceTimersByTime(250);\n    });\n\n    // Should still be initial because timer was reset\n    expect(result.current).toBe(\"initial\");\n\n    // Complete the delay\n    act(() => {\n      jest.advanceTimersByTime(250);\n    });\n\n    // Should now be the latest value\n    expect(result.current).toBe(\"update2\");\n  });\n\n  it(\"handles different delay values\", () => {\n    const { result, rerender } = renderHook(\n      ({ value, delay }) => useDebounce(value, delay),\n      {\n        initialProps: { value: \"initial\", delay: 100 },\n      },\n    );\n\n    rerender({ value: \"updated\", delay: 100 });\n\n    act(() => {\n      jest.advanceTimersByTime(100);\n    });\n\n    expect(result.current).toBe(\"updated\");\n  });\n\n  it(\"works with different data types\", () => {\n    // Test with numbers\n    const { result: numberResult, rerender: numberRerender } = renderHook(\n      ({ value, delay }) => useDebounce(value, delay),\n      {\n        initialProps: { value: 0, delay: 500 },\n      },\n    );\n\n    numberRerender({ value: 42, delay: 500 });\n\n    act(() => {\n      jest.advanceTimersByTime(500);\n    });\n\n    expect(numberResult.current).toBe(42);\n\n    // Test with objects\n    const { result: objectResult, rerender: objectRerender } = renderHook(\n      ({ value, delay }) => useDebounce(value, delay),\n      {\n        initialProps: { value: { count: 0 }, delay: 500 },\n      },\n    );\n\n    const newObject = { count: 1 };\n    objectRerender({ value: newObject, delay: 500 });\n\n    act(() => {\n      jest.advanceTimersByTime(500);\n    });\n\n    expect(objectResult.current).toBe(newObject);\n  });\n});\n"],"names":["jest","useFakeTimers","describe","afterEach","clearAllTimers","it","result","renderHook","useDebounce","expect","current","toBe","rerender","value","delay","initialProps","act","advanceTimersByTime","numberResult","numberRerender","objectResult","objectRerender","count","newObject"],"mappings":"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"}