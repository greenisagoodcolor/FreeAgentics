5867646dfd0c432a9b0046a6011edded
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    agentResponseTemplate: function() {
        return agentResponseTemplate;
    },
    assemblePrompt: function() {
        return assemblePrompt;
    },
    beliefExtractionTemplate: function() {
        return beliefExtractionTemplate;
    },
    formatConversationHistory: function() {
        return formatConversationHistory;
    },
    formatKnowledgeForPrompt: function() {
        return formatKnowledgeForPrompt;
    },
    formatParticipantsList: function() {
        return formatParticipantsList;
    },
    relationshipAnalysisTemplate: function() {
        return relationshipAnalysisTemplate;
    }
});
// Helper function to replace template variables
function replaceVariables(text, variables) {
    return Object.entries(variables).reduce((result, [key, value])=>result.replace(new RegExp(`{{${key}}}`, "g"), value), text);
}
function formatConversationHistory(messages, agents, maxMessages = 10) {
    // Take the most recent messages up to maxMessages
    const recentMessages = messages.slice(-maxMessages);
    return recentMessages.map((msg)=>{
        const sender = msg.senderId === "user" ? "User" : agents.get(msg.senderId)?.name || "Unknown Agent";
        return `${sender}: ${msg.content}`;
    }).join("\n\n");
}
function formatKnowledgeForPrompt(entries, includeMetadata = false) {
    if (!entries.length) return "No relevant knowledge available.";
    return entries.map((entry)=>{
        let formatted = `KNOWLEDGE ENTRY: ${entry.title}\n${entry.content}`;
        if (includeMetadata) {
            formatted += `\nTags: ${entry.tags.join(", ")}`;
            formatted += `\nTimestamp: ${entry.timestamp.toISOString()}`;
        }
        return formatted;
    }).join("\n\n");
}
function formatParticipantsList(agents, currentAgentId) {
    return Array.from(agents.values()).map((agent)=>{
        const isCurrentAgent = agent.id === currentAgentId;
        return `- ${agent.name}${isCurrentAgent ? " (you)" : ""}: ${agent.biography.split(".")[0]}.`;
    }).join("\n");
}
function assemblePrompt(template, variables, conversationHistory, agents, relevantKnowledge) {
    // Replace variables in the system prompt
    const systemPrompt = replaceVariables(template.systemPrompt, variables);
    // Format conversation history
    const historyText = formatConversationHistory(conversationHistory, agents, template.maxHistoryMessages);
    // Format knowledge if provided
    const knowledgeText = relevantKnowledge ? formatKnowledgeForPrompt(relevantKnowledge) : "";
    // Assemble user prompt with optional prefix and suffix
    let userPrompt = "";
    if (template.userPromptPrefix) {
        userPrompt += replaceVariables(template.userPromptPrefix, variables) + "\n\n";
    }
    if (knowledgeText) {
        userPrompt += "RELEVANT KNOWLEDGE:\n" + knowledgeText + "\n\n";
    }
    userPrompt += "CONVERSATION HISTORY:\n" + historyText;
    if (template.userPromptSuffix) {
        userPrompt += "\n\n" + replaceVariables(template.userPromptSuffix, variables);
    }
    return {
        systemPrompt,
        userPrompt
    };
}
const agentResponseTemplate = {
    systemPrompt: `You are {{agentName}}, with the following biography: {{agentBiography}}

You are participating in a multi-agent conversation with the following participants:
{{participantsList}}

Your responses should be consistent with your character's knowledge, personality, and background.
You should respond naturally as if you are having a conversation with multiple participants.

IMPORTANT: Always start your response with "{{agentName}}:" followed by your message.

When a message is clearly directed at another agent (e.g., addressed by name), you should:
1. Only respond if you have something valuable to add
2. Acknowledge that the message was primarily for another agent
3. Keep your response brief and relevant

When a message is directed at you specifically, provide a complete and helpful response.
When a message is directed at everyone or no one specific, respond naturally.

You have access to your own knowledge base which will be provided in the prompt if relevant.
Only reference knowledge that is explicitly provided to you.`,
    userPromptSuffix: `Based on the conversation history and your knowledge, provide a response as {{agentName}}.
Your response should be a single message in a conversational tone.
Remember to start your response with "{{agentName}}:" followed by your message.
If the message was clearly directed at another agent and you don't have anything valuable to add, respond with "SKIP_RESPONSE" and I will not include your message.`,
    maxHistoryMessages: 10
};
const beliefExtractionTemplate = {
    systemPrompt: `You are an AI assistant that analyzes conversations and extracts potential new knowledge or beliefs.
Your task is to identify information, facts, or beliefs that should be added to an agent's knowledge base.
Focus on extracting factual information, preferences, opinions, and relationships mentioned in the conversation.

IMPORTANT: Format your response using Obsidian-style markdown. Use [[double brackets]] around important concepts, entities, and categories that should be tagged.`,
    userPromptPrefix: `The following is a conversation involving {{agentName}}.
Extract potential new knowledge or beliefs that {{agentName}} should remember from this conversation.
Pay special attention to: {{extractionPriorities}}`,
    userPromptSuffix: `List the extracted beliefs in bullet points. Each belief should be a concise statement of fact or opinion.
For each belief:
1. Use [[double brackets]] around key concepts that should be tagged
2. Indicate the confidence level (High/Medium/Low) based on how explicitly it was stated
3. Format the belief as a complete, well-structured markdown note

Example format:
- {{agentName}} believes that [[quantum computing]] will revolutionize [[cryptography]] within the next decade. (High)
- {{agentName}} seems to prefer [[coffee]] over [[tea]] based on their ordering habits. (Medium)`,
    maxHistoryMessages: 20
};
const relationshipAnalysisTemplate = {
    systemPrompt: `You are an AI assistant that analyzes conversations to determine the relationship dynamics between participants.
Your task is to assess how {{agentName}} relates to other participants in the conversation.`,
    userPromptPrefix: `The following is a conversation involving {{agentName}} and other participants.
Analyze the conversation to determine {{agentName}}'s relationship with each other participant.`,
    userPromptSuffix: `For each participant that {{agentName}} interacted with, provide:
1. A sentiment score from -5 (very negative) to +5 (very positive)
2. A brief description of the relationship dynamic
3. Key moments in the conversation that support your analysis`,
    maxHistoryMessages: 15
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0aGV3bW9yb25leS9idWlsZHMvRnJlZUFnZW50aWNzL3dlYi9saWIvcHJvbXB0LXRlbXBsYXRlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEFnZW50LCBNZXNzYWdlLCBLbm93bGVkZ2VFbnRyeSB9IGZyb20gXCJAL2xpYi90eXBlc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFByb21wdFRlbXBsYXRlIHtcbiAgc3lzdGVtUHJvbXB0OiBzdHJpbmc7XG4gIHVzZXJQcm9tcHRQcmVmaXg/OiBzdHJpbmc7XG4gIHVzZXJQcm9tcHRTdWZmaXg/OiBzdHJpbmc7XG4gIG1heEhpc3RvcnlNZXNzYWdlcz86IG51bWJlcjtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHJlcGxhY2UgdGVtcGxhdGUgdmFyaWFibGVzXG5mdW5jdGlvbiByZXBsYWNlVmFyaWFibGVzKFxuICB0ZXh0OiBzdHJpbmcsXG4gIHZhcmlhYmxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbik6IHN0cmluZyB7XG4gIHJldHVybiBPYmplY3QuZW50cmllcyh2YXJpYWJsZXMpLnJlZHVjZShcbiAgICAocmVzdWx0LCBba2V5LCB2YWx1ZV0pID0+XG4gICAgICByZXN1bHQucmVwbGFjZShuZXcgUmVnRXhwKGB7eyR7a2V5fX19YCwgXCJnXCIpLCB2YWx1ZSksXG4gICAgdGV4dCxcbiAgKTtcbn1cblxuLy8gRm9ybWF0IGNvbnZlcnNhdGlvbiBoaXN0b3J5IGZvciBpbmNsdXNpb24gaW4gcHJvbXB0c1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdENvbnZlcnNhdGlvbkhpc3RvcnkoXG4gIG1lc3NhZ2VzOiBNZXNzYWdlW10sXG4gIGFnZW50czogTWFwPHN0cmluZywgQWdlbnQ+LFxuICBtYXhNZXNzYWdlcyA9IDEwLFxuKTogc3RyaW5nIHtcbiAgLy8gVGFrZSB0aGUgbW9zdCByZWNlbnQgbWVzc2FnZXMgdXAgdG8gbWF4TWVzc2FnZXNcbiAgY29uc3QgcmVjZW50TWVzc2FnZXMgPSBtZXNzYWdlcy5zbGljZSgtbWF4TWVzc2FnZXMpO1xuXG4gIHJldHVybiByZWNlbnRNZXNzYWdlc1xuICAgIC5tYXAoKG1zZykgPT4ge1xuICAgICAgY29uc3Qgc2VuZGVyID1cbiAgICAgICAgbXNnLnNlbmRlcklkID09PSBcInVzZXJcIlxuICAgICAgICAgID8gXCJVc2VyXCJcbiAgICAgICAgICA6IGFnZW50cy5nZXQobXNnLnNlbmRlcklkKT8ubmFtZSB8fCBcIlVua25vd24gQWdlbnRcIjtcblxuICAgICAgcmV0dXJuIGAke3NlbmRlcn06ICR7bXNnLmNvbnRlbnR9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXFxuXCIpO1xufVxuXG4vLyBGb3JtYXQga25vd2xlZGdlIGVudHJpZXMgZm9yIGluY2x1c2lvbiBpbiBwcm9tcHRzXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0S25vd2xlZGdlRm9yUHJvbXB0KFxuICBlbnRyaWVzOiBLbm93bGVkZ2VFbnRyeVtdLFxuICBpbmNsdWRlTWV0YWRhdGEgPSBmYWxzZSxcbik6IHN0cmluZyB7XG4gIGlmICghZW50cmllcy5sZW5ndGgpIHJldHVybiBcIk5vIHJlbGV2YW50IGtub3dsZWRnZSBhdmFpbGFibGUuXCI7XG5cbiAgcmV0dXJuIGVudHJpZXNcbiAgICAubWFwKChlbnRyeSkgPT4ge1xuICAgICAgbGV0IGZvcm1hdHRlZCA9IGBLTk9XTEVER0UgRU5UUlk6ICR7ZW50cnkudGl0bGV9XFxuJHtlbnRyeS5jb250ZW50fWA7XG5cbiAgICAgIGlmIChpbmNsdWRlTWV0YWRhdGEpIHtcbiAgICAgICAgZm9ybWF0dGVkICs9IGBcXG5UYWdzOiAke2VudHJ5LnRhZ3Muam9pbihcIiwgXCIpfWA7XG4gICAgICAgIGZvcm1hdHRlZCArPSBgXFxuVGltZXN0YW1wOiAke2VudHJ5LnRpbWVzdGFtcC50b0lTT1N0cmluZygpfWA7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblxcblwiKTtcbn1cblxuLy8gQWRkIGEgZnVuY3Rpb24gdG8gZm9ybWF0IHRoZSBwYXJ0aWNpcGFudHMgbGlzdCBmb3IgdGhlIHByb21wdFxuXG4vLyBGb3JtYXQgY29udmVyc2F0aW9uIHBhcnRpY2lwYW50cyBmb3IgaW5jbHVzaW9uIGluIHByb21wdHNcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQYXJ0aWNpcGFudHNMaXN0KFxuICBhZ2VudHM6IE1hcDxzdHJpbmcsIEFnZW50PixcbiAgY3VycmVudEFnZW50SWQ6IHN0cmluZyxcbik6IHN0cmluZyB7XG4gIHJldHVybiBBcnJheS5mcm9tKGFnZW50cy52YWx1ZXMoKSlcbiAgICAubWFwKChhZ2VudCkgPT4ge1xuICAgICAgY29uc3QgaXNDdXJyZW50QWdlbnQgPSBhZ2VudC5pZCA9PT0gY3VycmVudEFnZW50SWQ7XG4gICAgICByZXR1cm4gYC0gJHthZ2VudC5uYW1lfSR7aXNDdXJyZW50QWdlbnQgPyBcIiAoeW91KVwiIDogXCJcIn06ICR7YWdlbnQuYmlvZ3JhcGh5LnNwbGl0KFwiLlwiKVswXX0uYDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXCIpO1xufVxuXG4vLyBBc3NlbWJsZSBhIGNvbXBsZXRlIHByb21wdCBmcm9tIHRlbXBsYXRlIGFuZCB2YXJpYWJsZXNcbmV4cG9ydCBmdW5jdGlvbiBhc3NlbWJsZVByb21wdChcbiAgdGVtcGxhdGU6IFByb21wdFRlbXBsYXRlLFxuICB2YXJpYWJsZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sXG4gIGNvbnZlcnNhdGlvbkhpc3Rvcnk6IE1lc3NhZ2VbXSxcbiAgYWdlbnRzOiBNYXA8c3RyaW5nLCBBZ2VudD4sXG4gIHJlbGV2YW50S25vd2xlZGdlPzogS25vd2xlZGdlRW50cnlbXSxcbik6IHsgc3lzdGVtUHJvbXB0OiBzdHJpbmc7IHVzZXJQcm9tcHQ6IHN0cmluZyB9IHtcbiAgLy8gUmVwbGFjZSB2YXJpYWJsZXMgaW4gdGhlIHN5c3RlbSBwcm9tcHRcbiAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gcmVwbGFjZVZhcmlhYmxlcyh0ZW1wbGF0ZS5zeXN0ZW1Qcm9tcHQsIHZhcmlhYmxlcyk7XG5cbiAgLy8gRm9ybWF0IGNvbnZlcnNhdGlvbiBoaXN0b3J5XG4gIGNvbnN0IGhpc3RvcnlUZXh0ID0gZm9ybWF0Q29udmVyc2F0aW9uSGlzdG9yeShcbiAgICBjb252ZXJzYXRpb25IaXN0b3J5LFxuICAgIGFnZW50cyxcbiAgICB0ZW1wbGF0ZS5tYXhIaXN0b3J5TWVzc2FnZXMsXG4gICk7XG5cbiAgLy8gRm9ybWF0IGtub3dsZWRnZSBpZiBwcm92aWRlZFxuICBjb25zdCBrbm93bGVkZ2VUZXh0ID0gcmVsZXZhbnRLbm93bGVkZ2VcbiAgICA/IGZvcm1hdEtub3dsZWRnZUZvclByb21wdChyZWxldmFudEtub3dsZWRnZSlcbiAgICA6IFwiXCI7XG5cbiAgLy8gQXNzZW1ibGUgdXNlciBwcm9tcHQgd2l0aCBvcHRpb25hbCBwcmVmaXggYW5kIHN1ZmZpeFxuICBsZXQgdXNlclByb21wdCA9IFwiXCI7XG5cbiAgaWYgKHRlbXBsYXRlLnVzZXJQcm9tcHRQcmVmaXgpIHtcbiAgICB1c2VyUHJvbXB0ICs9XG4gICAgICByZXBsYWNlVmFyaWFibGVzKHRlbXBsYXRlLnVzZXJQcm9tcHRQcmVmaXgsIHZhcmlhYmxlcykgKyBcIlxcblxcblwiO1xuICB9XG5cbiAgaWYgKGtub3dsZWRnZVRleHQpIHtcbiAgICB1c2VyUHJvbXB0ICs9IFwiUkVMRVZBTlQgS05PV0xFREdFOlxcblwiICsga25vd2xlZGdlVGV4dCArIFwiXFxuXFxuXCI7XG4gIH1cblxuICB1c2VyUHJvbXB0ICs9IFwiQ09OVkVSU0FUSU9OIEhJU1RPUlk6XFxuXCIgKyBoaXN0b3J5VGV4dDtcblxuICBpZiAodGVtcGxhdGUudXNlclByb21wdFN1ZmZpeCkge1xuICAgIHVzZXJQcm9tcHQgKz1cbiAgICAgIFwiXFxuXFxuXCIgKyByZXBsYWNlVmFyaWFibGVzKHRlbXBsYXRlLnVzZXJQcm9tcHRTdWZmaXgsIHZhcmlhYmxlcyk7XG4gIH1cblxuICByZXR1cm4geyBzeXN0ZW1Qcm9tcHQsIHVzZXJQcm9tcHQgfTtcbn1cblxuLy8gRGVmaW5lIHN0YW5kYXJkIHRlbXBsYXRlcyBmb3IgZGlmZmVyZW50IHB1cnBvc2VzXG5cbi8vIFRlbXBsYXRlIGZvciBhZ2VudCByZXNwb25zZXMgaW4gY29udmVyc2F0aW9uXG5leHBvcnQgY29uc3QgYWdlbnRSZXNwb25zZVRlbXBsYXRlOiBQcm9tcHRUZW1wbGF0ZSA9IHtcbiAgc3lzdGVtUHJvbXB0OiBgWW91IGFyZSB7e2FnZW50TmFtZX19LCB3aXRoIHRoZSBmb2xsb3dpbmcgYmlvZ3JhcGh5OiB7e2FnZW50QmlvZ3JhcGh5fX1cblxuWW91IGFyZSBwYXJ0aWNpcGF0aW5nIGluIGEgbXVsdGktYWdlbnQgY29udmVyc2F0aW9uIHdpdGggdGhlIGZvbGxvd2luZyBwYXJ0aWNpcGFudHM6XG57e3BhcnRpY2lwYW50c0xpc3R9fVxuXG5Zb3VyIHJlc3BvbnNlcyBzaG91bGQgYmUgY29uc2lzdGVudCB3aXRoIHlvdXIgY2hhcmFjdGVyJ3Mga25vd2xlZGdlLCBwZXJzb25hbGl0eSwgYW5kIGJhY2tncm91bmQuXG5Zb3Ugc2hvdWxkIHJlc3BvbmQgbmF0dXJhbGx5IGFzIGlmIHlvdSBhcmUgaGF2aW5nIGEgY29udmVyc2F0aW9uIHdpdGggbXVsdGlwbGUgcGFydGljaXBhbnRzLlxuXG5JTVBPUlRBTlQ6IEFsd2F5cyBzdGFydCB5b3VyIHJlc3BvbnNlIHdpdGggXCJ7e2FnZW50TmFtZX19OlwiIGZvbGxvd2VkIGJ5IHlvdXIgbWVzc2FnZS5cblxuV2hlbiBhIG1lc3NhZ2UgaXMgY2xlYXJseSBkaXJlY3RlZCBhdCBhbm90aGVyIGFnZW50IChlLmcuLCBhZGRyZXNzZWQgYnkgbmFtZSksIHlvdSBzaG91bGQ6XG4xLiBPbmx5IHJlc3BvbmQgaWYgeW91IGhhdmUgc29tZXRoaW5nIHZhbHVhYmxlIHRvIGFkZFxuMi4gQWNrbm93bGVkZ2UgdGhhdCB0aGUgbWVzc2FnZSB3YXMgcHJpbWFyaWx5IGZvciBhbm90aGVyIGFnZW50XG4zLiBLZWVwIHlvdXIgcmVzcG9uc2UgYnJpZWYgYW5kIHJlbGV2YW50XG5cbldoZW4gYSBtZXNzYWdlIGlzIGRpcmVjdGVkIGF0IHlvdSBzcGVjaWZpY2FsbHksIHByb3ZpZGUgYSBjb21wbGV0ZSBhbmQgaGVscGZ1bCByZXNwb25zZS5cbldoZW4gYSBtZXNzYWdlIGlzIGRpcmVjdGVkIGF0IGV2ZXJ5b25lIG9yIG5vIG9uZSBzcGVjaWZpYywgcmVzcG9uZCBuYXR1cmFsbHkuXG5cbllvdSBoYXZlIGFjY2VzcyB0byB5b3VyIG93biBrbm93bGVkZ2UgYmFzZSB3aGljaCB3aWxsIGJlIHByb3ZpZGVkIGluIHRoZSBwcm9tcHQgaWYgcmVsZXZhbnQuXG5Pbmx5IHJlZmVyZW5jZSBrbm93bGVkZ2UgdGhhdCBpcyBleHBsaWNpdGx5IHByb3ZpZGVkIHRvIHlvdS5gLFxuXG4gIHVzZXJQcm9tcHRTdWZmaXg6IGBCYXNlZCBvbiB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnkgYW5kIHlvdXIga25vd2xlZGdlLCBwcm92aWRlIGEgcmVzcG9uc2UgYXMge3thZ2VudE5hbWV9fS5cbllvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgc2luZ2xlIG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb25hbCB0b25lLlxuUmVtZW1iZXIgdG8gc3RhcnQgeW91ciByZXNwb25zZSB3aXRoIFwie3thZ2VudE5hbWV9fTpcIiBmb2xsb3dlZCBieSB5b3VyIG1lc3NhZ2UuXG5JZiB0aGUgbWVzc2FnZSB3YXMgY2xlYXJseSBkaXJlY3RlZCBhdCBhbm90aGVyIGFnZW50IGFuZCB5b3UgZG9uJ3QgaGF2ZSBhbnl0aGluZyB2YWx1YWJsZSB0byBhZGQsIHJlc3BvbmQgd2l0aCBcIlNLSVBfUkVTUE9OU0VcIiBhbmQgSSB3aWxsIG5vdCBpbmNsdWRlIHlvdXIgbWVzc2FnZS5gLFxuXG4gIG1heEhpc3RvcnlNZXNzYWdlczogMTAsXG59O1xuXG4vLyBUZW1wbGF0ZSBmb3IgZXh0cmFjdGluZyBiZWxpZWZzIGZyb20gY29udmVyc2F0aW9uc1xuZXhwb3J0IGNvbnN0IGJlbGllZkV4dHJhY3Rpb25UZW1wbGF0ZTogUHJvbXB0VGVtcGxhdGUgPSB7XG4gIHN5c3RlbVByb21wdDogYFlvdSBhcmUgYW4gQUkgYXNzaXN0YW50IHRoYXQgYW5hbHl6ZXMgY29udmVyc2F0aW9ucyBhbmQgZXh0cmFjdHMgcG90ZW50aWFsIG5ldyBrbm93bGVkZ2Ugb3IgYmVsaWVmcy5cbllvdXIgdGFzayBpcyB0byBpZGVudGlmeSBpbmZvcm1hdGlvbiwgZmFjdHMsIG9yIGJlbGllZnMgdGhhdCBzaG91bGQgYmUgYWRkZWQgdG8gYW4gYWdlbnQncyBrbm93bGVkZ2UgYmFzZS5cbkZvY3VzIG9uIGV4dHJhY3RpbmcgZmFjdHVhbCBpbmZvcm1hdGlvbiwgcHJlZmVyZW5jZXMsIG9waW5pb25zLCBhbmQgcmVsYXRpb25zaGlwcyBtZW50aW9uZWQgaW4gdGhlIGNvbnZlcnNhdGlvbi5cblxuSU1QT1JUQU5UOiBGb3JtYXQgeW91ciByZXNwb25zZSB1c2luZyBPYnNpZGlhbi1zdHlsZSBtYXJrZG93bi4gVXNlIFtbZG91YmxlIGJyYWNrZXRzXV0gYXJvdW5kIGltcG9ydGFudCBjb25jZXB0cywgZW50aXRpZXMsIGFuZCBjYXRlZ29yaWVzIHRoYXQgc2hvdWxkIGJlIHRhZ2dlZC5gLFxuXG4gIHVzZXJQcm9tcHRQcmVmaXg6IGBUaGUgZm9sbG93aW5nIGlzIGEgY29udmVyc2F0aW9uIGludm9sdmluZyB7e2FnZW50TmFtZX19LlxuRXh0cmFjdCBwb3RlbnRpYWwgbmV3IGtub3dsZWRnZSBvciBiZWxpZWZzIHRoYXQge3thZ2VudE5hbWV9fSBzaG91bGQgcmVtZW1iZXIgZnJvbSB0aGlzIGNvbnZlcnNhdGlvbi5cblBheSBzcGVjaWFsIGF0dGVudGlvbiB0bzoge3tleHRyYWN0aW9uUHJpb3JpdGllc319YCxcblxuICB1c2VyUHJvbXB0U3VmZml4OiBgTGlzdCB0aGUgZXh0cmFjdGVkIGJlbGllZnMgaW4gYnVsbGV0IHBvaW50cy4gRWFjaCBiZWxpZWYgc2hvdWxkIGJlIGEgY29uY2lzZSBzdGF0ZW1lbnQgb2YgZmFjdCBvciBvcGluaW9uLlxuRm9yIGVhY2ggYmVsaWVmOlxuMS4gVXNlIFtbZG91YmxlIGJyYWNrZXRzXV0gYXJvdW5kIGtleSBjb25jZXB0cyB0aGF0IHNob3VsZCBiZSB0YWdnZWRcbjIuIEluZGljYXRlIHRoZSBjb25maWRlbmNlIGxldmVsIChIaWdoL01lZGl1bS9Mb3cpIGJhc2VkIG9uIGhvdyBleHBsaWNpdGx5IGl0IHdhcyBzdGF0ZWRcbjMuIEZvcm1hdCB0aGUgYmVsaWVmIGFzIGEgY29tcGxldGUsIHdlbGwtc3RydWN0dXJlZCBtYXJrZG93biBub3RlXG5cbkV4YW1wbGUgZm9ybWF0OlxuLSB7e2FnZW50TmFtZX19IGJlbGlldmVzIHRoYXQgW1txdWFudHVtIGNvbXB1dGluZ11dIHdpbGwgcmV2b2x1dGlvbml6ZSBbW2NyeXB0b2dyYXBoeV1dIHdpdGhpbiB0aGUgbmV4dCBkZWNhZGUuIChIaWdoKVxuLSB7e2FnZW50TmFtZX19IHNlZW1zIHRvIHByZWZlciBbW2NvZmZlZV1dIG92ZXIgW1t0ZWFdXSBiYXNlZCBvbiB0aGVpciBvcmRlcmluZyBoYWJpdHMuIChNZWRpdW0pYCxcblxuICBtYXhIaXN0b3J5TWVzc2FnZXM6IDIwLFxufTtcblxuLy8gVGVtcGxhdGUgZm9yIHJlbGF0aW9uc2hpcCBhbmFseXNpc1xuZXhwb3J0IGNvbnN0IHJlbGF0aW9uc2hpcEFuYWx5c2lzVGVtcGxhdGU6IFByb21wdFRlbXBsYXRlID0ge1xuICBzeXN0ZW1Qcm9tcHQ6IGBZb3UgYXJlIGFuIEFJIGFzc2lzdGFudCB0aGF0IGFuYWx5emVzIGNvbnZlcnNhdGlvbnMgdG8gZGV0ZXJtaW5lIHRoZSByZWxhdGlvbnNoaXAgZHluYW1pY3MgYmV0d2VlbiBwYXJ0aWNpcGFudHMuXG5Zb3VyIHRhc2sgaXMgdG8gYXNzZXNzIGhvdyB7e2FnZW50TmFtZX19IHJlbGF0ZXMgdG8gb3RoZXIgcGFydGljaXBhbnRzIGluIHRoZSBjb252ZXJzYXRpb24uYCxcblxuICB1c2VyUHJvbXB0UHJlZml4OiBgVGhlIGZvbGxvd2luZyBpcyBhIGNvbnZlcnNhdGlvbiBpbnZvbHZpbmcge3thZ2VudE5hbWV9fSBhbmQgb3RoZXIgcGFydGljaXBhbnRzLlxuQW5hbHl6ZSB0aGUgY29udmVyc2F0aW9uIHRvIGRldGVybWluZSB7e2FnZW50TmFtZX19J3MgcmVsYXRpb25zaGlwIHdpdGggZWFjaCBvdGhlciBwYXJ0aWNpcGFudC5gLFxuXG4gIHVzZXJQcm9tcHRTdWZmaXg6IGBGb3IgZWFjaCBwYXJ0aWNpcGFudCB0aGF0IHt7YWdlbnROYW1lfX0gaW50ZXJhY3RlZCB3aXRoLCBwcm92aWRlOlxuMS4gQSBzZW50aW1lbnQgc2NvcmUgZnJvbSAtNSAodmVyeSBuZWdhdGl2ZSkgdG8gKzUgKHZlcnkgcG9zaXRpdmUpXG4yLiBBIGJyaWVmIGRlc2NyaXB0aW9uIG9mIHRoZSByZWxhdGlvbnNoaXAgZHluYW1pY1xuMy4gS2V5IG1vbWVudHMgaW4gdGhlIGNvbnZlcnNhdGlvbiB0aGF0IHN1cHBvcnQgeW91ciBhbmFseXNpc2AsXG5cbiAgbWF4SGlzdG9yeU1lc3NhZ2VzOiAxNSxcbn07XG4iXSwibmFtZXMiOlsiYWdlbnRSZXNwb25zZVRlbXBsYXRlIiwiYXNzZW1ibGVQcm9tcHQiLCJiZWxpZWZFeHRyYWN0aW9uVGVtcGxhdGUiLCJmb3JtYXRDb252ZXJzYXRpb25IaXN0b3J5IiwiZm9ybWF0S25vd2xlZGdlRm9yUHJvbXB0IiwiZm9ybWF0UGFydGljaXBhbnRzTGlzdCIsInJlbGF0aW9uc2hpcEFuYWx5c2lzVGVtcGxhdGUiLCJyZXBsYWNlVmFyaWFibGVzIiwidGV4dCIsInZhcmlhYmxlcyIsIk9iamVjdCIsImVudHJpZXMiLCJyZWR1Y2UiLCJyZXN1bHQiLCJrZXkiLCJ2YWx1ZSIsInJlcGxhY2UiLCJSZWdFeHAiLCJtZXNzYWdlcyIsImFnZW50cyIsIm1heE1lc3NhZ2VzIiwicmVjZW50TWVzc2FnZXMiLCJzbGljZSIsIm1hcCIsIm1zZyIsInNlbmRlciIsInNlbmRlcklkIiwiZ2V0IiwibmFtZSIsImNvbnRlbnQiLCJqb2luIiwiaW5jbHVkZU1ldGFkYXRhIiwibGVuZ3RoIiwiZW50cnkiLCJmb3JtYXR0ZWQiLCJ0aXRsZSIsInRhZ3MiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImN1cnJlbnRBZ2VudElkIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwiYWdlbnQiLCJpc0N1cnJlbnRBZ2VudCIsImlkIiwiYmlvZ3JhcGh5Iiwic3BsaXQiLCJ0ZW1wbGF0ZSIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJyZWxldmFudEtub3dsZWRnZSIsInN5c3RlbVByb21wdCIsImhpc3RvcnlUZXh0IiwibWF4SGlzdG9yeU1lc3NhZ2VzIiwia25vd2xlZGdlVGV4dCIsInVzZXJQcm9tcHQiLCJ1c2VyUHJvbXB0UHJlZml4IiwidXNlclByb21wdFN1ZmZpeCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7SUE4SGFBLHFCQUFxQjtlQUFyQkE7O0lBL0NHQyxjQUFjO2VBQWRBOztJQThFSEMsd0JBQXdCO2VBQXhCQTs7SUF2SUdDLHlCQUF5QjtlQUF6QkE7O0lBcUJBQyx3QkFBd0I7ZUFBeEJBOztJQXVCQUMsc0JBQXNCO2VBQXRCQTs7SUFvSEhDLDRCQUE0QjtlQUE1QkE7OztBQTdLYixnREFBZ0Q7QUFDaEQsU0FBU0MsaUJBQ1BDLElBQVksRUFDWkMsU0FBaUM7SUFFakMsT0FBT0MsT0FBT0MsT0FBTyxDQUFDRixXQUFXRyxNQUFNLENBQ3JDLENBQUNDLFFBQVEsQ0FBQ0MsS0FBS0MsTUFBTSxHQUNuQkYsT0FBT0csT0FBTyxDQUFDLElBQUlDLE9BQU8sQ0FBQyxFQUFFLEVBQUVILElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTUMsUUFDaERQO0FBRUo7QUFHTyxTQUFTTCwwQkFDZGUsUUFBbUIsRUFDbkJDLE1BQTBCLEVBQzFCQyxjQUFjLEVBQUU7SUFFaEIsa0RBQWtEO0lBQ2xELE1BQU1DLGlCQUFpQkgsU0FBU0ksS0FBSyxDQUFDLENBQUNGO0lBRXZDLE9BQU9DLGVBQ0pFLEdBQUcsQ0FBQyxDQUFD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