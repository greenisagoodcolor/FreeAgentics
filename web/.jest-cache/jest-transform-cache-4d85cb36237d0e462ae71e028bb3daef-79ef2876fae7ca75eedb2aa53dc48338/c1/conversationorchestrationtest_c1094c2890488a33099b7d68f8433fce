65e673056bfd840ee32d8e572c7008ef
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _conversationdashboard = require("../../../components/conversation/conversation-dashboard");
const _optimizedconversationdashboard = require("../../../components/conversation/optimized-conversation-dashboard");
const _virtualizedmessagelist = require("../../../components/conversation/virtualized-message-list");
const _messagecomponents = /*#__PURE__*/ _interop_require_wildcard(require("../../../components/conversation/message-components"));
const _conversationsearch = require("../../../components/conversation/conversation-search");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _getRequireWildcardCache(nodeInterop) {
    if (typeof WeakMap !== "function") return null;
    var cacheBabelInterop = new WeakMap();
    var cacheNodeInterop = new WeakMap();
    return (_getRequireWildcardCache = function(nodeInterop) {
        return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
    })(nodeInterop);
}
function _interop_require_wildcard(obj, nodeInterop) {
    if (!nodeInterop && obj && obj.__esModule) {
        return obj;
    }
    if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
        return {
            default: obj
        };
    }
    var cache = _getRequireWildcardCache(nodeInterop);
    if (cache && cache.has(obj)) {
        return cache.get(obj);
    }
    var newObj = {
        __proto__: null
    };
    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
    for(var key in obj){
        if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
            if (desc && (desc.get || desc.set)) {
                Object.defineProperty(newObj, key, desc);
            } else {
                newObj[key] = obj[key];
            }
        }
    }
    newObj.default = obj;
    if (cache) {
        cache.set(obj, newObj);
    }
    return newObj;
}
// Mock conversation data
const mockConversations = [
    {
        id: "conv-1",
        participants: [
            "agent-1",
            "agent-2"
        ],
        messages: [
            {
                id: "msg-1",
                senderId: "agent-1",
                content: "Hello, how are you?",
                timestamp: new Date(Date.now() - 3600000),
                type: "text"
            },
            {
                id: "msg-2",
                senderId: "agent-2",
                content: "I am functioning well, thank you.",
                timestamp: new Date(Date.now() - 3000000),
                type: "text"
            }
        ],
        startTime: new Date(Date.now() - 7200000),
        lastActivityTime: new Date(Date.now() - 3000000),
        status: "active",
        endTime: null,
        metadata: {
            topic: "greeting",
            importance: "low"
        }
    },
    {
        id: "conv-2",
        participants: [
            "agent-1",
            "agent-3",
            "agent-4"
        ],
        messages: [
            {
                id: "msg-3",
                senderId: "agent-1",
                content: "Let us discuss the knowledge graph updates.",
                timestamp: new Date(Date.now() - 1800000),
                type: "text"
            }
        ],
        startTime: new Date(Date.now() - 1800000),
        lastActivityTime: new Date(Date.now() - 1800000),
        status: "active",
        endTime: null,
        metadata: {
            topic: "knowledge-sharing",
            importance: "high"
        }
    }
];
describe("Conversation Orchestration Components", ()=>{
    describe("ConversationDashboard", ()=>{
        it("renders without crashing", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: [],
                agents: [],
                onConversationSelect: ()=>{}
            }));
            expect(_react1.screen.getByRole("region")).toBeInTheDocument();
        });
        it("displays conversation list", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            expect(_react1.screen.getByText(/Hello, how are you/)).toBeInTheDocument();
            expect(_react1.screen.getByText(/discuss the knowledge graph/)).toBeInTheDocument();
        });
        it("filters conversations by status", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            const filterSelect = _react1.screen.getByLabelText(/filter by status/i);
            _react1.fireEvent.change(filterSelect, {
                target: {
                    value: "completed"
                }
            });
            // Active conversations should be hidden
            expect(_react1.screen.queryByText(/Hello, how are you/)).not.toBeInTheDocument();
        });
        it("sorts conversations by time", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            const sortButton = _react1.screen.getByLabelText(/sort by/i);
            _react1.fireEvent.click(sortButton);
            const messages = _react1.screen.getAllByRole("article");
            expect(messages[0]).toHaveTextContent(/knowledge graph/);
        });
        it("handles conversation selection", ()=>{
            const onSelect = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                onConversationSelect: onSelect,
                ...{}
            }));
            const firstConversation = _react1.screen.getByText(/Hello, how are you/).closest("article");
            _react1.fireEvent.click(firstConversation);
            expect(onSelect).toHaveBeenCalledWith("conv-1");
        });
        it("displays participant count", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            expect(_react1.screen.getByText(/2 participants/)).toBeInTheDocument();
            expect(_react1.screen.getByText(/3 participants/)).toBeInTheDocument();
        });
        it("shows real-time updates indicator", async ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            const updatedConversations = [
                ...mockConversations
            ];
            updatedConversations[0].messages.push({
                id: "msg-new",
                senderId: "agent-1",
                content: "New message!",
                timestamp: new Date(),
                type: "text"
            });
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: updatedConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.getByText(/New message!/)).toBeInTheDocument();
            });
        });
    });
    describe("OptimizedConversationDashboard", ()=>{
        it("handles large conversation lists efficiently", ()=>{
            const largeConversationList = Array.from({
                length: 1000
            }, (_, i)=>({
                    id: `conv-${i}`,
                    participants: [
                        "agent-1",
                        "agent-2"
                    ],
                    messages: [
                        {
                            id: `msg-${i}`,
                            senderId: "agent-1",
                            content: `Message ${i}`,
                            timestamp: new Date(Date.now() - i * 1000),
                            type: "text"
                        }
                    ],
                    startTime: new Date(Date.now() - i * 10000),
                    lastActivityTime: new Date(Date.now() - i * 1000),
                    status: "active",
                    endTime: null,
                    metadata: {}
                }));
            const startTime = performance.now();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_optimizedconversationdashboard.OptimizedConversationDashboard, {
                conversations: largeConversationList,
                ...{}
            }));
            const renderTime = performance.now() - startTime;
            // Should render efficiently
            expect(renderTime).toBeLessThan(100);
            // Should use virtualization
            const visibleItems = _react1.screen.getAllByRole("article");
            expect(visibleItems.length).toBeLessThan(50); // Only visible items rendered
        });
        it("implements search functionality", async ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_optimizedconversationdashboard.OptimizedConversationDashboard, {
                conversations: mockConversations,
                ...{}
            }));
            const searchInput = _react1.screen.getByPlaceholderText(/search conversations/i);
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "knowledge"
                }
            });
            await (0, _react1.waitFor)(()=>{
                expect(_react1.screen.queryByText(/Hello, how are you/)).not.toBeInTheDocument();
                expect(_react1.screen.getByText(/knowledge graph/)).toBeInTheDocument();
            });
        });
        it("supports bulk actions", ()=>{
            const onBulkAction = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_optimizedconversationdashboard.OptimizedConversationDashboard, {
                conversations: mockConversations,
                ...{}
            }));
            // Select multiple conversations
            const checkboxes = _react1.screen.getAllByRole("checkbox");
            _react1.fireEvent.click(checkboxes[1]); // First conversation
            _react1.fireEvent.click(checkboxes[2]); // Second conversation
            // Perform bulk action
            const archiveButton = _react1.screen.getByText(/archive selected/i);
            _react1.fireEvent.click(archiveButton);
        // Note: onBulkAction test would go here if the component supported it
        });
        it("exports conversation data", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_optimizedconversationdashboard.OptimizedConversationDashboard, {
                conversations: mockConversations,
                ...{}
            }));
            const exportButton = _react1.screen.getByLabelText(/export conversations/i);
            _react1.fireEvent.click(exportButton);
            const exportFormat = _react1.screen.getByRole("dialog");
            expect(exportFormat).toBeInTheDocument();
            // Select JSON format
            const jsonOption = _react1.screen.getByLabelText(/json/i);
            _react1.fireEvent.click(jsonOption);
            const confirmExport = _react1.screen.getByText(/confirm export/i);
            _react1.fireEvent.click(confirmExport);
        // Verify download initiated (mock implementation would handle actual download)
        });
    });
    describe("VirtualizedMessageList", ()=>{
        const manyMessages = Array.from({
            length: 1000
        }, (_, i)=>({
                id: `msg-${i}`,
                senderId: `agent-${i % 3}`,
                content: `This is message number ${i}`,
                timestamp: new Date(Date.now() - (1000 - i) * 60000),
                type: "text"
            }));
        it("virtualizes long message lists", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_virtualizedmessagelist.VirtualizedMessageList, {
                messages: manyMessages,
                agents: [],
                height: 600
            }));
            // Only renders visible messages
            const visibleMessages = _react1.screen.getAllByRole("listitem");
            expect(visibleMessages.length).toBeLessThan(20);
        });
        it("scrolls to specific messages", ()=>{
            const { container } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_virtualizedmessagelist.VirtualizedMessageList, {
                messages: manyMessages,
                agents: [],
                height: 600
            }));
            const scrollContainer = container.querySelector('[data-testid="virtual-scroll"]');
            expect(scrollContainer?.scrollTop).toBeGreaterThan(0);
        });
        it("handles dynamic item heights", ()=>{
            const getItemHeight = (index)=>{
                // Some messages are taller
                return index % 5 === 0 ? 120 : 80;
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_virtualizedmessagelist.VirtualizedMessageList, {
                messages: manyMessages,
                agents: [],
                height: 600
            }));
            const tallMessages = _react1.screen.getAllByRole("listitem").filter((el)=>el.style.height === "120px");
            expect(tallMessages.length).toBeGreaterThan(0);
        });
        it("supports message actions", ()=>{
            const onMessageAction = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_virtualizedmessagelist.VirtualizedMessageList, {
                messages: manyMessages.slice(0, 10),
                agents: [],
                height: 600
            }));
            const firstMessage = _react1.screen.getAllByRole("listitem")[0];
            const moreButton = (0, _react1.within)(firstMessage).getByLabelText(/more actions/i);
            _react1.fireEvent.click(moreButton);
            const deleteOption = _react1.screen.getByText(/delete/i);
            _react1.fireEvent.click(deleteOption);
            expect(onMessageAction).toHaveBeenCalledWith("delete", "msg-0");
        });
    });
    describe("MessageComponents", ()=>{
        it("renders text messages correctly", ()=>{
            const textMessage = {
                id: "msg-1",
                senderId: "agent-1",
                content: "This is a text message",
                timestamp: new Date(),
                type: "text"
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_messagecomponents.TextMessage, {
                message: textMessage
            }));
            expect(_react1.screen.getByText("This is a text message")).toBeInTheDocument();
            expect(_react1.screen.getByText(/agent-1/)).toBeInTheDocument();
        });
        it("renders code messages with syntax highlighting", ()=>{
            const codeMessage = {
                id: "msg-2",
                senderId: "agent-2",
                content: 'def hello():\n    print("Hello, world!")',
                timestamp: new Date(),
                type: "code",
                metadata: {
                    language: "python"
                }
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_messagecomponents.CodeMessage, {
                message: codeMessage
            }));
            expect(_react1.screen.getByText(/def hello/)).toBeInTheDocument();
            expect(_react1.screen.getByRole("code")).toBeInTheDocument();
            expect(_react1.screen.getByText(/python/i)).toBeInTheDocument();
        });
        it("renders system messages distinctly", ()=>{
            const systemMessage = {
                id: "msg-3",
                senderId: "system",
                content: "Agent-1 has joined the conversation",
                timestamp: new Date(),
                type: "system"
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_messagecomponents.SystemMessage, {
                message: systemMessage
            }));
            expect(_react1.screen.getByText(/joined the conversation/)).toBeInTheDocument();
            const message = _react1.screen.getByText(/joined the conversation/);
            expect(message).toHaveClass("system-message");
        });
        it("shows message timestamps", ()=>{
            const message = {
                id: "msg-4",
                senderId: "agent-1",
                content: "Test message",
                timestamp: new Date("2024-01-01T12:00:00"),
                type: "text"
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_messagecomponents.TextMessage, {
                message: message
            }));
            expect(_react1.screen.getByText("Test message")).toBeInTheDocument();
            expect(_react1.screen.getByText(/12:00/)).toBeInTheDocument();
        });
        it("handles message reactions", ()=>{
            const onReaction = jest.fn();
            const message = {
                id: "msg-5",
                senderId: "agent-1",
                content: "Great idea!",
                timestamp: new Date(),
                type: "text",
                reactions: {
                    "\uD83D\uDC4D": 2,
                    "❤️": 1
                }
            };
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_messagecomponents.TextMessage, {
                message: message,
                onReaction: onReaction
            }));
            expect(_react1.screen.getByText("Great idea!")).toBeInTheDocument();
            const thumbsUp = _react1.screen.getByText("\uD83D\uDC4D");
            _react1.fireEvent.click(thumbsUp);
            expect(onReaction).toHaveBeenCalledWith("msg-5", "\uD83D\uDC4D");
        });
    });
    describe("ConversationSearch", ()=>{
        it("searches through conversation content", async ()=>{
            const onSearch = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationsearch.ConversationSearch, {
                conversations: mockConversations,
                onSearch: onSearch,
                ...{}
            }));
            const searchInput = _react1.screen.getByPlaceholderText(/search messages/i);
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "knowledge graph"
                }
            });
            await (0, _react1.waitFor)(()=>{
                expect(onSearch).toHaveBeenCalledWith(expect.arrayContaining([
                    expect.objectContaining({
                        id: "conv-2"
                    })
                ]));
            });
        });
        it("supports advanced search filters", ()=>{
            const onSearch = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationsearch.ConversationSearch, {
                conversations: mockConversations,
                onSearch: onSearch,
                enableAdvancedSearch: true,
                ...{}
            }));
            const advancedButton = _react1.screen.getByText(/advanced search/i);
            _react1.fireEvent.click(advancedButton);
            // Set participant filter
            const participantInput = _react1.screen.getByLabelText(/participant/i);
            _react1.fireEvent.change(participantInput, {
                target: {
                    value: "agent-3"
                }
            });
            // Set date range
            const fromDate = _react1.screen.getByLabelText(/from date/i);
            _react1.fireEvent.change(fromDate, {
                target: {
                    value: "2024-01-01"
                }
            });
            const searchButton = _react1.screen.getByText(/search/i);
            _react1.fireEvent.click(searchButton);
            expect(onSearch).toHaveBeenCalledWith(expect.arrayContaining([
                expect.objectContaining({
                    participants: expect.arrayContaining([
                        "agent-3"
                    ])
                })
            ]));
        });
        it("highlights search results", ()=>{
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationsearch.ConversationSearch, {
                conversations: mockConversations,
                highlightResults: true,
                ...{}
            }));
            const searchInput = _react1.screen.getByPlaceholderText(/search messages/i);
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "Hello"
                }
            });
            const highlighted = _react1.screen.getByText("Hello");
            expect(highlighted).toBeInTheDocument();
            expect(highlighted).toHaveTextContent("Hello");
        });
    });
    describe("Conversation Performance", ()=>{
        it("handles rapid message updates efficiently", async ()=>{
            const { rerender } = (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                conversations: mockConversations,
                agents: [],
                onConversationSelect: ()=>{}
            }));
            const updates = [];
            const startTime = performance.now();
            // Simulate 100 rapid updates
            for(let i = 0; i < 100; i++){
                const updatedConvs = [
                    ...mockConversations
                ];
                updatedConvs[0].messages.push({
                    id: `rapid-${i}`,
                    senderId: "agent-1",
                    content: `Rapid message ${i}`,
                    timestamp: new Date(),
                    type: "text"
                });
                rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationdashboard.ConversationDashboard, {
                    conversations: updatedConvs,
                    agents: [],
                    onConversationSelect: ()=>{}
                }));
            }
            const totalTime = performance.now() - startTime;
            // Should handle updates efficiently
            expect(totalTime).toBeLessThan(1000); // Less than 1 second for 100 updates
        });
        it("debounces search input", async ()=>{
            const onSearch = jest.fn();
            (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_conversationsearch.ConversationSearch, {
                conversations: mockConversations,
                onSearch: onSearch,
                debounceMs: 300,
                ...{}
            }));
            const searchInput = _react1.screen.getByPlaceholderText(/search/i);
            // Type rapidly
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "h"
                }
            });
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "he"
                }
            });
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "hel"
                }
            });
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "hell"
                }
            });
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "hello"
                }
            });
            // Should not call immediately
            expect(onSearch).not.toHaveBeenCalled();
            // Wait for debounce
            await (0, _react1.waitFor)(()=>{
                expect(onSearch).toHaveBeenCalledTimes(1);
                expect(onSearch).toHaveBeenCalledWith(expect.any(Array));
            }, {
                timeout: 400
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0aGV3bW9yb25leS9idWlsZHMvRnJlZUFnZW50aWNzL3dlYi9fX3Rlc3RzX18vY29tcG9uZW50cy9jb252ZXJzYXRpb24vY29udmVyc2F0aW9uLW9yY2hlc3RyYXRpb24udGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgcmVuZGVyLFxuICBzY3JlZW4sXG4gIGZpcmVFdmVudCxcbiAgd2FpdEZvcixcbiAgd2l0aGluLFxufSBmcm9tIFwiQHRlc3RpbmctbGlicmFyeS9yZWFjdFwiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uRGFzaGJvYXJkIH0gZnJvbSBcIkAvY29tcG9uZW50cy9jb252ZXJzYXRpb24vY29udmVyc2F0aW9uLWRhc2hib2FyZFwiO1xuaW1wb3J0IHsgT3B0aW1pemVkQ29udmVyc2F0aW9uRGFzaGJvYXJkIH0gZnJvbSBcIkAvY29tcG9uZW50cy9jb252ZXJzYXRpb24vb3B0aW1pemVkLWNvbnZlcnNhdGlvbi1kYXNoYm9hcmRcIjtcbmltcG9ydCB7IFZpcnR1YWxpemVkTWVzc2FnZUxpc3QgfSBmcm9tIFwiQC9jb21wb25lbnRzL2NvbnZlcnNhdGlvbi92aXJ0dWFsaXplZC1tZXNzYWdlLWxpc3RcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VDb21wb25lbnRzIGZyb20gXCJAL2NvbXBvbmVudHMvY29udmVyc2F0aW9uL21lc3NhZ2UtY29tcG9uZW50c1wiO1xuaW1wb3J0IHsgQ29udmVyc2F0aW9uU2VhcmNoIH0gZnJvbSBcIkAvY29tcG9uZW50cy9jb252ZXJzYXRpb24vY29udmVyc2F0aW9uLXNlYXJjaFwiO1xuXG4vLyBNb2NrIGNvbnZlcnNhdGlvbiBkYXRhXG5jb25zdCBtb2NrQ29udmVyc2F0aW9ucyA9IFtcbiAge1xuICAgIGlkOiBcImNvbnYtMVwiLFxuICAgIHBhcnRpY2lwYW50czogW1wiYWdlbnQtMVwiLCBcImFnZW50LTJcIl0sXG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwibXNnLTFcIixcbiAgICAgICAgc2VuZGVySWQ6IFwiYWdlbnQtMVwiLFxuICAgICAgICBjb250ZW50OiBcIkhlbGxvLCBob3cgYXJlIHlvdT9cIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMzYwMDAwMCksXG4gICAgICAgIHR5cGU6IFwidGV4dFwiIGFzIGNvbnN0LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwibXNnLTJcIixcbiAgICAgICAgc2VuZGVySWQ6IFwiYWdlbnQtMlwiLFxuICAgICAgICBjb250ZW50OiBcIkkgYW0gZnVuY3Rpb25pbmcgd2VsbCwgdGhhbmsgeW91LlwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAzMDAwMDAwKSxcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIgYXMgY29uc3QsXG4gICAgICB9LFxuICAgIF0sXG4gICAgc3RhcnRUaW1lOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNzIwMDAwMCksXG4gICAgbGFzdEFjdGl2aXR5VGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDMwMDAwMDApLFxuICAgIHN0YXR1czogXCJhY3RpdmVcIiBhcyBjb25zdCxcbiAgICBlbmRUaW1lOiBudWxsLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0b3BpYzogXCJncmVldGluZ1wiLFxuICAgICAgaW1wb3J0YW5jZTogXCJsb3dcIixcbiAgICB9LFxuICB9LFxuICB7XG4gICAgaWQ6IFwiY29udi0yXCIsXG4gICAgcGFydGljaXBhbnRzOiBbXCJhZ2VudC0xXCIsIFwiYWdlbnQtM1wiLCBcImFnZW50LTRcIl0sXG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwibXNnLTNcIixcbiAgICAgICAgc2VuZGVySWQ6IFwiYWdlbnQtMVwiLFxuICAgICAgICBjb250ZW50OiBcIkxldCB1cyBkaXNjdXNzIHRoZSBrbm93bGVkZ2UgZ3JhcGggdXBkYXRlcy5cIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gMTgwMDAwMCksXG4gICAgICAgIHR5cGU6IFwidGV4dFwiIGFzIGNvbnN0LFxuICAgICAgfSxcbiAgICBdLFxuICAgIHN0YXJ0VGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIDE4MDAwMDApLFxuICAgIGxhc3RBY3Rpdml0eVRpbWU6IG5ldyBEYXRlKERhdGUubm93KCkgLSAxODAwMDAwKSxcbiAgICBzdGF0dXM6IFwiYWN0aXZlXCIgYXMgY29uc3QsXG4gICAgZW5kVGltZTogbnVsbCxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG9waWM6IFwia25vd2xlZGdlLXNoYXJpbmdcIixcbiAgICAgIGltcG9ydGFuY2U6IFwiaGlnaFwiLFxuICAgIH0sXG4gIH0sXG5dO1xuXG5kZXNjcmliZShcIkNvbnZlcnNhdGlvbiBPcmNoZXN0cmF0aW9uIENvbXBvbmVudHNcIiwgKCkgPT4ge1xuICBkZXNjcmliZShcIkNvbnZlcnNhdGlvbkRhc2hib2FyZFwiLCAoKSA9PiB7XG4gICAgaXQoXCJyZW5kZXJzIHdpdGhvdXQgY3Jhc2hpbmdcIiwgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q29udmVyc2F0aW9uRGFzaGJvYXJkXG4gICAgICAgICAgY29udmVyc2F0aW9ucz17W119XG4gICAgICAgICAgYWdlbnRzPXtbXX1cbiAgICAgICAgICBvbkNvbnZlcnNhdGlvblNlbGVjdD17KCkgPT4ge319XG4gICAgICAgIC8+LFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlSb2xlKFwicmVnaW9uXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJkaXNwbGF5cyBjb252ZXJzYXRpb24gbGlzdFwiLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDb252ZXJzYXRpb25EYXNoYm9hcmRcbiAgICAgICAgICBjb252ZXJzYXRpb25zPXttb2NrQ29udmVyc2F0aW9uc31cbiAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgIG9uQ29udmVyc2F0aW9uU2VsZWN0PXsoKSA9PiB7fX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvSGVsbG8sIGhvdyBhcmUgeW91LykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRleHQoL2Rpc2N1c3MgdGhlIGtub3dsZWRnZSBncmFwaC8pLFxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJmaWx0ZXJzIGNvbnZlcnNhdGlvbnMgYnkgc3RhdHVzXCIsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENvbnZlcnNhdGlvbkRhc2hib2FyZFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIGFnZW50cz17W119XG4gICAgICAgICAgb25Db252ZXJzYXRpb25TZWxlY3Q9eygpID0+IHt9fVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGZpbHRlclNlbGVjdCA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dCgvZmlsdGVyIGJ5IHN0YXR1cy9pKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoZmlsdGVyU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJjb21wbGV0ZWRcIiB9IH0pO1xuXG4gICAgICAvLyBBY3RpdmUgY29udmVyc2F0aW9ucyBzaG91bGQgYmUgaGlkZGVuXG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KC9IZWxsbywgaG93IGFyZSB5b3UvKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNvcnRzIGNvbnZlcnNhdGlvbnMgYnkgdGltZVwiLCAoKSA9PiB7XG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDb252ZXJzYXRpb25EYXNoYm9hcmRcbiAgICAgICAgICBjb252ZXJzYXRpb25zPXttb2NrQ29udmVyc2F0aW9uc31cbiAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgIG9uQ29udmVyc2F0aW9uU2VsZWN0PXsoKSA9PiB7fX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzb3J0QnV0dG9uID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9zb3J0IGJ5L2kpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNvcnRCdXR0b24pO1xuXG4gICAgICBjb25zdCBtZXNzYWdlcyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoXCJhcnRpY2xlXCIpO1xuICAgICAgZXhwZWN0KG1lc3NhZ2VzWzBdKS50b0hhdmVUZXh0Q29udGVudCgva25vd2xlZGdlIGdyYXBoLyk7XG4gICAgfSk7XG5cbiAgICBpdChcImhhbmRsZXMgY29udmVyc2F0aW9uIHNlbGVjdGlvblwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBvblNlbGVjdCA9IGplc3QuZm4oKTtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENvbnZlcnNhdGlvbkRhc2hib2FyZFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIG9uQ29udmVyc2F0aW9uU2VsZWN0PXtvblNlbGVjdH1cbiAgICAgICAgICB7Li4uKHt9IGFzIGFueSl9XG4gICAgICAgIC8+LFxuICAgICAgKTtcblxuICAgICAgY29uc3QgZmlyc3RDb252ZXJzYXRpb24gPSBzY3JlZW5cbiAgICAgICAgLmdldEJ5VGV4dCgvSGVsbG8sIGhvdyBhcmUgeW91LylcbiAgICAgICAgLmNsb3Nlc3QoXCJhcnRpY2xlXCIpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGZpcnN0Q29udmVyc2F0aW9uISk7XG5cbiAgICAgIGV4cGVjdChvblNlbGVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJjb252LTFcIik7XG4gICAgfSk7XG5cbiAgICBpdChcImRpc3BsYXlzIHBhcnRpY2lwYW50IGNvdW50XCIsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENvbnZlcnNhdGlvbkRhc2hib2FyZFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIGFnZW50cz17W119XG4gICAgICAgICAgb25Db252ZXJzYXRpb25TZWxlY3Q9eygpID0+IHt9fVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC8yIHBhcnRpY2lwYW50cy8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoLzMgcGFydGljaXBhbnRzLykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3dzIHJlYWwtdGltZSB1cGRhdGVzIGluZGljYXRvclwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBjb25zdCB7IHJlcmVuZGVyIH0gPSByZW5kZXIoXG4gICAgICAgIDxDb252ZXJzYXRpb25EYXNoYm9hcmRcbiAgICAgICAgICBjb252ZXJzYXRpb25zPXttb2NrQ29udmVyc2F0aW9uc31cbiAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgIG9uQ29udmVyc2F0aW9uU2VsZWN0PXsoKSA9PiB7fX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBjb25zdCB1cGRhdGVkQ29udmVyc2F0aW9ucyA9IFsuLi5tb2NrQ29udmVyc2F0aW9uc107XG4gICAgICB1cGRhdGVkQ29udmVyc2F0aW9uc1swXS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgaWQ6IFwibXNnLW5ld1wiLFxuICAgICAgICBzZW5kZXJJZDogXCJhZ2VudC0xXCIsXG4gICAgICAgIGNvbnRlbnQ6IFwiTmV3IG1lc3NhZ2UhXCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICB9KTtcblxuICAgICAgcmVyZW5kZXIoXG4gICAgICAgIDxDb252ZXJzYXRpb25EYXNoYm9hcmRcbiAgICAgICAgICBjb252ZXJzYXRpb25zPXt1cGRhdGVkQ29udmVyc2F0aW9uc31cbiAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgIG9uQ29udmVyc2F0aW9uU2VsZWN0PXsoKSA9PiB7fX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL05ldyBtZXNzYWdlIS8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiT3B0aW1pemVkQ29udmVyc2F0aW9uRGFzaGJvYXJkXCIsICgpID0+IHtcbiAgICBpdChcImhhbmRsZXMgbGFyZ2UgY29udmVyc2F0aW9uIGxpc3RzIGVmZmljaWVudGx5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlQ29udmVyc2F0aW9uTGlzdCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMDAgfSwgKF8sIGkpID0+ICh7XG4gICAgICAgIGlkOiBgY29udi0ke2l9YCxcbiAgICAgICAgcGFydGljaXBhbnRzOiBbXCJhZ2VudC0xXCIsIFwiYWdlbnQtMlwiXSxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogYG1zZy0ke2l9YCxcbiAgICAgICAgICAgIHNlbmRlcklkOiBcImFnZW50LTFcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IGBNZXNzYWdlICR7aX1gLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gaSAqIDEwMDApLFxuICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIgYXMgY29uc3QsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgc3RhcnRUaW1lOiBuZXcgRGF0ZShEYXRlLm5vdygpIC0gaSAqIDEwMDAwKSxcbiAgICAgICAgbGFzdEFjdGl2aXR5VGltZTogbmV3IERhdGUoRGF0ZS5ub3coKSAtIGkgKiAxMDAwKSxcbiAgICAgICAgc3RhdHVzOiBcImFjdGl2ZVwiIGFzIGNvbnN0LFxuICAgICAgICBlbmRUaW1lOiBudWxsLFxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8T3B0aW1pemVkQ29udmVyc2F0aW9uRGFzaGJvYXJkXG4gICAgICAgICAgY29udmVyc2F0aW9ucz17bGFyZ2VDb252ZXJzYXRpb25MaXN0fVxuICAgICAgICAgIHsuLi4oe30gYXMgYW55KX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuICAgICAgY29uc3QgcmVuZGVyVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnRUaW1lO1xuXG4gICAgICAvLyBTaG91bGQgcmVuZGVyIGVmZmljaWVudGx5XG4gICAgICBleHBlY3QocmVuZGVyVGltZSkudG9CZUxlc3NUaGFuKDEwMCk7XG5cbiAgICAgIC8vIFNob3VsZCB1c2UgdmlydHVhbGl6YXRpb25cbiAgICAgIGNvbnN0IHZpc2libGVJdGVtcyA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoXCJhcnRpY2xlXCIpO1xuICAgICAgZXhwZWN0KHZpc2libGVJdGVtcy5sZW5ndGgpLnRvQmVMZXNzVGhhbig1MCk7IC8vIE9ubHkgdmlzaWJsZSBpdGVtcyByZW5kZXJlZFxuICAgIH0pO1xuXG4gICAgaXQoXCJpbXBsZW1lbnRzIHNlYXJjaCBmdW5jdGlvbmFsaXR5XCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPE9wdGltaXplZENvbnZlcnNhdGlvbkRhc2hib2FyZFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIHsuLi4oe30gYXMgYW55KX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHNjcmVlbi5nZXRCeVBsYWNlaG9sZGVyVGV4dCgvc2VhcmNoIGNvbnZlcnNhdGlvbnMvaSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNlYXJjaElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJrbm93bGVkZ2VcIiB9IH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KFxuICAgICAgICAgIHNjcmVlbi5xdWVyeUJ5VGV4dCgvSGVsbG8sIGhvdyBhcmUgeW91LyksXG4gICAgICAgICkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9rbm93bGVkZ2UgZ3JhcGgvKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoXCJzdXBwb3J0cyBidWxrIGFjdGlvbnNcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgb25CdWxrQWN0aW9uID0gamVzdC5mbigpO1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8T3B0aW1pemVkQ29udmVyc2F0aW9uRGFzaGJvYXJkXG4gICAgICAgICAgY29udmVyc2F0aW9ucz17bW9ja0NvbnZlcnNhdGlvbnN9XG4gICAgICAgICAgey4uLih7fSBhcyBhbnkpfVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIC8vIFNlbGVjdCBtdWx0aXBsZSBjb252ZXJzYXRpb25zXG4gICAgICBjb25zdCBjaGVja2JveGVzID0gc2NyZWVuLmdldEFsbEJ5Um9sZShcImNoZWNrYm94XCIpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNoZWNrYm94ZXNbMV0pOyAvLyBGaXJzdCBjb252ZXJzYXRpb25cbiAgICAgIGZpcmVFdmVudC5jbGljayhjaGVja2JveGVzWzJdKTsgLy8gU2Vjb25kIGNvbnZlcnNhdGlvblxuXG4gICAgICAvLyBQZXJmb3JtIGJ1bGsgYWN0aW9uXG4gICAgICBjb25zdCBhcmNoaXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvYXJjaGl2ZSBzZWxlY3RlZC9pKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhcmNoaXZlQnV0dG9uKTtcblxuICAgICAgLy8gTm90ZTogb25CdWxrQWN0aW9uIHRlc3Qgd291bGQgZ28gaGVyZSBpZiB0aGUgY29tcG9uZW50IHN1cHBvcnRlZCBpdFxuICAgIH0pO1xuXG4gICAgaXQoXCJleHBvcnRzIGNvbnZlcnNhdGlvbiBkYXRhXCIsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPE9wdGltaXplZENvbnZlcnNhdGlvbkRhc2hib2FyZFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIHsuLi4oe30gYXMgYW55KX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBjb25zdCBleHBvcnRCdXR0b24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2V4cG9ydCBjb252ZXJzYXRpb25zL2kpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGV4cG9ydEJ1dHRvbik7XG5cbiAgICAgIGNvbnN0IGV4cG9ydEZvcm1hdCA9IHNjcmVlbi5nZXRCeVJvbGUoXCJkaWFsb2dcIik7XG4gICAgICBleHBlY3QoZXhwb3J0Rm9ybWF0KS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBTZWxlY3QgSlNPTiBmb3JtYXRcbiAgICAgIGNvbnN0IGpzb25PcHRpb24gPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL2pzb24vaSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soanNvbk9wdGlvbik7XG5cbiAgICAgIGNvbnN0IGNvbmZpcm1FeHBvcnQgPSBzY3JlZW4uZ2V0QnlUZXh0KC9jb25maXJtIGV4cG9ydC9pKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjb25maXJtRXhwb3J0KTtcblxuICAgICAgLy8gVmVyaWZ5IGRvd25sb2FkIGluaXRpYXRlZCAobW9jayBpbXBsZW1lbnRhdGlvbiB3b3VsZCBoYW5kbGUgYWN0dWFsIGRvd25sb2FkKVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlZpcnR1YWxpemVkTWVzc2FnZUxpc3RcIiwgKCkgPT4ge1xuICAgIGNvbnN0IG1hbnlNZXNzYWdlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMDAgfSwgKF8sIGkpID0+ICh7XG4gICAgICBpZDogYG1zZy0ke2l9YCxcbiAgICAgIHNlbmRlcklkOiBgYWdlbnQtJHtpICUgM31gLFxuICAgICAgY29udGVudDogYFRoaXMgaXMgbWVzc2FnZSBudW1iZXIgJHtpfWAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKERhdGUubm93KCkgLSAoMTAwMCAtIGkpICogNjAwMDApLFxuICAgICAgdHlwZTogXCJ0ZXh0XCIgYXMgY29uc3QsXG4gICAgfSkpO1xuXG4gICAgaXQoXCJ2aXJ0dWFsaXplcyBsb25nIG1lc3NhZ2UgbGlzdHNcIiwgKCkgPT4ge1xuICAgICAgcmVuZGVyKFxuICAgICAgICA8VmlydHVhbGl6ZWRNZXNzYWdlTGlzdFxuICAgICAgICAgIG1lc3NhZ2VzPXttYW55TWVzc2FnZXN9XG4gICAgICAgICAgYWdlbnRzPXtbXX1cbiAgICAgICAgICBoZWlnaHQ9ezYwMH1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICAvLyBPbmx5IHJlbmRlcnMgdmlzaWJsZSBtZXNzYWdlc1xuICAgICAgY29uc3QgdmlzaWJsZU1lc3NhZ2VzID0gc2NyZWVuLmdldEFsbEJ5Um9sZShcImxpc3RpdGVtXCIpO1xuICAgICAgZXhwZWN0KHZpc2libGVNZXNzYWdlcy5sZW5ndGgpLnRvQmVMZXNzVGhhbigyMCk7XG4gICAgfSk7XG5cbiAgICBpdChcInNjcm9sbHMgdG8gc3BlY2lmaWMgbWVzc2FnZXNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgeyBjb250YWluZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPFZpcnR1YWxpemVkTWVzc2FnZUxpc3RcbiAgICAgICAgICBtZXNzYWdlcz17bWFueU1lc3NhZ2VzfVxuICAgICAgICAgIGFnZW50cz17W119XG4gICAgICAgICAgaGVpZ2h0PXs2MDB9XG4gICAgICAgIC8+LFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICdbZGF0YS10ZXN0aWQ9XCJ2aXJ0dWFsLXNjcm9sbFwiXScsXG4gICAgICApO1xuICAgICAgZXhwZWN0KHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdChcImhhbmRsZXMgZHluYW1pYyBpdGVtIGhlaWdodHNcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgZ2V0SXRlbUhlaWdodCA9IChpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIC8vIFNvbWUgbWVzc2FnZXMgYXJlIHRhbGxlclxuICAgICAgICByZXR1cm4gaW5kZXggJSA1ID09PSAwID8gMTIwIDogODA7XG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxWaXJ0dWFsaXplZE1lc3NhZ2VMaXN0XG4gICAgICAgICAgbWVzc2FnZXM9e21hbnlNZXNzYWdlc31cbiAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgIGhlaWdodD17NjAwfVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRhbGxNZXNzYWdlcyA9IHNjcmVlblxuICAgICAgICAuZ2V0QWxsQnlSb2xlKFwibGlzdGl0ZW1cIilcbiAgICAgICAgLmZpbHRlcigoZWwpID0+IGVsLnN0eWxlLmhlaWdodCA9PT0gXCIxMjBweFwiKTtcbiAgICAgIGV4cGVjdCh0YWxsTWVzc2FnZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICBpdChcInN1cHBvcnRzIG1lc3NhZ2UgYWN0aW9uc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBvbk1lc3NhZ2VBY3Rpb24gPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPFZpcnR1YWxpemVkTWVzc2FnZUxpc3RcbiAgICAgICAgICBtZXNzYWdlcz17bWFueU1lc3NhZ2VzLnNsaWNlKDAsIDEwKX1cbiAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgIGhlaWdodD17NjAwfVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGZpcnN0TWVzc2FnZSA9IHNjcmVlbi5nZXRBbGxCeVJvbGUoXCJsaXN0aXRlbVwiKVswXTtcbiAgICAgIGNvbnN0IG1vcmVCdXR0b24gPSB3aXRoaW4oZmlyc3RNZXNzYWdlKS5nZXRCeUxhYmVsVGV4dCgvbW9yZSBhY3Rpb25zL2kpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKG1vcmVCdXR0b24pO1xuXG4gICAgICBjb25zdCBkZWxldGVPcHRpb24gPSBzY3JlZW4uZ2V0QnlUZXh0KC9kZWxldGUvaSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soZGVsZXRlT3B0aW9uKTtcblxuICAgICAgZXhwZWN0KG9uTWVzc2FnZUFjdGlvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJkZWxldGVcIiwgXCJtc2ctMFwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJNZXNzYWdlQ29tcG9uZW50c1wiLCAoKSA9PiB7XG4gICAgaXQoXCJyZW5kZXJzIHRleHQgbWVzc2FnZXMgY29ycmVjdGx5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHRleHRNZXNzYWdlID0ge1xuICAgICAgICBpZDogXCJtc2ctMVwiLFxuICAgICAgICBzZW5kZXJJZDogXCJhZ2VudC0xXCIsXG4gICAgICAgIGNvbnRlbnQ6IFwiVGhpcyBpcyBhIHRleHQgbWVzc2FnZVwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIHR5cGU6IFwidGV4dFwiIGFzIGNvbnN0LFxuICAgICAgfTtcblxuICAgICAgcmVuZGVyKDxNZXNzYWdlQ29tcG9uZW50cy5UZXh0TWVzc2FnZSBtZXNzYWdlPXt0ZXh0TWVzc2FnZX0gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIlRoaXMgaXMgYSB0ZXh0IG1lc3NhZ2VcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvYWdlbnQtMS8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJyZW5kZXJzIGNvZGUgbWVzc2FnZXMgd2l0aCBzeW50YXggaGlnaGxpZ2h0aW5nXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvZGVNZXNzYWdlID0ge1xuICAgICAgICBpZDogXCJtc2ctMlwiLFxuICAgICAgICBzZW5kZXJJZDogXCJhZ2VudC0yXCIsXG4gICAgICAgIGNvbnRlbnQ6ICdkZWYgaGVsbG8oKTpcXG4gICAgcHJpbnQoXCJIZWxsbywgd29ybGQhXCIpJyxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB0eXBlOiBcImNvZGVcIiBhcyBjb25zdCxcbiAgICAgICAgbWV0YWRhdGE6IHsgbGFuZ3VhZ2U6IFwicHl0aG9uXCIgfSxcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcig8TWVzc2FnZUNvbXBvbmVudHMuQ29kZU1lc3NhZ2UgbWVzc2FnZT17Y29kZU1lc3NhZ2V9IC8+KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL2RlZiBoZWxsby8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVJvbGUoXCJjb2RlXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL3B5dGhvbi9pKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIGl0KFwicmVuZGVycyBzeXN0ZW0gbWVzc2FnZXMgZGlzdGluY3RseVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBzeXN0ZW1NZXNzYWdlID0ge1xuICAgICAgICBpZDogXCJtc2ctM1wiLFxuICAgICAgICBzZW5kZXJJZDogXCJzeXN0ZW1cIixcbiAgICAgICAgY29udGVudDogXCJBZ2VudC0xIGhhcyBqb2luZWQgdGhlIGNvbnZlcnNhdGlvblwiLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXG4gICAgICAgIHR5cGU6IFwic3lzdGVtXCIgYXMgY29uc3QsXG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoPE1lc3NhZ2VDb21wb25lbnRzLlN5c3RlbU1lc3NhZ2UgbWVzc2FnZT17c3lzdGVtTWVzc2FnZX0gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvam9pbmVkIHRoZSBjb252ZXJzYXRpb24vKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBzY3JlZW4uZ2V0QnlUZXh0KC9qb2luZWQgdGhlIGNvbnZlcnNhdGlvbi8pO1xuICAgICAgZXhwZWN0KG1lc3NhZ2UpLnRvSGF2ZUNsYXNzKFwic3lzdGVtLW1lc3NhZ2VcIik7XG4gICAgfSk7XG5cbiAgICBpdChcInNob3dzIG1lc3NhZ2UgdGltZXN0YW1wc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICBpZDogXCJtc2ctNFwiLFxuICAgICAgICBzZW5kZXJJZDogXCJhZ2VudC0xXCIsXG4gICAgICAgIGNvbnRlbnQ6IFwiVGVzdCBtZXNzYWdlXCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoXCIyMDI0LTAxLTAxVDEyOjAwOjAwXCIpLFxuICAgICAgICB0eXBlOiBcInRleHRcIiBhcyBjb25zdCxcbiAgICAgIH07XG5cbiAgICAgIHJlbmRlcig8TWVzc2FnZUNvbXBvbmVudHMuVGV4dE1lc3NhZ2UgbWVzc2FnZT17bWVzc2FnZX0gLz4pO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIlRlc3QgbWVzc2FnZVwiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC8xMjowMC8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgaXQoXCJoYW5kbGVzIG1lc3NhZ2UgcmVhY3Rpb25zXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG9uUmVhY3Rpb24gPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICBpZDogXCJtc2ctNVwiLFxuICAgICAgICBzZW5kZXJJZDogXCJhZ2VudC0xXCIsXG4gICAgICAgIGNvbnRlbnQ6IFwiR3JlYXQgaWRlYSFcIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB0eXBlOiBcInRleHRcIiBhcyBjb25zdCxcbiAgICAgICAgcmVhY3Rpb25zOiB7IFwi8J+RjVwiOiAyLCBcIuKdpO+4j1wiOiAxIH0sXG4gICAgICB9O1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxNZXNzYWdlQ29tcG9uZW50cy5UZXh0TWVzc2FnZVxuICAgICAgICAgIG1lc3NhZ2U9e21lc3NhZ2V9XG4gICAgICAgICAgb25SZWFjdGlvbj17b25SZWFjdGlvbn1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIkdyZWF0IGlkZWEhXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICBjb25zdCB0aHVtYnNVcCA9IHNjcmVlbi5nZXRCeVRleHQoXCLwn5GNXCIpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHRodW1ic1VwKTtcblxuICAgICAgZXhwZWN0KG9uUmVhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwibXNnLTVcIiwgXCLwn5GNXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkNvbnZlcnNhdGlvblNlYXJjaFwiLCAoKSA9PiB7XG4gICAgaXQoXCJzZWFyY2hlcyB0aHJvdWdoIGNvbnZlcnNhdGlvbiBjb250ZW50XCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGNvbnN0IG9uU2VhcmNoID0gamVzdC5mbigpO1xuXG4gICAgICByZW5kZXIoXG4gICAgICAgIDxDb252ZXJzYXRpb25TZWFyY2hcbiAgICAgICAgICBjb252ZXJzYXRpb25zPXttb2NrQ29udmVyc2F0aW9uc31cbiAgICAgICAgICBvblNlYXJjaD17b25TZWFyY2h9XG4gICAgICAgICAgey4uLih7fSBhcyBhbnkpfVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KC9zZWFyY2ggbWVzc2FnZXMvaSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNlYXJjaElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJrbm93bGVkZ2UgZ3JhcGhcIiB9IH0pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFtleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7IGlkOiBcImNvbnYtMlwiIH0pXSksXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KFwic3VwcG9ydHMgYWR2YW5jZWQgc2VhcmNoIGZpbHRlcnNcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWFyY2ggPSBqZXN0LmZuKCk7XG5cbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENvbnZlcnNhdGlvblNlYXJjaFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIG9uU2VhcmNoPXtvblNlYXJjaH1cbiAgICAgICAgICBlbmFibGVBZHZhbmNlZFNlYXJjaFxuICAgICAgICAgIHsuLi4oe30gYXMgYW55KX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICBjb25zdCBhZHZhbmNlZEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoL2FkdmFuY2VkIHNlYXJjaC9pKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhhZHZhbmNlZEJ1dHRvbik7XG5cbiAgICAgIC8vIFNldCBwYXJ0aWNpcGFudCBmaWx0ZXJcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50SW5wdXQgPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoL3BhcnRpY2lwYW50L2kpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShwYXJ0aWNpcGFudElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJhZ2VudC0zXCIgfSB9KTtcblxuICAgICAgLy8gU2V0IGRhdGUgcmFuZ2VcbiAgICAgIGNvbnN0IGZyb21EYXRlID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KC9mcm9tIGRhdGUvaSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKGZyb21EYXRlLCB7IHRhcmdldDogeyB2YWx1ZTogXCIyMDI0LTAxLTAxXCIgfSB9KTtcblxuICAgICAgY29uc3Qgc2VhcmNoQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgvc2VhcmNoL2kpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNlYXJjaEJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChvblNlYXJjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50czogZXhwZWN0LmFycmF5Q29udGFpbmluZyhbXCJhZ2VudC0zXCJdKSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgXSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoXCJoaWdobGlnaHRzIHNlYXJjaCByZXN1bHRzXCIsICgpID0+IHtcbiAgICAgIHJlbmRlcihcbiAgICAgICAgPENvbnZlcnNhdGlvblNlYXJjaFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIGhpZ2hsaWdodFJlc3VsdHNcbiAgICAgICAgICB7Li4uKHt9IGFzIGFueSl9XG4gICAgICAgIC8+LFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL3NlYXJjaCBtZXNzYWdlcy9pKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcIkhlbGxvXCIgfSB9KTtcblxuICAgICAgY29uc3QgaGlnaGxpZ2h0ZWQgPSBzY3JlZW4uZ2V0QnlUZXh0KFwiSGVsbG9cIik7XG4gICAgICBleHBlY3QoaGlnaGxpZ2h0ZWQpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoaGlnaGxpZ2h0ZWQpLnRvSGF2ZVRleHRDb250ZW50KFwiSGVsbG9cIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiQ29udmVyc2F0aW9uIFBlcmZvcm1hbmNlXCIsICgpID0+IHtcbiAgICBpdChcImhhbmRsZXMgcmFwaWQgbWVzc2FnZSB1cGRhdGVzIGVmZmljaWVudGx5XCIsIGFzeW5jICgpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGNvbnN0IHsgcmVyZW5kZXIgfSA9IHJlbmRlcihcbiAgICAgICAgPENvbnZlcnNhdGlvbkRhc2hib2FyZFxuICAgICAgICAgIGNvbnZlcnNhdGlvbnM9e21vY2tDb252ZXJzYXRpb25zfVxuICAgICAgICAgIGFnZW50cz17W119XG4gICAgICAgICAgb25Db252ZXJzYXRpb25TZWxlY3Q9eygpID0+IHt9fVxuICAgICAgICAvPixcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHVwZGF0ZXMgPSBbXTtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgICAvLyBTaW11bGF0ZSAxMDAgcmFwaWQgdXBkYXRlc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29udnMgPSBbLi4ubW9ja0NvbnZlcnNhdGlvbnNdO1xuICAgICAgICB1cGRhdGVkQ29udnNbMF0ubWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgaWQ6IGByYXBpZC0ke2l9YCxcbiAgICAgICAgICBzZW5kZXJJZDogXCJhZ2VudC0xXCIsXG4gICAgICAgICAgY29udGVudDogYFJhcGlkIG1lc3NhZ2UgJHtpfWAsXG4gICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXJlbmRlcihcbiAgICAgICAgICA8Q29udmVyc2F0aW9uRGFzaGJvYXJkXG4gICAgICAgICAgICBjb252ZXJzYXRpb25zPXt1cGRhdGVkQ29udnN9XG4gICAgICAgICAgICBhZ2VudHM9e1tdfVxuICAgICAgICAgICAgb25Db252ZXJzYXRpb25TZWxlY3Q9eygpID0+IHt9fVxuICAgICAgICAgIC8+LFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0b3RhbFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSB1cGRhdGVzIGVmZmljaWVudGx5XG4gICAgICBleHBlY3QodG90YWxUaW1lKS50b0JlTGVzc1RoYW4oMTAwMCk7IC8vIExlc3MgdGhhbiAxIHNlY29uZCBmb3IgMTAwIHVwZGF0ZXNcbiAgICB9KTtcblxuICAgIGl0KFwiZGVib3VuY2VzIHNlYXJjaCBpbnB1dFwiLCBhc3luYyAoKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICBjb25zdCBvblNlYXJjaCA9IGplc3QuZm4oKTtcblxuICAgICAgcmVuZGVyKFxuICAgICAgICA8Q29udmVyc2F0aW9uU2VhcmNoXG4gICAgICAgICAgY29udmVyc2F0aW9ucz17bW9ja0NvbnZlcnNhdGlvbnN9XG4gICAgICAgICAgb25TZWFyY2g9e29uU2VhcmNofVxuICAgICAgICAgIGRlYm91bmNlTXM9ezMwMH1cbiAgICAgICAgICB7Li4uKHt9IGFzIGFueSl9XG4gICAgICAgIC8+LFxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoL3NlYXJjaC9pKTtcblxuICAgICAgLy8gVHlwZSByYXBpZGx5XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNlYXJjaElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJoXCIgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcImhlXCIgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcImhlbFwiIH0gfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHNlYXJjaElucHV0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJoZWxsXCIgfSB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcImhlbGxvXCIgfSB9KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCBjYWxsIGltbWVkaWF0ZWx5XG4gICAgICBleHBlY3Qob25TZWFyY2gpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG5cbiAgICAgIC8vIFdhaXQgZm9yIGRlYm91bmNlXG4gICAgICBhd2FpdCB3YWl0Rm9yKFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgICAgZXhwZWN0KG9uU2VhcmNoKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3QuYW55KEFycmF5KSk7XG4gICAgICAgIH0sXG4gICAgICAgIHsgdGltZW91dDogNDAwIH0sXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbIm1vY2tDb252ZXJzYXRpb25zIiwiaWQiLCJwYXJ0aWNpcGFudHMiLCJtZXNzYWdlcyIsInNlbmRlcklkIiwiY29udGVudCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ0eXBlIiwic3RhcnRUaW1lIiwibGFzdEFjdGl2aXR5VGltZSIsInN0YXR1cyIsImVuZFRpbWUiLCJtZXRhZGF0YSIsInRvcGljIiwiaW1wb3J0YW5jZSIsImRlc2NyaWJlIiwiaXQiLCJyZW5kZXIiLCJDb252ZXJzYXRpb25EYXNoYm9hcmQiLCJjb252ZXJzYXRpb25zIiwiYWdlbnRzIiwib25Db252ZXJzYXRpb25TZWxlY3QiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVJvbGUiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImdldEJ5VGV4dCIsImZpbHRlclNlbGVjdCIsImdldEJ5TGFiZWxUZXh0IiwiZmlyZUV2ZW50IiwiY2hhbmdlIiwidGFyZ2V0IiwidmFsdWUiLCJxdWVyeUJ5VGV4dCIsIm5vdCIsInNvcnRCdXR0b24iLCJjbGljayIsImdldEFsbEJ5Um9sZSIsInRvSGF2ZVRleHRDb250ZW50Iiwib25TZWxlY3QiLCJqZXN0IiwiZm4iLCJmaXJzdENvbnZlcnNhdGlvbiIsImNsb3Nlc3QiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsInJlcmVuZGVyIiwidXBkYXRlZENvbnZlcnNhdGlvbnMiLCJwdXNoIiwid2FpdEZvciIsImxhcmdlQ29udmVyc2F0aW9uTGlzdCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwicGVyZm9ybWFuY2UiLCJPcHRpbWl6ZWRDb252ZXJzYXRpb25EYXNoYm9hcmQiLCJyZW5kZXJUaW1lIiwidG9CZUxlc3NUaGFuIiwidmlzaWJsZUl0ZW1zIiwic2VhcmNoSW5wdXQiLCJnZXRCeVBsYWNlaG9sZGVyVGV4dCIsIm9uQnVsa0FjdGlvbiIsImNoZWNrYm94ZXMiLCJhcmNoaXZlQnV0dG9uIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0Rm9ybWF0IiwianNvbk9wdGlvbiIsImNvbmZpcm1FeHBvcnQiLCJtYW55TWVzc2FnZXMiLCJWaXJ0dWFsaXplZE1lc3NhZ2VMaXN0IiwiaGVpZ2h0IiwidmlzaWJsZU1lc3NhZ2VzIiwiY29udGFpbmVyIiwic2Nyb2xsQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvcCIsInRvQmVHcmVhdGVyVGhhbiIsImdldEl0ZW1IZWlnaHQiLCJpbmRleCIsInRhbGxNZXNzYWdlcyIsImZpbHRlciIsImVsIiwic3R5bGUiLCJvbk1lc3NhZ2VBY3Rpb24iLCJzbGljZSIsImZpcnN0TWVzc2FnZSIsIm1vcmVCdXR0b24iLCJ3aXRoaW4iLCJkZWxldGVPcHRpb24iLCJ0ZXh0TWVzc2FnZSIsIk1lc3NhZ2VDb21wb25lbnRzIiwiVGV4dE1lc3NhZ2UiLCJtZXNzYWdlIiwiY29kZU1lc3NhZ2UiLCJsYW5ndWFnZSIsIkNvZGVNZXNzYWdlIiwic3lzdGVtTWVzc2FnZSIsIlN5c3RlbU1lc3NhZ2UiLCJ0b0hhdmVDbGFzcyIsIm9uUmVhY3Rpb24iLCJyZWFjdGlvbnMiLCJ0aHVtYnNVcCIsIm9uU2VhcmNoIiwiQ29udmVyc2F0aW9uU2VhcmNoIiwiYXJyYXlDb250YWluaW5nIiwib2JqZWN0Q29udGFpbmluZyIsImVuYWJsZUFkdmFuY2VkU2VhcmNoIiwiYWR2YW5jZWRCdXR0b24iLCJwYXJ0aWNpcGFudElucHV0IiwiZnJvbURhdGUiLCJzZWFyY2hCdXR0b24iLCJoaWdobGlnaHRSZXN1bHRzIiwiaGlnaGxpZ2h0ZWQiLCJ1cGRhdGVzIiwidXBkYXRlZENvbnZzIiwidG90YWxUaW1lIiwiZGVib3VuY2VNcyIsInRvSGF2ZUJlZW5DYWxsZWQiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJhbnkiLCJ0aW1lb3V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs4REFBa0I7d0JBT1g7dUNBQytCO2dEQUNTO3dDQUNSOzJFQUNKO29DQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVuQyx5QkFBeUI7QUFD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