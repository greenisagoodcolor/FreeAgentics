{"version":3,"sources":["/Users/matthewmoroney/builds/FreeAgentics/web/components/errorboundary.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { Component, ReactNode } from \"react\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { Button } from \"@/components/ui/button\";\nimport { AlertCircle, RefreshCw } from \"lucide-react\";\nimport { LLMError } from \"@/lib/llm-errors\";\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface IState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends Component<Props, IState> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): IState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error(\"Error caught by boundary:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      const error = this.state.error;\n      const isLLMError = error instanceof LLMError;\n\n      return (\n        <Alert variant=\"destructive\" className=\"m-4\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>\n            {isLLMError\n              ? `${error.provider?.toUpperCase()} Error`\n              : \"Application Error\"}\n          </AlertTitle>\n          <AlertDescription className=\"mt-2\">\n            <p>{error?.message || \"An unexpected error occurred\"}</p>\n            {isLLMError && (\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Error type: {error.type}\n                {error.statusCode && ` (Status: ${error.statusCode})`}\n              </p>\n            )}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"mt-2\"\n              onClick={() => this.setState({ hasError: false, error: null })}\n            >\n              <RefreshCw className=\"h-3 w-3 mr-1\" />\n              Try Again\n            </Button>\n          </AlertDescription>\n        </Alert>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Hook-based error boundary for functional components\nexport function useErrorHandler() {\n  return (error: Error) => {\n    console.error(\"Error handled:\", error);\n    throw error; // This will be caught by the ErrorBoundary\n  };\n}\n"],"names":["ErrorBoundary","useErrorHandler","Component","constructor","props","state","hasError","error","getDerivedStateFromError","componentDidCatch","errorInfo","console","render","fallback","isLLMError","LLMError","Alert","variant","className","AlertCircle","AlertTitle","provider","toUpperCase","AlertDescription","p","message","type","statusCode","Button","size","onClick","setState","RefreshCw","children"],"mappings":"AAAA;;;;;;;;;;;;IAkBaA,aAAa;eAAbA;;IA0DGC,eAAe;eAAfA;;;;+DA1E4B;uBACQ;wBAC7B;6BACgB;2BACd;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAYlB,MAAMD,sBAAsBE,gBAAS;IAC1CC,YAAYC,KAAY,CAAE;QACxB,KAAK,CAACA;QACN,IAAI,CAACC,KAAK,GAAG;YAAEC,UAAU;YAAOC,OAAO;QAAK;IAC9C;IAEA,OAAOC,yBAAyBD,KAAY,EAAU;QACpD,OAAO;YAAED,UAAU;YAAMC;QAAM;IACjC;IAEAE,kBAAkBF,KAAY,EAAEG,SAA0B,EAAE;QAC1DC,QAAQJ,KAAK,CAAC,6BAA6BA,OAAOG;IACpD;IAEAE,SAAS;QACP,IAAI,IAAI,CAACP,KAAK,CAACC,QAAQ,EAAE;YACvB,IAAI,IAAI,CAACF,KAAK,CAACS,QAAQ,EAAE;gBACvB,OAAO,IAAI,CAACT,KAAK,CAACS,QAAQ;YAC5B;YAEA,MAAMN,QAAQ,IAAI,CAACF,KAAK,CAACE,KAAK;YAC9B,MAAMO,aAAaP,iBAAiBQ,mBAAQ;YAE5C,qBACE,sBAACC,YAAK;gBAACC,SAAQ;gBAAcC,WAAU;;kCACrC,qBAACC,wBAAW;wBAACD,WAAU;;kCACvB,qBAACE,iBAAU;kCACRN,aACG,CAAC,EAAEP,MAAMc,QAAQ,EAAEC,cAAc,MAAM,CAAC,GACxC;;kCAEN,sBAACC,uBAAgB;wBAACL,WAAU;;0CAC1B,qBAACM;0CAAGjB,OAAOkB,WAAW;;4BACrBX,4BACC,sBAACU;gCAAEN,WAAU;;oCAAqC;oCACnCX,MAAMmB,IAAI;oCACtBnB,MAAMoB,UAAU,IAAI,CAAC,UAAU,EAAEpB,MAAMoB,UAAU,CAAC,CAAC,CAAC;;;0CAGzD,sBAACC,cAAM;gCACLX,SAAQ;gCACRY,MAAK;gCACLX,WAAU;gCACVY,SAAS,IAAM,IAAI,CAACC,QAAQ,CAAC;wCAAEzB,UAAU;wCAAOC,OAAO;oCAAK;;kDAE5D,qBAACyB,sBAAS;wCAACd,WAAU;;oCAAiB;;;;;;;QAMhD;QAEA,OAAO,IAAI,CAACd,KAAK,CAAC6B,QAAQ;IAC5B;AACF;AAGO,SAAShC;IACd,OAAO,CAACM;QACNI,QAAQJ,KAAK,CAAC,kBAAkBA;QAChC,MAAMA,OAAO,2CAA2C;IAC1D;AACF"}