9dce90643d06d14cfd6ece79a4e7bce9
/**
 * PHASE 2: DEEP COMPONENT INTERACTION TESTS - MEMORYVIEWER
 *
 * Target: components/memoryviewer.tsx (2,272 lines)
 * Strategy: Test ALL component interactions, state changes, and business logic
 * Goal: Push coverage from 6.42% to 15%+ by testing the largest component thoroughly
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _jsxruntime = require("react/jsx-runtime");
const _react = /*#__PURE__*/ _interop_require_default(require("react"));
const _react1 = require("@testing-library/react");
const _globals = require("@jest/globals");
const _memoryviewer = /*#__PURE__*/ _interop_require_default(require("../../components/memoryviewer"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Complete mock setup for all dependencies
_globals.jest.mock("@/hooks/use-toast", ()=>({
        useToast: _globals.jest.fn()
    }));
_globals.jest.mock("@/contexts/llm-context", ()=>({
        useLLM: _globals.jest.fn()
    }));
_globals.jest.mock("@/lib/utils", ()=>({
        formatTimestamp: _globals.jest.fn((date)=>date.toISOString()),
        extractTagsFromMarkdown: _globals.jest.fn((content)=>content.match(/#(\w+)/g) || []),
        cn: _globals.jest.fn((...args)=>args.filter(Boolean).join(" "))
    }));
_globals.jest.mock("@/lib/belief-extraction", ()=>({
        parseBeliefs: _globals.jest.fn(),
        parseRefinedBeliefs: _globals.jest.fn()
    }));
_globals.jest.mock("@/lib/knowledge-export", ()=>({
        exportAgentKnowledge: _globals.jest.fn()
    }));
_globals.jest.mock("@/lib/debug-logger", ()=>({
        debugLog: _globals.jest.fn(),
        createLogger: _globals.jest.fn(()=>({
                log: _globals.jest.fn(),
                info: _globals.jest.fn(),
                warn: _globals.jest.fn(),
                error: _globals.jest.fn()
            }))
    }));
// Mock all UI components to focus on logic
_globals.jest.mock("@/components/ui/button", ()=>({
        Button: ({ children, onClick, variant, disabled, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("button", {
                onClick: onClick,
                disabled: disabled,
                "data-variant": variant,
                ...props,
                children: children
            })
    }));
_globals.jest.mock("@/components/ui/textarea", ()=>({
        Textarea: ({ value, onChange, placeholder, disabled, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("textarea", {
                value: value,
                onChange: onChange,
                placeholder: placeholder,
                disabled: disabled,
                ...props
            })
    }));
_globals.jest.mock("@/components/ui/card", ()=>({
        Card: ({ children, className, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: className,
                ...props,
                children: children
            }),
        CardContent: ({ children, className, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: className,
                ...props,
                children: children
            }),
        CardHeader: ({ children, className, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: className,
                ...props,
                children: children
            }),
        CardTitle: ({ children, className, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("h3", {
                className: className,
                ...props,
                children: children
            })
    }));
_globals.jest.mock("@/components/ui/select", ()=>({
        Select: ({ children, value, onValueChange, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "select-container",
                ...props,
                children: /*#__PURE__*/ (0, _jsxruntime.jsx)("select", {
                    value: value,
                    onChange: (e)=>onValueChange?.(e.target.value),
                    children: children
                })
            }),
        SelectContent: ({ children })=>/*#__PURE__*/ (0, _jsxruntime.jsx)(_jsxruntime.Fragment, {
                children: children
            }),
        SelectItem: ({ value, children })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("option", {
                value: value,
                children: children
            }),
        SelectTrigger: ({ children })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                "data-testid": "select-trigger",
                children: children
            }),
        SelectValue: ({ placeholder })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                children: placeholder
            })
    }));
_globals.jest.mock("@/components/ui/scroll-area", ()=>({
        ScrollArea: ({ children, className, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("div", {
                className: className,
                ...props,
                children: children
            })
    }));
_globals.jest.mock("@/components/ui/input", ()=>({
        Input: ({ value, onChange, placeholder, type, disabled, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("input", {
                type: type || "text",
                value: value,
                onChange: onChange,
                placeholder: placeholder,
                disabled: disabled,
                ...props
            })
    }));
_globals.jest.mock("@/components/ui/badge", ()=>({
        Badge: ({ children, variant, className, ...props })=>/*#__PURE__*/ (0, _jsxruntime.jsx)("span", {
                className: className,
                "data-variant": variant,
                ...props,
                children: children
            })
    }));
// Mock data structures
const createMockKnowledgeEntry = (id, overrides = {})=>({
        id,
        title: `Knowledge ${id}`,
        content: `Content for knowledge ${id}`,
        source: "user",
        timestamp: new Date("2023-01-01T12:00:00Z"),
        tags: [
            "tag1",
            "tag2"
        ],
        metadata: {},
        ...overrides
    });
const createMockAgent = (id, overrides = {})=>({
        id,
        name: `Agent ${id}`,
        biography: `Biography for agent ${id}`,
        color: "#ff0000",
        position: {
            x: 0,
            y: 0
        },
        knowledge: [
            createMockKnowledgeEntry(`knowledge-${id}`)
        ],
        toolPermissions: {
            internetSearch: true,
            webScraping: false,
            wikipediaAccess: true,
            newsApi: false,
            academicSearch: true,
            documentRetrieval: false,
            imageGeneration: false,
            textSummarization: true,
            translation: false,
            codeExecution: false,
            calculator: true,
            knowledgeGraphQuery: false,
            factChecking: true,
            timelineGenerator: false,
            weatherData: false,
            mapLocationData: false,
            financialData: false,
            publicDatasets: false,
            memorySearch: true,
            crossAgentKnowledge: false,
            conversationAnalysis: true
        },
        autonomyEnabled: true,
        inConversation: false,
        ...overrides
    });
const createMockConversation = (id, overrides = {})=>({
        id,
        participants: [
            "agent-1"
        ],
        messages: [
            {
                id: `msg-${id}-1`,
                conversationId: id,
                senderId: "agent-1",
                content: `Message content for conversation ${id}`,
                timestamp: new Date("2023-01-01T12:00:00Z"),
                type: "text",
                metadata: {}
            }
        ],
        createdAt: new Date("2023-01-01T12:00:00Z"),
        updatedAt: new Date("2023-01-01T12:00:00Z"),
        title: `Conversation ${id}`,
        metadata: {},
        ...overrides
    });
describe("MemoryViewer - Deep Component Interactions", ()=>{
    let mockToast;
    let mockUseLLM;
    let mockOnAddKnowledge;
    let mockOnUpdateAgent;
    let mockOnDeleteKnowledge;
    let mockOnUpdateKnowledge;
    let mockOnClearSelectedKnowledgeNode;
    let mockOnSelectAgent;
    const baseAgent = createMockAgent("agent-1");
    const baseConversation = createMockConversation("conv-1");
    beforeEach(()=>{
        _globals.jest.clearAllMocks();
        mockToast = _globals.jest.fn();
        mockUseLLM = _globals.jest.fn(()=>({
                isProcessing: false,
                setIsProcessing: _globals.jest.fn(),
                generateResponse: _globals.jest.fn(),
                extractBeliefs: _globals.jest.fn(),
                generateKnowledgeEntries: _globals.jest.fn(),
                llmClient: null
            }));
        mockOnAddKnowledge = _globals.jest.fn();
        mockOnUpdateAgent = _globals.jest.fn();
        mockOnDeleteKnowledge = _globals.jest.fn();
        mockOnUpdateKnowledge = _globals.jest.fn();
        mockOnClearSelectedKnowledgeNode = _globals.jest.fn();
        mockOnSelectAgent = _globals.jest.fn();
        // Setup mocks
        const { useToast } = _globals.jest.requireMock("@/hooks/use-toast");
        const { useLLM } = _globals.jest.requireMock("@/contexts/llm-context");
        const { formatTimestamp, extractTagsFromMarkdown } = _globals.jest.requireMock("@/lib/utils");
        useToast.mockReturnValue({
            toast: mockToast,
            dismiss: _globals.jest.fn(),
            toasts: []
        });
        useLLM.mockImplementation(mockUseLLM);
        formatTimestamp.mockImplementation((date)=>date.toISOString());
        extractTagsFromMarkdown.mockImplementation((content)=>content.match(/#(\w+)/g) || []);
    });
    const renderMemoryViewer = (props = {})=>{
        const defaultProps = {
            selectedAgent: baseAgent,
            conversationHistory: [
                baseConversation
            ],
            agents: [
                baseAgent
            ],
            onAddKnowledge: mockOnAddKnowledge,
            onUpdateAgent: mockOnUpdateAgent,
            onDeleteKnowledge: mockOnDeleteKnowledge,
            onUpdateKnowledge: mockOnUpdateKnowledge,
            selectedKnowledgeNode: null,
            onClearSelectedKnowledgeNode: mockOnClearSelectedKnowledgeNode,
            onSelectAgent: mockOnSelectAgent,
            ...props
        };
        return (0, _react1.render)(/*#__PURE__*/ (0, _jsxruntime.jsx)(_memoryviewer.default, {
            ...defaultProps
        }));
    };
    describe("Component State Management", ()=>{
        test("manages tab navigation state correctly", ()=>{
            renderMemoryViewer();
            // Should start with Biography tab
            expect(_react1.screen.getByDisplayValue("Biography for agent agent-1")).toBeInTheDocument();
            // Navigate to Knowledge tab
            const knowledgeTab = _react1.screen.getByText("Knowledge");
            _react1.fireEvent.click(knowledgeTab);
            expect(_react1.screen.getByText("Knowledge agent-1")).toBeInTheDocument();
        });
        test("manages knowledge view state transitions", ()=>{
            renderMemoryViewer();
            // Navigate to knowledge tab
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            // Should show knowledge list by default
            expect(_react1.screen.getByText("Knowledge agent-1")).toBeInTheDocument();
            // Switch to Add tab
            _react1.fireEvent.click(_react1.screen.getByText("Add"));
            expect(_react1.screen.getByPlaceholderText("Knowledge title...")).toBeInTheDocument();
            // Go back to List tab
            _react1.fireEvent.click(_react1.screen.getByText("List"));
            expect(_react1.screen.getByText("Knowledge agent-1")).toBeInTheDocument();
        });
        test("manages tool permissions editing state", ()=>{
            renderMemoryViewer();
            // Navigate to Tools tab
            _react1.fireEvent.click(_react1.screen.getByText("Tools"));
            // Check initial state
            expect(_react1.screen.getByText("Information Access Tools")).toBeInTheDocument();
            // Toggle a permission
            const internetSearchToggle = _react1.screen.getByLabelText("Internet Search");
            _react1.fireEvent.click(internetSearchToggle);
            // Should show unsaved changes indicator
            expect(_react1.screen.getByText("Unsaved Changes")).toBeInTheDocument();
        });
        test("manages belief extraction workflow state", ()=>{
            renderMemoryViewer();
            // Navigate to Inference tab
            _react1.fireEvent.click(_react1.screen.getByText("Inference"));
            expect(_react1.screen.getByText("Extract Beliefs from Conversation")).toBeInTheDocument();
            // Select a conversation
            const conversationSelect = _react1.screen.getByDisplayValue("Select a conversation...");
            _react1.fireEvent.change(conversationSelect, {
                target: {
                    value: "conv-1"
                }
            });
            expect(_react1.screen.getByDisplayValue("Conversation conv-1")).toBeInTheDocument();
        });
    });
    describe("Biography Management Deep Testing", ()=>{
        test("handles biography editing workflow completely", async ()=>{
            renderMemoryViewer();
            const biographyTextarea = _react1.screen.getByDisplayValue("Biography for agent agent-1");
            // Test editing
            _react1.fireEvent.change(biographyTextarea, {
                target: {
                    value: "New biography content"
                }
            });
            expect(biographyTextarea).toHaveValue("New biography content");
            // Test saving
            const saveButton = _react1.screen.getByText("Save Biography");
            _react1.fireEvent.click(saveButton);
            await (0, _react1.waitFor)(()=>{
                expect(mockOnUpdateAgent).toHaveBeenCalledWith("agent-1", {
                    biography: "New biography content"
                });
            });
            expect(mockToast).toHaveBeenCalledWith({
                title: "Success",
                description: "Biography saved successfully"
            });
        });
        test("handles biography save errors gracefully", async ()=>{
            mockOnUpdateAgent.mockRejectedValue(new Error("Save failed"));
            renderMemoryViewer();
            const biographyTextarea = _react1.screen.getByDisplayValue("Biography for agent agent-1");
            _react1.fireEvent.change(biographyTextarea, {
                target: {
                    value: "New content"
                }
            });
            const saveButton = _react1.screen.getByText("Save Biography");
            _react1.fireEvent.click(saveButton);
            await (0, _react1.waitFor)(()=>{
                expect(mockToast).toHaveBeenCalledWith({
                    title: "Error",
                    description: "Failed to save biography: Save failed",
                    variant: "destructive"
                });
            });
        });
        test("disables save button when no changes made", ()=>{
            renderMemoryViewer();
            const saveButton = _react1.screen.getByText("Save Biography");
            expect(saveButton).toBeDisabled();
            // Make a change
            const biographyTextarea = _react1.screen.getByDisplayValue("Biography for agent agent-1");
            _react1.fireEvent.change(biographyTextarea, {
                target: {
                    value: "Changed"
                }
            });
            expect(saveButton).not.toBeDisabled();
        });
    });
    describe("Knowledge Management Deep Testing", ()=>{
        test("handles knowledge creation workflow completely", async ()=>{
            renderMemoryViewer();
            // Navigate to knowledge and add
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            _react1.fireEvent.click(_react1.screen.getByText("Add"));
            // Fill form
            const titleInput = _react1.screen.getByPlaceholderText("Knowledge title...");
            const contentTextarea = _react1.screen.getByPlaceholderText("Knowledge content...");
            const tagsInput = _react1.screen.getByPlaceholderText("Tags (comma-separated)...");
            _react1.fireEvent.change(titleInput, {
                target: {
                    value: "New Knowledge Title"
                }
            });
            _react1.fireEvent.change(contentTextarea, {
                target: {
                    value: "New knowledge content"
                }
            });
            _react1.fireEvent.change(tagsInput, {
                target: {
                    value: "tag1, tag2, tag3"
                }
            });
            // Save
            const saveButton = _react1.screen.getByText("Save Knowledge");
            _react1.fireEvent.click(saveButton);
            await (0, _react1.waitFor)(()=>{
                expect(mockOnAddKnowledge).toHaveBeenCalledWith("agent-1", expect.objectContaining({
                    title: "New Knowledge Title",
                    content: "New knowledge content",
                    tags: [
                        "tag1",
                        "tag2",
                        "tag3"
                    ],
                    source: "user"
                }));
            });
            expect(mockToast).toHaveBeenCalledWith({
                title: "Success",
                description: "Knowledge saved successfully"
            });
        });
        test("handles knowledge editing workflow completely", async ()=>{
            const agentWithKnowledge = createMockAgent("agent-1", {
                knowledge: [
                    createMockKnowledgeEntry("knowledge-1", {
                        title: "Existing Knowledge",
                        content: "Existing content",
                        tags: [
                            "existing",
                            "tags"
                        ]
                    })
                ]
            });
            renderMemoryViewer({
                selectedAgent: agentWithKnowledge
            });
            // Navigate to knowledge
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            // Select knowledge entry
            const knowledgeItem = _react1.screen.getByText("Existing Knowledge");
            _react1.fireEvent.click(knowledgeItem);
            // Enter edit mode
            _react1.fireEvent.click(_react1.screen.getByText("Edit"));
            // Edit content
            const contentTextarea = _react1.screen.getByDisplayValue("Existing content");
            _react1.fireEvent.change(contentTextarea, {
                target: {
                    value: "Updated content"
                }
            });
            // Save changes
            _react1.fireEvent.click(_react1.screen.getByText("Save"));
            await (0, _react1.waitFor)(()=>{
                expect(mockOnUpdateKnowledge).toHaveBeenCalledWith("agent-1", "knowledge-1", {
                    content: "Updated content"
                });
            });
        });
        test("handles knowledge deletion workflow with confirmation", async ()=>{
            const agentWithKnowledge = createMockAgent("agent-1", {
                knowledge: [
                    createMockKnowledgeEntry("knowledge-1")
                ]
            });
            renderMemoryViewer({
                selectedAgent: agentWithKnowledge
            });
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            // Select and delete
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge knowledge-1"));
            _react1.fireEvent.click(_react1.screen.getByText("Delete"));
            // Confirm deletion
            _react1.fireEvent.click(_react1.screen.getByText("Confirm Delete"));
            await (0, _react1.waitFor)(()=>{
                expect(mockOnDeleteKnowledge).toHaveBeenCalledWith("agent-1", "knowledge-1");
            });
        });
        test("handles knowledge search functionality", ()=>{
            const agentWithMultipleKnowledge = createMockAgent("agent-1", {
                knowledge: [
                    createMockKnowledgeEntry("knowledge-1", {
                        title: "First Knowledge",
                        content: "First content"
                    }),
                    createMockKnowledgeEntry("knowledge-2", {
                        title: "Second Knowledge",
                        content: "Second content"
                    }),
                    createMockKnowledgeEntry("knowledge-3", {
                        title: "Third Knowledge",
                        content: "Third content"
                    })
                ]
            });
            renderMemoryViewer({
                selectedAgent: agentWithMultipleKnowledge
            });
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            // Search for specific knowledge
            const searchInput = _react1.screen.getByPlaceholderText("Search knowledge...");
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "First"
                }
            });
            expect(_react1.screen.getByText("First Knowledge")).toBeInTheDocument();
            expect(_react1.screen.queryByText("Second Knowledge")).not.toBeInTheDocument();
            expect(_react1.screen.queryByText("Third Knowledge")).not.toBeInTheDocument();
        });
        test("handles knowledge tag filtering", ()=>{
            const agentWithTaggedKnowledge = createMockAgent("agent-1", {
                knowledge: [
                    createMockKnowledgeEntry("knowledge-1", {
                        tags: [
                            "science",
                            "physics"
                        ]
                    }),
                    createMockKnowledgeEntry("knowledge-2", {
                        tags: [
                            "math",
                            "algebra"
                        ]
                    }),
                    createMockKnowledgeEntry("knowledge-3", {
                        tags: [
                            "science",
                            "chemistry"
                        ]
                    })
                ]
            });
            renderMemoryViewer({
                selectedAgent: agentWithTaggedKnowledge
            });
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            // Filter by tag
            const tagSelect = _react1.screen.getByDisplayValue("All Tags");
            _react1.fireEvent.change(tagSelect, {
                target: {
                    value: "science"
                }
            });
            // Should show only science-tagged knowledge
            expect(_react1.screen.getByText("Knowledge knowledge-1")).toBeInTheDocument();
            expect(_react1.screen.queryByText("Knowledge knowledge-2")).not.toBeInTheDocument();
            expect(_react1.screen.getByText("Knowledge knowledge-3")).toBeInTheDocument();
        });
    });
    describe("Tool Permissions Deep Testing", ()=>{
        test("handles comprehensive tool permission updates", async ()=>{
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Tools"));
            // Toggle multiple permissions
            const internetSearch = _react1.screen.getByLabelText("Internet Search");
            const calculator = _react1.screen.getByLabelText("Calculator");
            const memorySearch = _react1.screen.getByLabelText("Memory Search");
            _react1.fireEvent.click(internetSearch); // true -> false
            _react1.fireEvent.click(calculator); // true -> false
            _react1.fireEvent.click(memorySearch); // true -> false
            // Save changes
            _react1.fireEvent.click(_react1.screen.getByText("Save Tool Permissions"));
            await (0, _react1.waitFor)(()=>{
                expect(mockOnUpdateAgent).toHaveBeenCalledWith("agent-1", {
                    toolPermissions: expect.objectContaining({
                        internetSearch: false,
                        calculator: false,
                        memorySearch: false,
                        // Others should remain unchanged
                        wikipediaAccess: true,
                        academicSearch: true
                    })
                });
            });
        });
        test("handles tool permission category grouping", ()=>{
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Tools"));
            // Check all categories are present
            expect(_react1.screen.getByText("Information Access Tools")).toBeInTheDocument();
            expect(_react1.screen.getByText("Content Generation & Processing")).toBeInTheDocument();
            expect(_react1.screen.getByText("Knowledge & Reasoning Tools")).toBeInTheDocument();
            expect(_react1.screen.getByText("External Integrations")).toBeInTheDocument();
            expect(_react1.screen.getByText("Agent-Specific Tools")).toBeInTheDocument();
        });
        test("handles tool permission save errors", async ()=>{
            mockOnUpdateAgent.mockRejectedValue(new Error("Permission update failed"));
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Tools"));
            _react1.fireEvent.click(_react1.screen.getByLabelText("Internet Search"));
            _react1.fireEvent.click(_react1.screen.getByText("Save Tool Permissions"));
            await (0, _react1.waitFor)(()=>{
                expect(mockToast).toHaveBeenCalledWith({
                    title: "Error",
                    description: "Failed to update tool permissions: Permission update failed",
                    variant: "destructive"
                });
            });
        });
    });
    describe("Belief Extraction Deep Testing", ()=>{
        test("handles complete belief extraction workflow", async ()=>{
            const mockExtractBeliefs = _globals.jest.fn().mockResolvedValue("Extracted beliefs text");
            mockUseLLM.mockReturnValue({
                isProcessing: false,
                setIsProcessing: _globals.jest.fn(),
                generateResponse: _globals.jest.fn(),
                extractBeliefs: mockExtractBeliefs,
                generateKnowledgeEntries: _globals.jest.fn(),
                llmClient: {}
            });
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Inference"));
            // Select conversation
            const conversationSelect = _react1.screen.getByDisplayValue("Select a conversation...");
            _react1.fireEvent.change(conversationSelect, {
                target: {
                    value: "conv-1"
                }
            });
            // Extract beliefs
            _react1.fireEvent.click(_react1.screen.getByText("Extract Beliefs"));
            await (0, _react1.waitFor)(()=>{
                expect(mockExtractBeliefs).toHaveBeenCalledWith(baseConversation.messages.map((m)=>m.content).join("\n"));
            });
            // Check extracted beliefs are displayed
            expect(_react1.screen.getByText("Extracted beliefs text")).toBeInTheDocument();
        });
        test("handles belief extraction processing state", async ()=>{
            const mockSetIsProcessing = _globals.jest.fn();
            mockUseLLM.mockReturnValue({
                isProcessing: true,
                setIsProcessing: mockSetIsProcessing,
                generateResponse: _globals.jest.fn(),
                extractBeliefs: _globals.jest.fn().mockImplementation(()=>new Promise(()=>{})),
                generateKnowledgeEntries: _globals.jest.fn(),
                llmClient: {}
            });
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Inference"));
            const conversationSelect = _react1.screen.getByDisplayValue("Select a conversation...");
            _react1.fireEvent.change(conversationSelect, {
                target: {
                    value: "conv-1"
                }
            });
            _react1.fireEvent.click(_react1.screen.getByText("Extract Beliefs"));
            // Should show processing state
            expect(_react1.screen.getByText("Extracting...")).toBeInTheDocument();
        });
        test("handles belief extraction errors", async ()=>{
            const mockExtractBeliefs = _globals.jest.fn().mockRejectedValue(new Error("Extraction failed"));
            mockUseLLM.mockReturnValue({
                isProcessing: false,
                setIsProcessing: _globals.jest.fn(),
                generateResponse: _globals.jest.fn(),
                extractBeliefs: mockExtractBeliefs,
                generateKnowledgeEntries: _globals.jest.fn(),
                llmClient: {}
            });
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Inference"));
            const conversationSelect = _react1.screen.getByDisplayValue("Select a conversation...");
            _react1.fireEvent.change(conversationSelect, {
                target: {
                    value: "conv-1"
                }
            });
            _react1.fireEvent.click(_react1.screen.getByText("Extract Beliefs"));
            await (0, _react1.waitFor)(()=>{
                expect(mockToast).toHaveBeenCalledWith({
                    title: "Error",
                    description: "Failed to extract beliefs: Extraction failed",
                    variant: "destructive"
                });
            });
        });
        test("handles conversation selection edge cases", ()=>{
            const conversationHistory = [
                createMockConversation("conv-1", {
                    title: "First Conversation"
                }),
                createMockConversation("conv-2", {
                    title: "Second Conversation"
                })
            ];
            renderMemoryViewer({
                conversationHistory
            });
            _react1.fireEvent.click(_react1.screen.getByText("Inference"));
            const conversationSelect = _react1.screen.getByDisplayValue("Select a conversation...");
            // Should have all conversations as options
            _react1.fireEvent.change(conversationSelect, {
                target: {
                    value: "conv-2"
                }
            });
            expect(_react1.screen.getByDisplayValue("Second Conversation")).toBeInTheDocument();
        });
    });
    describe("Knowledge Node Selection Deep Testing", ()=>{
        test("handles knowledge node selection from global graph", ()=>{
            const selectedKnowledgeNode = {
                type: "entry",
                id: "knowledge-1",
                title: "Selected Knowledge"
            };
            renderMemoryViewer({
                selectedKnowledgeNode
            });
            expect(_react1.screen.getByText("Knowledge Node Selection")).toBeInTheDocument();
            expect(_react1.screen.getByText("Selected Knowledge")).toBeInTheDocument();
        });
        test("handles tag node selection from global graph", ()=>{
            const selectedKnowledgeNode = {
                type: "tag",
                id: "science",
                title: "Science Tag"
            };
            renderMemoryViewer({
                selectedKnowledgeNode
            });
            expect(_react1.screen.getByText("Knowledge Node Selection")).toBeInTheDocument();
            expect(_react1.screen.getByText("Science Tag")).toBeInTheDocument();
        });
        test("handles clearing knowledge node selection", ()=>{
            const selectedKnowledgeNode = {
                type: "entry",
                id: "knowledge-1",
                title: "Selected Knowledge"
            };
            renderMemoryViewer({
                selectedKnowledgeNode
            });
            _react1.fireEvent.click(_react1.screen.getByText("Back"));
            expect(mockOnClearSelectedKnowledgeNode).toHaveBeenCalled();
        });
    });
    describe("Agent Selection and State Reset", ()=>{
        test("handles agent switching and state reset", ()=>{
            const { rerender } = renderMemoryViewer();
            // Go to knowledge tab and select an item
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge knowledge-1"));
            // Switch to different agent
            const newAgent = createMockAgent("agent-2");
            rerender(/*#__PURE__*/ (0, _jsxruntime.jsx)(_memoryviewer.default, {
                selectedAgent: newAgent,
                conversationHistory: [
                    baseConversation
                ],
                agents: [
                    baseAgent,
                    newAgent
                ],
                onAddKnowledge: mockOnAddKnowledge,
                onUpdateAgent: mockOnUpdateAgent,
                onDeleteKnowledge: mockOnDeleteKnowledge,
                onUpdateKnowledge: mockOnUpdateKnowledge,
                selectedKnowledgeNode: null,
                onClearSelectedKnowledgeNode: mockOnClearSelectedKnowledgeNode,
                onSelectAgent: mockOnSelectAgent
            }));
            // Should show new agent's biography
            expect(_react1.screen.getByDisplayValue("Biography for agent agent-2")).toBeInTheDocument();
        });
        test("handles null agent gracefully", ()=>{
            renderMemoryViewer({
                selectedAgent: null
            });
            expect(_react1.screen.getByText("Select an agent to view their memory")).toBeInTheDocument();
        });
    });
    describe("Data Export Deep Testing", ()=>{
        test("handles knowledge export workflow", async ()=>{
            const { exportAgentKnowledge } = _globals.jest.requireMock("@/lib/knowledge-export");
            exportAgentKnowledge.mockResolvedValue("exported-data");
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            _react1.fireEvent.click(_react1.screen.getByText("Export Knowledge"));
            await (0, _react1.waitFor)(()=>{
                expect(exportAgentKnowledge).toHaveBeenCalledWith(baseAgent);
            });
            expect(mockToast).toHaveBeenCalledWith({
                title: "Success",
                description: "Knowledge exported successfully"
            });
        });
        test("handles export errors", async ()=>{
            const { exportAgentKnowledge } = _globals.jest.requireMock("@/lib/knowledge-export");
            exportAgentKnowledge.mockRejectedValue(new Error("Export failed"));
            renderMemoryViewer();
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            _react1.fireEvent.click(_react1.screen.getByText("Export Knowledge"));
            await (0, _react1.waitFor)(()=>{
                expect(mockToast).toHaveBeenCalledWith({
                    title: "Error",
                    description: "Failed to export knowledge: Export failed",
                    variant: "destructive"
                });
            });
        });
    });
    describe("Performance and Edge Cases", ()=>{
        test("handles large knowledge datasets efficiently", ()=>{
            const largeKnowledgeSet = Array.from({
                length: 500
            }, (_, i)=>createMockKnowledgeEntry(`knowledge-${i}`, {
                    title: `Knowledge ${i}`,
                    content: `Content ${i}`,
                    tags: [
                        `tag-${i % 10}`,
                        "common"
                    ]
                }));
            const agentWithLargeKnowledge = createMockAgent("agent-1", {
                knowledge: largeKnowledgeSet
            });
            const startTime = Date.now();
            renderMemoryViewer({
                selectedAgent: agentWithLargeKnowledge
            });
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(1000);
            // Test search performance
            _react1.fireEvent.click(_react1.screen.getByText("Knowledge"));
            const searchInput = _react1.screen.getByPlaceholderText("Search knowledge...");
            _react1.fireEvent.change(searchInput, {
                target: {
                    value: "Knowledge 100"
                }
            });
            expect(_react1.screen.getByText("Knowledge 100")).toBeInTheDocument();
        });
        test("handles malformed data gracefully", ()=>{
            const malformedAgent = {
                id: "malformed",
                name: "Malformed Agent",
                biography: "",
                knowledge: [
                    {
                        title: "Malformed Knowledge"
                    }
                ]
            };
            expect(()=>{
                renderMemoryViewer({
                    selectedAgent: malformedAgent
                });
            }).not.toThrow();
        });
        test("handles missing dependencies gracefully", ()=>{
            const agentWithoutPermissions = {
                ...baseAgent,
                toolPermissions: null
            };
            renderMemoryViewer({
                selectedAgent: agentWithoutPermissions
            });
            _react1.fireEvent.click(_react1.screen.getByText("Tools"));
            // Should use default permissions
            expect(_react1.screen.getByText("Information Access Tools")).toBeInTheDocument();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0aGV3bW9yb25leS9idWlsZHMvRnJlZUFnZW50aWNzL3dlYi9fX3Rlc3RzX18vY29tcG9uZW50cy9tZW1vcnl2aWV3ZXItZGVlcC1pbnRlcmFjdGlvbnMudGVzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQSEFTRSAyOiBERUVQIENPTVBPTkVOVCBJTlRFUkFDVElPTiBURVNUUyAtIE1FTU9SWVZJRVdFUlxuICpcbiAqIFRhcmdldDogY29tcG9uZW50cy9tZW1vcnl2aWV3ZXIudHN4ICgyLDI3MiBsaW5lcylcbiAqIFN0cmF0ZWd5OiBUZXN0IEFMTCBjb21wb25lbnQgaW50ZXJhY3Rpb25zLCBzdGF0ZSBjaGFuZ2VzLCBhbmQgYnVzaW5lc3MgbG9naWNcbiAqIEdvYWw6IFB1c2ggY292ZXJhZ2UgZnJvbSA2LjQyJSB0byAxNSUrIGJ5IHRlc3RpbmcgdGhlIGxhcmdlc3QgY29tcG9uZW50IHRob3JvdWdobHlcbiAqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQge1xuICByZW5kZXIsXG4gIHNjcmVlbixcbiAgZmlyZUV2ZW50LFxuICB3YWl0Rm9yLFxuICBhY3QsXG59IGZyb20gXCJAdGVzdGluZy1saWJyYXJ5L3JlYWN0XCI7XG5pbXBvcnQgeyBqZXN0IH0gZnJvbSBcIkBqZXN0L2dsb2JhbHNcIjtcbmltcG9ydCBNZW1vcnlWaWV3ZXIsIHtcbiAgdHlwZSBBZ2VudFRvb2xQZXJtaXNzaW9ucyxcbn0gZnJvbSBcIkAvY29tcG9uZW50cy9tZW1vcnl2aWV3ZXJcIjtcbmltcG9ydCB0eXBlIHsgQWdlbnQsIENvbnZlcnNhdGlvbiwgS25vd2xlZGdlRW50cnkgfSBmcm9tIFwiQC9saWIvdHlwZXNcIjtcblxuLy8gQ29tcGxldGUgbW9jayBzZXR1cCBmb3IgYWxsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKFwiQC9ob29rcy91c2UtdG9hc3RcIiwgKCkgPT4gKHtcbiAgdXNlVG9hc3Q6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9jb250ZXh0cy9sbG0tY29udGV4dFwiLCAoKSA9PiAoe1xuICB1c2VMTE06IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9saWIvdXRpbHNcIiwgKCkgPT4gKHtcbiAgZm9ybWF0VGltZXN0YW1wOiBqZXN0LmZuKChkYXRlKSA9PiBkYXRlLnRvSVNPU3RyaW5nKCkpLFxuICBleHRyYWN0VGFnc0Zyb21NYXJrZG93bjogamVzdC5mbigoY29udGVudCkgPT4gY29udGVudC5tYXRjaCgvIyhcXHcrKS9nKSB8fCBbXSksXG4gIGNuOiBqZXN0LmZuKCguLi5hcmdzKSA9PiBhcmdzLmZpbHRlcihCb29sZWFuKS5qb2luKFwiIFwiKSksXG59KSk7XG5cbmplc3QubW9jayhcIkAvbGliL2JlbGllZi1leHRyYWN0aW9uXCIsICgpID0+ICh7XG4gIHBhcnNlQmVsaWVmczogamVzdC5mbigpLFxuICBwYXJzZVJlZmluZWRCZWxpZWZzOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jayhcIkAvbGliL2tub3dsZWRnZS1leHBvcnRcIiwgKCkgPT4gKHtcbiAgZXhwb3J0QWdlbnRLbm93bGVkZ2U6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9saWIvZGVidWctbG9nZ2VyXCIsICgpID0+ICh7XG4gIGRlYnVnTG9nOiBqZXN0LmZuKCksXG4gIGNyZWF0ZUxvZ2dlcjogamVzdC5mbigoKSA9PiAoe1xuICAgIGxvZzogamVzdC5mbigpLFxuICAgIGluZm86IGplc3QuZm4oKSxcbiAgICB3YXJuOiBqZXN0LmZuKCksXG4gICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgfSkpLFxufSkpO1xuXG4vLyBNb2NrIGFsbCBVSSBjb21wb25lbnRzIHRvIGZvY3VzIG9uIGxvZ2ljXG5qZXN0Lm1vY2soXCJAL2NvbXBvbmVudHMvdWkvYnV0dG9uXCIsICgpID0+ICh7XG4gIEJ1dHRvbjogKHsgY2hpbGRyZW4sIG9uQ2xpY2ssIHZhcmlhbnQsIGRpc2FibGVkLCAuLi5wcm9wcyB9OiBhbnkpID0+IChcbiAgICA8YnV0dG9uXG4gICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgZGF0YS12YXJpYW50PXt2YXJpYW50fVxuICAgICAgey4uLnByb3BzfVxuICAgID5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L2J1dHRvbj5cbiAgKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9jb21wb25lbnRzL3VpL3RleHRhcmVhXCIsICgpID0+ICh7XG4gIFRleHRhcmVhOiAoeyB2YWx1ZSwgb25DaGFuZ2UsIHBsYWNlaG9sZGVyLCBkaXNhYmxlZCwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPHRleHRhcmVhXG4gICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICBvbkNoYW5nZT17b25DaGFuZ2V9XG4gICAgICBwbGFjZWhvbGRlcj17cGxhY2Vob2xkZXJ9XG4gICAgICBkaXNhYmxlZD17ZGlzYWJsZWR9XG4gICAgICB7Li4ucHJvcHN9XG4gICAgLz5cbiAgKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9jb21wb25lbnRzL3VpL2NhcmRcIiwgKCkgPT4gKHtcbiAgQ2FyZDogKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0gey4uLnByb3BzfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKSxcbiAgQ2FyZENvbnRlbnQ6ICh7IGNoaWxkcmVuLCBjbGFzc05hbWUsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9IHsuLi5wcm9wc30+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICksXG4gIENhcmRIZWFkZXI6ICh7IGNoaWxkcmVuLCBjbGFzc05hbWUsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9IHsuLi5wcm9wc30+XG4gICAgICB7Y2hpbGRyZW59XG4gICAgPC9kaXY+XG4gICksXG4gIENhcmRUaXRsZTogKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPGgzIGNsYXNzTmFtZT17Y2xhc3NOYW1lfSB7Li4ucHJvcHN9PlxuICAgICAge2NoaWxkcmVufVxuICAgIDwvaDM+XG4gICksXG59KSk7XG5cbmplc3QubW9jayhcIkAvY29tcG9uZW50cy91aS9zZWxlY3RcIiwgKCkgPT4gKHtcbiAgU2VsZWN0OiAoeyBjaGlsZHJlbiwgdmFsdWUsIG9uVmFsdWVDaGFuZ2UsIC4uLnByb3BzIH06IGFueSkgPT4gKFxuICAgIDxkaXYgZGF0YS10ZXN0aWQ9XCJzZWxlY3QtY29udGFpbmVyXCIgey4uLnByb3BzfT5cbiAgICAgIDxzZWxlY3QgdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17KGUpID0+IG9uVmFsdWVDaGFuZ2U/LihlLnRhcmdldC52YWx1ZSl9PlxuICAgICAgICB7Y2hpbGRyZW59XG4gICAgICA8L3NlbGVjdD5cbiAgICA8L2Rpdj5cbiAgKSxcbiAgU2VsZWN0Q29udGVudDogKHsgY2hpbGRyZW4gfTogYW55KSA9PiA8PntjaGlsZHJlbn08Lz4sXG4gIFNlbGVjdEl0ZW06ICh7IHZhbHVlLCBjaGlsZHJlbiB9OiBhbnkpID0+IChcbiAgICA8b3B0aW9uIHZhbHVlPXt2YWx1ZX0+e2NoaWxkcmVufTwvb3B0aW9uPlxuICApLFxuICBTZWxlY3RUcmlnZ2VyOiAoeyBjaGlsZHJlbiB9OiBhbnkpID0+IChcbiAgICA8ZGl2IGRhdGEtdGVzdGlkPVwic2VsZWN0LXRyaWdnZXJcIj57Y2hpbGRyZW59PC9kaXY+XG4gICksXG4gIFNlbGVjdFZhbHVlOiAoeyBwbGFjZWhvbGRlciB9OiBhbnkpID0+IDxzcGFuPntwbGFjZWhvbGRlcn08L3NwYW4+LFxufSkpO1xuXG5qZXN0Lm1vY2soXCJAL2NvbXBvbmVudHMvdWkvc2Nyb2xsLWFyZWFcIiwgKCkgPT4gKHtcbiAgU2Nyb2xsQXJlYTogKHsgY2hpbGRyZW4sIGNsYXNzTmFtZSwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0gey4uLnByb3BzfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L2Rpdj5cbiAgKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9jb21wb25lbnRzL3VpL2lucHV0XCIsICgpID0+ICh7XG4gIElucHV0OiAoeyB2YWx1ZSwgb25DaGFuZ2UsIHBsYWNlaG9sZGVyLCB0eXBlLCBkaXNhYmxlZCwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPGlucHV0XG4gICAgICB0eXBlPXt0eXBlIHx8IFwidGV4dFwifVxuICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgb25DaGFuZ2U9e29uQ2hhbmdlfVxuICAgICAgcGxhY2Vob2xkZXI9e3BsYWNlaG9sZGVyfVxuICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgey4uLnByb3BzfVxuICAgIC8+XG4gICksXG59KSk7XG5cbmplc3QubW9jayhcIkAvY29tcG9uZW50cy91aS9iYWRnZVwiLCAoKSA9PiAoe1xuICBCYWRnZTogKHsgY2hpbGRyZW4sIHZhcmlhbnQsIGNsYXNzTmFtZSwgLi4ucHJvcHMgfTogYW55KSA9PiAoXG4gICAgPHNwYW4gY2xhc3NOYW1lPXtjbGFzc05hbWV9IGRhdGEtdmFyaWFudD17dmFyaWFudH0gey4uLnByb3BzfT5cbiAgICAgIHtjaGlsZHJlbn1cbiAgICA8L3NwYW4+XG4gICksXG59KSk7XG5cbi8vIE1vY2sgZGF0YSBzdHJ1Y3R1cmVzXG5jb25zdCBjcmVhdGVNb2NrS25vd2xlZGdlRW50cnkgPSAoXG4gIGlkOiBzdHJpbmcsXG4gIG92ZXJyaWRlczogUGFydGlhbDxLbm93bGVkZ2VFbnRyeT4gPSB7fSxcbik6IEtub3dsZWRnZUVudHJ5ID0+ICh7XG4gIGlkLFxuICB0aXRsZTogYEtub3dsZWRnZSAke2lkfWAsXG4gIGNvbnRlbnQ6IGBDb250ZW50IGZvciBrbm93bGVkZ2UgJHtpZH1gLFxuICBzb3VyY2U6IFwidXNlclwiLFxuICB0aW1lc3RhbXA6IG5ldyBEYXRlKFwiMjAyMy0wMS0wMVQxMjowMDowMFpcIiksXG4gIHRhZ3M6IFtcInRhZzFcIiwgXCJ0YWcyXCJdLFxuICBtZXRhZGF0YToge30sXG4gIC4uLm92ZXJyaWRlcyxcbn0pO1xuXG5jb25zdCBjcmVhdGVNb2NrQWdlbnQgPSAoXG4gIGlkOiBzdHJpbmcsXG4gIG92ZXJyaWRlczogUGFydGlhbDxBZ2VudD4gPSB7fSxcbik6IEFnZW50ID0+ICh7XG4gIGlkLFxuICBuYW1lOiBgQWdlbnQgJHtpZH1gLFxuICBiaW9ncmFwaHk6IGBCaW9ncmFwaHkgZm9yIGFnZW50ICR7aWR9YCxcbiAgY29sb3I6IFwiI2ZmMDAwMFwiLFxuICBwb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sXG4gIGtub3dsZWRnZTogW2NyZWF0ZU1vY2tLbm93bGVkZ2VFbnRyeShga25vd2xlZGdlLSR7aWR9YCldLFxuICB0b29sUGVybWlzc2lvbnM6IHtcbiAgICBpbnRlcm5ldFNlYXJjaDogdHJ1ZSxcbiAgICB3ZWJTY3JhcGluZzogZmFsc2UsXG4gICAgd2lraXBlZGlhQWNjZXNzOiB0cnVlLFxuICAgIG5ld3NBcGk6IGZhbHNlLFxuICAgIGFjYWRlbWljU2VhcmNoOiB0cnVlLFxuICAgIGRvY3VtZW50UmV0cmlldmFsOiBmYWxzZSxcbiAgICBpbWFnZUdlbmVyYXRpb246IGZhbHNlLFxuICAgIHRleHRTdW1tYXJpemF0aW9uOiB0cnVlLFxuICAgIHRyYW5zbGF0aW9uOiBmYWxzZSxcbiAgICBjb2RlRXhlY3V0aW9uOiBmYWxzZSxcbiAgICBjYWxjdWxhdG9yOiB0cnVlLFxuICAgIGtub3dsZWRnZUdyYXBoUXVlcnk6IGZhbHNlLFxuICAgIGZhY3RDaGVja2luZzogdHJ1ZSxcbiAgICB0aW1lbGluZUdlbmVyYXRvcjogZmFsc2UsXG4gICAgd2VhdGhlckRhdGE6IGZhbHNlLFxuICAgIG1hcExvY2F0aW9uRGF0YTogZmFsc2UsXG4gICAgZmluYW5jaWFsRGF0YTogZmFsc2UsXG4gICAgcHVibGljRGF0YXNldHM6IGZhbHNlLFxuICAgIG1lbW9yeVNlYXJjaDogdHJ1ZSxcbiAgICBjcm9zc0FnZW50S25vd2xlZGdlOiBmYWxzZSxcbiAgICBjb252ZXJzYXRpb25BbmFseXNpczogdHJ1ZSxcbiAgfSxcbiAgYXV0b25vbXlFbmFibGVkOiB0cnVlLFxuICBpbkNvbnZlcnNhdGlvbjogZmFsc2UsXG4gIC4uLm92ZXJyaWRlcyxcbn0pO1xuXG5jb25zdCBjcmVhdGVNb2NrQ29udmVyc2F0aW9uID0gKFxuICBpZDogc3RyaW5nLFxuICBvdmVycmlkZXM6IFBhcnRpYWw8Q29udmVyc2F0aW9uPiA9IHt9LFxuKTogQ29udmVyc2F0aW9uID0+ICh7XG4gIGlkLFxuICBwYXJ0aWNpcGFudHM6IFtcImFnZW50LTFcIl0sXG4gIG1lc3NhZ2VzOiBbXG4gICAge1xuICAgICAgaWQ6IGBtc2ctJHtpZH0tMWAsXG4gICAgICBjb252ZXJzYXRpb25JZDogaWQsXG4gICAgICBzZW5kZXJJZDogXCJhZ2VudC0xXCIsXG4gICAgICBjb250ZW50OiBgTWVzc2FnZSBjb250ZW50IGZvciBjb252ZXJzYXRpb24gJHtpZH1gLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZShcIjIwMjMtMDEtMDFUMTI6MDA6MDBaXCIpLFxuICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICBtZXRhZGF0YToge30sXG4gICAgfSxcbiAgXSxcbiAgY3JlYXRlZEF0OiBuZXcgRGF0ZShcIjIwMjMtMDEtMDFUMTI6MDA6MDBaXCIpLFxuICB1cGRhdGVkQXQ6IG5ldyBEYXRlKFwiMjAyMy0wMS0wMVQxMjowMDowMFpcIiksXG4gIHRpdGxlOiBgQ29udmVyc2F0aW9uICR7aWR9YCxcbiAgbWV0YWRhdGE6IHt9LFxuICAuLi5vdmVycmlkZXMsXG59KTtcblxuZGVzY3JpYmUoXCJNZW1vcnlWaWV3ZXIgLSBEZWVwIENvbXBvbmVudCBJbnRlcmFjdGlvbnNcIiwgKCkgPT4ge1xuICBsZXQgbW9ja1RvYXN0OiBqZXN0Lk1vY2s7XG4gIGxldCBtb2NrVXNlTExNOiBqZXN0Lk1vY2s7XG4gIGxldCBtb2NrT25BZGRLbm93bGVkZ2U6IGplc3QuTW9jaztcbiAgbGV0IG1vY2tPblVwZGF0ZUFnZW50OiBqZXN0Lk1vY2s7XG4gIGxldCBtb2NrT25EZWxldGVLbm93bGVkZ2U6IGplc3QuTW9jaztcbiAgbGV0IG1vY2tPblVwZGF0ZUtub3dsZWRnZTogamVzdC5Nb2NrO1xuICBsZXQgbW9ja09uQ2xlYXJTZWxlY3RlZEtub3dsZWRnZU5vZGU6IGplc3QuTW9jaztcbiAgbGV0IG1vY2tPblNlbGVjdEFnZW50OiBqZXN0Lk1vY2s7XG5cbiAgY29uc3QgYmFzZUFnZW50ID0gY3JlYXRlTW9ja0FnZW50KFwiYWdlbnQtMVwiKTtcbiAgY29uc3QgYmFzZUNvbnZlcnNhdGlvbiA9IGNyZWF0ZU1vY2tDb252ZXJzYXRpb24oXCJjb252LTFcIik7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG5cbiAgICBtb2NrVG9hc3QgPSBqZXN0LmZuKCk7XG4gICAgbW9ja1VzZUxMTSA9IGplc3QuZm4oKCkgPT4gKHtcbiAgICAgIGlzUHJvY2Vzc2luZzogZmFsc2UsXG4gICAgICBzZXRJc1Byb2Nlc3Npbmc6IGplc3QuZm4oKSxcbiAgICAgIGdlbmVyYXRlUmVzcG9uc2U6IGplc3QuZm4oKSxcbiAgICAgIGV4dHJhY3RCZWxpZWZzOiBqZXN0LmZuKCksXG4gICAgICBnZW5lcmF0ZUtub3dsZWRnZUVudHJpZXM6IGplc3QuZm4oKSxcbiAgICAgIGxsbUNsaWVudDogbnVsbCxcbiAgICB9KSk7XG5cbiAgICBtb2NrT25BZGRLbm93bGVkZ2UgPSBqZXN0LmZuKCk7XG4gICAgbW9ja09uVXBkYXRlQWdlbnQgPSBqZXN0LmZuKCk7XG4gICAgbW9ja09uRGVsZXRlS25vd2xlZGdlID0gamVzdC5mbigpO1xuICAgIG1vY2tPblVwZGF0ZUtub3dsZWRnZSA9IGplc3QuZm4oKTtcbiAgICBtb2NrT25DbGVhclNlbGVjdGVkS25vd2xlZGdlTm9kZSA9IGplc3QuZm4oKTtcbiAgICBtb2NrT25TZWxlY3RBZ2VudCA9IGplc3QuZm4oKTtcblxuICAgIC8vIFNldHVwIG1vY2tzXG4gICAgY29uc3QgeyB1c2VUb2FzdCB9ID0gamVzdC5yZXF1aXJlTW9jayhcIkAvaG9va3MvdXNlLXRvYXN0XCIpO1xuICAgIGNvbnN0IHsgdXNlTExNIH0gPSBqZXN0LnJlcXVpcmVNb2NrKFwiQC9jb250ZXh0cy9sbG0tY29udGV4dFwiKTtcbiAgICBjb25zdCB7IGZvcm1hdFRpbWVzdGFtcCwgZXh0cmFjdFRhZ3NGcm9tTWFya2Rvd24gfSA9XG4gICAgICBqZXN0LnJlcXVpcmVNb2NrKFwiQC9saWIvdXRpbHNcIik7XG5cbiAgICB1c2VUb2FzdC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgdG9hc3Q6IG1vY2tUb2FzdCxcbiAgICAgIGRpc21pc3M6IGplc3QuZm4oKSxcbiAgICAgIHRvYXN0czogW10sXG4gICAgfSk7XG5cbiAgICB1c2VMTE0ubW9ja0ltcGxlbWVudGF0aW9uKG1vY2tVc2VMTE0pO1xuICAgIGZvcm1hdFRpbWVzdGFtcC5tb2NrSW1wbGVtZW50YXRpb24oKGRhdGUpID0+IGRhdGUudG9JU09TdHJpbmcoKSk7XG4gICAgZXh0cmFjdFRhZ3NGcm9tTWFya2Rvd24ubW9ja0ltcGxlbWVudGF0aW9uKFxuICAgICAgKGNvbnRlbnQpID0+IGNvbnRlbnQubWF0Y2goLyMoXFx3KykvZykgfHwgW10sXG4gICAgKTtcbiAgfSk7XG5cbiAgY29uc3QgcmVuZGVyTWVtb3J5Vmlld2VyID0gKFxuICAgIHByb3BzOiBQYXJ0aWFsPFJlYWN0LkNvbXBvbmVudFByb3BzPHR5cGVvZiBNZW1vcnlWaWV3ZXI+PiA9IHt9LFxuICApID0+IHtcbiAgICBjb25zdCBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICBzZWxlY3RlZEFnZW50OiBiYXNlQWdlbnQsXG4gICAgICBjb252ZXJzYXRpb25IaXN0b3J5OiBbYmFzZUNvbnZlcnNhdGlvbl0sXG4gICAgICBhZ2VudHM6IFtiYXNlQWdlbnRdLFxuICAgICAgb25BZGRLbm93bGVkZ2U6IG1vY2tPbkFkZEtub3dsZWRnZSxcbiAgICAgIG9uVXBkYXRlQWdlbnQ6IG1vY2tPblVwZGF0ZUFnZW50LFxuICAgICAgb25EZWxldGVLbm93bGVkZ2U6IG1vY2tPbkRlbGV0ZUtub3dsZWRnZSxcbiAgICAgIG9uVXBkYXRlS25vd2xlZGdlOiBtb2NrT25VcGRhdGVLbm93bGVkZ2UsXG4gICAgICBzZWxlY3RlZEtub3dsZWRnZU5vZGU6IG51bGwsXG4gICAgICBvbkNsZWFyU2VsZWN0ZWRLbm93bGVkZ2VOb2RlOiBtb2NrT25DbGVhclNlbGVjdGVkS25vd2xlZGdlTm9kZSxcbiAgICAgIG9uU2VsZWN0QWdlbnQ6IG1vY2tPblNlbGVjdEFnZW50LFxuICAgICAgLi4ucHJvcHMsXG4gICAgfTtcblxuICAgIHJldHVybiByZW5kZXIoPE1lbW9yeVZpZXdlciB7Li4uZGVmYXVsdFByb3BzfSAvPik7XG4gIH07XG5cbiAgZGVzY3JpYmUoXCJDb21wb25lbnQgU3RhdGUgTWFuYWdlbWVudFwiLCAoKSA9PiB7XG4gICAgdGVzdChcIm1hbmFnZXMgdGFiIG5hdmlnYXRpb24gc3RhdGUgY29ycmVjdGx5XCIsICgpID0+IHtcbiAgICAgIHJlbmRlck1lbW9yeVZpZXdlcigpO1xuXG4gICAgICAvLyBTaG91bGQgc3RhcnQgd2l0aCBCaW9ncmFwaHkgdGFiXG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZShcIkJpb2dyYXBoeSBmb3IgYWdlbnQgYWdlbnQtMVwiKSxcbiAgICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgICAgLy8gTmF2aWdhdGUgdG8gS25vd2xlZGdlIHRhYlxuICAgICAgY29uc3Qga25vd2xlZGdlVGFiID0gc2NyZWVuLmdldEJ5VGV4dChcIktub3dsZWRnZVwiKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhrbm93bGVkZ2VUYWIpO1xuXG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIktub3dsZWRnZSBhZ2VudC0xXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcIm1hbmFnZXMga25vd2xlZGdlIHZpZXcgc3RhdGUgdHJhbnNpdGlvbnNcIiwgKCkgPT4ge1xuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKCk7XG5cbiAgICAgIC8vIE5hdmlnYXRlIHRvIGtub3dsZWRnZSB0YWJcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlXCIpKTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cga25vd2xlZGdlIGxpc3QgYnkgZGVmYXVsdFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2UgYWdlbnQtMVwiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcblxuICAgICAgLy8gU3dpdGNoIHRvIEFkZCB0YWJcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiQWRkXCIpKTtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KFwiS25vd2xlZGdlIHRpdGxlLi4uXCIpLFxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuXG4gICAgICAvLyBHbyBiYWNrIHRvIExpc3QgdGFiXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIkxpc3RcIikpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2UgYWdlbnQtMVwiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJtYW5hZ2VzIHRvb2wgcGVybWlzc2lvbnMgZWRpdGluZyBzdGF0ZVwiLCAoKSA9PiB7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgLy8gTmF2aWdhdGUgdG8gVG9vbHMgdGFiXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIlRvb2xzXCIpKTtcblxuICAgICAgLy8gQ2hlY2sgaW5pdGlhbCBzdGF0ZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJJbmZvcm1hdGlvbiBBY2Nlc3MgVG9vbHNcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIC8vIFRvZ2dsZSBhIHBlcm1pc3Npb25cbiAgICAgIGNvbnN0IGludGVybmV0U2VhcmNoVG9nZ2xlID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KFwiSW50ZXJuZXQgU2VhcmNoXCIpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGludGVybmV0U2VhcmNoVG9nZ2xlKTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgdW5zYXZlZCBjaGFuZ2VzIGluZGljYXRvclxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJVbnNhdmVkIENoYW5nZXNcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwibWFuYWdlcyBiZWxpZWYgZXh0cmFjdGlvbiB3b3JrZmxvdyBzdGF0ZVwiLCAoKSA9PiB7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgLy8gTmF2aWdhdGUgdG8gSW5mZXJlbmNlIHRhYlxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJJbmZlcmVuY2VcIikpO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRleHQoXCJFeHRyYWN0IEJlbGllZnMgZnJvbSBDb252ZXJzYXRpb25cIiksXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG5cbiAgICAgIC8vIFNlbGVjdCBhIGNvbnZlcnNhdGlvblxuICAgICAgY29uc3QgY29udmVyc2F0aW9uU2VsZWN0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKFxuICAgICAgICBcIlNlbGVjdCBhIGNvbnZlcnNhdGlvbi4uLlwiLFxuICAgICAgKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29udmVyc2F0aW9uU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJjb252LTFcIiB9IH0pO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZShcIkNvbnZlcnNhdGlvbiBjb252LTFcIiksXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiQmlvZ3JhcGh5IE1hbmFnZW1lbnQgRGVlcCBUZXN0aW5nXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiaGFuZGxlcyBiaW9ncmFwaHkgZWRpdGluZyB3b3JrZmxvdyBjb21wbGV0ZWx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlck1lbW9yeVZpZXdlcigpO1xuXG4gICAgICBjb25zdCBiaW9ncmFwaHlUZXh0YXJlYSA9IHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZShcbiAgICAgICAgXCJCaW9ncmFwaHkgZm9yIGFnZW50IGFnZW50LTFcIixcbiAgICAgICk7XG5cbiAgICAgIC8vIFRlc3QgZWRpdGluZ1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShiaW9ncmFwaHlUZXh0YXJlYSwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6IFwiTmV3IGJpb2dyYXBoeSBjb250ZW50XCIgfSxcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGJpb2dyYXBoeVRleHRhcmVhKS50b0hhdmVWYWx1ZShcIk5ldyBiaW9ncmFwaHkgY29udGVudFwiKTtcblxuICAgICAgLy8gVGVzdCBzYXZpbmdcbiAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KFwiU2F2ZSBCaW9ncmFwaHlcIik7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja09uVXBkYXRlQWdlbnQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiYWdlbnQtMVwiLCB7XG4gICAgICAgICAgYmlvZ3JhcGh5OiBcIk5ldyBiaW9ncmFwaHkgY29udGVudFwiLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQmlvZ3JhcGh5IHNhdmVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyBiaW9ncmFwaHkgc2F2ZSBlcnJvcnMgZ3JhY2VmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrT25VcGRhdGVBZ2VudC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoXCJTYXZlIGZhaWxlZFwiKSk7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgY29uc3QgYmlvZ3JhcGh5VGV4dGFyZWEgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoXG4gICAgICAgIFwiQmlvZ3JhcGh5IGZvciBhZ2VudCBhZ2VudC0xXCIsXG4gICAgICApO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShiaW9ncmFwaHlUZXh0YXJlYSwgeyB0YXJnZXQ6IHsgdmFsdWU6IFwiTmV3IGNvbnRlbnRcIiB9IH0pO1xuXG4gICAgICBjb25zdCBzYXZlQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dChcIlNhdmUgQmlvZ3JhcGh5XCIpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNhdmVCdXR0b24pO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tUb2FzdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IFwiRmFpbGVkIHRvIHNhdmUgYmlvZ3JhcGh5OiBTYXZlIGZhaWxlZFwiLFxuICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJkaXNhYmxlcyBzYXZlIGJ1dHRvbiB3aGVuIG5vIGNoYW5nZXMgbWFkZVwiLCAoKSA9PiB7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoXCJTYXZlIEJpb2dyYXBoeVwiKTtcbiAgICAgIGV4cGVjdChzYXZlQnV0dG9uKS50b0JlRGlzYWJsZWQoKTtcblxuICAgICAgLy8gTWFrZSBhIGNoYW5nZVxuICAgICAgY29uc3QgYmlvZ3JhcGh5VGV4dGFyZWEgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoXG4gICAgICAgIFwiQmlvZ3JhcGh5IGZvciBhZ2VudCBhZ2VudC0xXCIsXG4gICAgICApO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShiaW9ncmFwaHlUZXh0YXJlYSwgeyB0YXJnZXQ6IHsgdmFsdWU6IFwiQ2hhbmdlZFwiIH0gfSk7XG5cbiAgICAgIGV4cGVjdChzYXZlQnV0dG9uKS5ub3QudG9CZURpc2FibGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiS25vd2xlZGdlIE1hbmFnZW1lbnQgRGVlcCBUZXN0aW5nXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiaGFuZGxlcyBrbm93bGVkZ2UgY3JlYXRpb24gd29ya2Zsb3cgY29tcGxldGVseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgLy8gTmF2aWdhdGUgdG8ga25vd2xlZGdlIGFuZCBhZGRcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlXCIpKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiQWRkXCIpKTtcblxuICAgICAgLy8gRmlsbCBmb3JtXG4gICAgICBjb25zdCB0aXRsZUlucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KFwiS25vd2xlZGdlIHRpdGxlLi4uXCIpO1xuICAgICAgY29uc3QgY29udGVudFRleHRhcmVhID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KFxuICAgICAgICBcIktub3dsZWRnZSBjb250ZW50Li4uXCIsXG4gICAgICApO1xuICAgICAgY29uc3QgdGFnc0lucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KFxuICAgICAgICBcIlRhZ3MgKGNvbW1hLXNlcGFyYXRlZCkuLi5cIixcbiAgICAgICk7XG5cbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UodGl0bGVJbnB1dCwge1xuICAgICAgICB0YXJnZXQ6IHsgdmFsdWU6IFwiTmV3IEtub3dsZWRnZSBUaXRsZVwiIH0sXG4gICAgICB9KTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29udGVudFRleHRhcmVhLCB7XG4gICAgICAgIHRhcmdldDogeyB2YWx1ZTogXCJOZXcga25vd2xlZGdlIGNvbnRlbnRcIiB9LFxuICAgICAgfSk7XG4gICAgICBmaXJlRXZlbnQuY2hhbmdlKHRhZ3NJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6IFwidGFnMSwgdGFnMiwgdGFnM1wiIH0gfSk7XG5cbiAgICAgIC8vIFNhdmVcbiAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KFwiU2F2ZSBLbm93bGVkZ2VcIik7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2F2ZUJ1dHRvbik7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja09uQWRkS25vd2xlZGdlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBcImFnZW50LTFcIixcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICB0aXRsZTogXCJOZXcgS25vd2xlZGdlIFRpdGxlXCIsXG4gICAgICAgICAgICBjb250ZW50OiBcIk5ldyBrbm93bGVkZ2UgY29udGVudFwiLFxuICAgICAgICAgICAgdGFnczogW1widGFnMVwiLCBcInRhZzJcIiwgXCJ0YWczXCJdLFxuICAgICAgICAgICAgc291cmNlOiBcInVzZXJcIixcbiAgICAgICAgICB9KSxcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiS25vd2xlZGdlIHNhdmVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyBrbm93bGVkZ2UgZWRpdGluZyB3b3JrZmxvdyBjb21wbGV0ZWx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50V2l0aEtub3dsZWRnZSA9IGNyZWF0ZU1vY2tBZ2VudChcImFnZW50LTFcIiwge1xuICAgICAgICBrbm93bGVkZ2U6IFtcbiAgICAgICAgICBjcmVhdGVNb2NrS25vd2xlZGdlRW50cnkoXCJrbm93bGVkZ2UtMVwiLCB7XG4gICAgICAgICAgICB0aXRsZTogXCJFeGlzdGluZyBLbm93bGVkZ2VcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiRXhpc3RpbmcgY29udGVudFwiLFxuICAgICAgICAgICAgdGFnczogW1wiZXhpc3RpbmdcIiwgXCJ0YWdzXCJdLFxuICAgICAgICAgIH0pLFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlck1lbW9yeVZpZXdlcih7IHNlbGVjdGVkQWdlbnQ6IGFnZW50V2l0aEtub3dsZWRnZSB9KTtcblxuICAgICAgLy8gTmF2aWdhdGUgdG8ga25vd2xlZGdlXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIktub3dsZWRnZVwiKSk7XG5cbiAgICAgIC8vIFNlbGVjdCBrbm93bGVkZ2UgZW50cnlcbiAgICAgIGNvbnN0IGtub3dsZWRnZUl0ZW0gPSBzY3JlZW4uZ2V0QnlUZXh0KFwiRXhpc3RpbmcgS25vd2xlZGdlXCIpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGtub3dsZWRnZUl0ZW0pO1xuXG4gICAgICAvLyBFbnRlciBlZGl0IG1vZGVcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiRWRpdFwiKSk7XG5cbiAgICAgIC8vIEVkaXQgY29udGVudFxuICAgICAgY29uc3QgY29udGVudFRleHRhcmVhID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKFwiRXhpc3RpbmcgY29udGVudFwiKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29udGVudFRleHRhcmVhLCB7XG4gICAgICAgIHRhcmdldDogeyB2YWx1ZTogXCJVcGRhdGVkIGNvbnRlbnRcIiB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNhdmUgY2hhbmdlc1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJTYXZlXCIpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrT25VcGRhdGVLbm93bGVkZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIFwiYWdlbnQtMVwiLFxuICAgICAgICAgIFwia25vd2xlZGdlLTFcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb250ZW50OiBcIlVwZGF0ZWQgY29udGVudFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJoYW5kbGVzIGtub3dsZWRnZSBkZWxldGlvbiB3b3JrZmxvdyB3aXRoIGNvbmZpcm1hdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudFdpdGhLbm93bGVkZ2UgPSBjcmVhdGVNb2NrQWdlbnQoXCJhZ2VudC0xXCIsIHtcbiAgICAgICAga25vd2xlZGdlOiBbY3JlYXRlTW9ja0tub3dsZWRnZUVudHJ5KFwia25vd2xlZGdlLTFcIildLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlck1lbW9yeVZpZXdlcih7IHNlbGVjdGVkQWdlbnQ6IGFnZW50V2l0aEtub3dsZWRnZSB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2VcIikpO1xuXG4gICAgICAvLyBTZWxlY3QgYW5kIGRlbGV0ZVxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2Uga25vd2xlZGdlLTFcIikpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJEZWxldGVcIikpO1xuXG4gICAgICAvLyBDb25maXJtIGRlbGV0aW9uXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIkNvbmZpcm0gRGVsZXRlXCIpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrT25EZWxldGVLbm93bGVkZ2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIFwiYWdlbnQtMVwiLFxuICAgICAgICAgIFwia25vd2xlZGdlLTFcIixcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMga25vd2xlZGdlIHNlYXJjaCBmdW5jdGlvbmFsaXR5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50V2l0aE11bHRpcGxlS25vd2xlZGdlID0gY3JlYXRlTW9ja0FnZW50KFwiYWdlbnQtMVwiLCB7XG4gICAgICAgIGtub3dsZWRnZTogW1xuICAgICAgICAgIGNyZWF0ZU1vY2tLbm93bGVkZ2VFbnRyeShcImtub3dsZWRnZS0xXCIsIHtcbiAgICAgICAgICAgIHRpdGxlOiBcIkZpcnN0IEtub3dsZWRnZVwiLFxuICAgICAgICAgICAgY29udGVudDogXCJGaXJzdCBjb250ZW50XCIsXG4gICAgICAgICAgfSksXG4gICAgICAgICAgY3JlYXRlTW9ja0tub3dsZWRnZUVudHJ5KFwia25vd2xlZGdlLTJcIiwge1xuICAgICAgICAgICAgdGl0bGU6IFwiU2Vjb25kIEtub3dsZWRnZVwiLFxuICAgICAgICAgICAgY29udGVudDogXCJTZWNvbmQgY29udGVudFwiLFxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGNyZWF0ZU1vY2tLbm93bGVkZ2VFbnRyeShcImtub3dsZWRnZS0zXCIsIHtcbiAgICAgICAgICAgIHRpdGxlOiBcIlRoaXJkIEtub3dsZWRnZVwiLFxuICAgICAgICAgICAgY29udGVudDogXCJUaGlyZCBjb250ZW50XCIsXG4gICAgICAgICAgfSksXG4gICAgICAgIF0sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKHsgc2VsZWN0ZWRBZ2VudDogYWdlbnRXaXRoTXVsdGlwbGVLbm93bGVkZ2UgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlXCIpKTtcblxuICAgICAgLy8gU2VhcmNoIGZvciBzcGVjaWZpYyBrbm93bGVkZ2VcbiAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gc2NyZWVuLmdldEJ5UGxhY2Vob2xkZXJUZXh0KFwiU2VhcmNoIGtub3dsZWRnZS4uLlwiKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2Uoc2VhcmNoSW5wdXQsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcIkZpcnN0XCIgfSB9KTtcblxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJGaXJzdCBLbm93bGVkZ2VcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KFwiU2Vjb25kIEtub3dsZWRnZVwiKSkubm90LnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KFwiVGhpcmQgS25vd2xlZGdlXCIpKS5ub3QudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJoYW5kbGVzIGtub3dsZWRnZSB0YWcgZmlsdGVyaW5nXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50V2l0aFRhZ2dlZEtub3dsZWRnZSA9IGNyZWF0ZU1vY2tBZ2VudChcImFnZW50LTFcIiwge1xuICAgICAgICBrbm93bGVkZ2U6IFtcbiAgICAgICAgICBjcmVhdGVNb2NrS25vd2xlZGdlRW50cnkoXCJrbm93bGVkZ2UtMVwiLCB7XG4gICAgICAgICAgICB0YWdzOiBbXCJzY2llbmNlXCIsIFwicGh5c2ljc1wiXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjcmVhdGVNb2NrS25vd2xlZGdlRW50cnkoXCJrbm93bGVkZ2UtMlwiLCB7XG4gICAgICAgICAgICB0YWdzOiBbXCJtYXRoXCIsIFwiYWxnZWJyYVwiXSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjcmVhdGVNb2NrS25vd2xlZGdlRW50cnkoXCJrbm93bGVkZ2UtM1wiLCB7XG4gICAgICAgICAgICB0YWdzOiBbXCJzY2llbmNlXCIsIFwiY2hlbWlzdHJ5XCJdLFxuICAgICAgICAgIH0pLFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIHJlbmRlck1lbW9yeVZpZXdlcih7IHNlbGVjdGVkQWdlbnQ6IGFnZW50V2l0aFRhZ2dlZEtub3dsZWRnZSB9KTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2VcIikpO1xuXG4gICAgICAvLyBGaWx0ZXIgYnkgdGFnXG4gICAgICBjb25zdCB0YWdTZWxlY3QgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoXCJBbGwgVGFnc1wiKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UodGFnU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJzY2llbmNlXCIgfSB9KTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgb25seSBzY2llbmNlLXRhZ2dlZCBrbm93bGVkZ2VcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlIGtub3dsZWRnZS0xXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4ucXVlcnlCeVRleHQoXCJLbm93bGVkZ2Uga25vd2xlZGdlLTJcIiksXG4gICAgICApLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2Uga25vd2xlZGdlLTNcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiVG9vbCBQZXJtaXNzaW9ucyBEZWVwIFRlc3RpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJoYW5kbGVzIGNvbXByZWhlbnNpdmUgdG9vbCBwZXJtaXNzaW9uIHVwZGF0ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKCk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiVG9vbHNcIikpO1xuXG4gICAgICAvLyBUb2dnbGUgbXVsdGlwbGUgcGVybWlzc2lvbnNcbiAgICAgIGNvbnN0IGludGVybmV0U2VhcmNoID0gc2NyZWVuLmdldEJ5TGFiZWxUZXh0KFwiSW50ZXJuZXQgU2VhcmNoXCIpO1xuICAgICAgY29uc3QgY2FsY3VsYXRvciA9IHNjcmVlbi5nZXRCeUxhYmVsVGV4dChcIkNhbGN1bGF0b3JcIik7XG4gICAgICBjb25zdCBtZW1vcnlTZWFyY2ggPSBzY3JlZW4uZ2V0QnlMYWJlbFRleHQoXCJNZW1vcnkgU2VhcmNoXCIpO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soaW50ZXJuZXRTZWFyY2gpOyAvLyB0cnVlIC0+IGZhbHNlXG4gICAgICBmaXJlRXZlbnQuY2xpY2soY2FsY3VsYXRvcik7IC8vIHRydWUgLT4gZmFsc2VcbiAgICAgIGZpcmVFdmVudC5jbGljayhtZW1vcnlTZWFyY2gpOyAvLyB0cnVlIC0+IGZhbHNlXG5cbiAgICAgIC8vIFNhdmUgY2hhbmdlc1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJTYXZlIFRvb2wgUGVybWlzc2lvbnNcIikpO1xuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KG1vY2tPblVwZGF0ZUFnZW50KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcImFnZW50LTFcIiwge1xuICAgICAgICAgIHRvb2xQZXJtaXNzaW9uczogZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgaW50ZXJuZXRTZWFyY2g6IGZhbHNlLFxuICAgICAgICAgICAgY2FsY3VsYXRvcjogZmFsc2UsXG4gICAgICAgICAgICBtZW1vcnlTZWFyY2g6IGZhbHNlLFxuICAgICAgICAgICAgLy8gT3RoZXJzIHNob3VsZCByZW1haW4gdW5jaGFuZ2VkXG4gICAgICAgICAgICB3aWtpcGVkaWFBY2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBhY2FkZW1pY1NlYXJjaDogdHJ1ZSxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJoYW5kbGVzIHRvb2wgcGVybWlzc2lvbiBjYXRlZ29yeSBncm91cGluZ1wiLCAoKSA9PiB7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJUb29sc1wiKSk7XG5cbiAgICAgIC8vIENoZWNrIGFsbCBjYXRlZ29yaWVzIGFyZSBwcmVzZW50XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIkluZm9ybWF0aW9uIEFjY2VzcyBUb29sc1wiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5VGV4dChcIkNvbnRlbnQgR2VuZXJhdGlvbiAmIFByb2Nlc3NpbmdcIiksXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3QoXG4gICAgICAgIHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2UgJiBSZWFzb25pbmcgVG9vbHNcIiksXG4gICAgICApLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dChcIkV4dGVybmFsIEludGVncmF0aW9uc1wiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiQWdlbnQtU3BlY2lmaWMgVG9vbHNcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyB0b29sIHBlcm1pc3Npb24gc2F2ZSBlcnJvcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja09uVXBkYXRlQWdlbnQubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIlBlcm1pc3Npb24gdXBkYXRlIGZhaWxlZFwiKSxcbiAgICAgICk7XG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJUb29sc1wiKSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5TGFiZWxUZXh0KFwiSW50ZXJuZXQgU2VhcmNoXCIpKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiU2F2ZSBUb29sIFBlcm1pc3Npb25zXCIpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgXCJGYWlsZWQgdG8gdXBkYXRlIHRvb2wgcGVybWlzc2lvbnM6IFBlcm1pc3Npb24gdXBkYXRlIGZhaWxlZFwiLFxuICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJCZWxpZWYgRXh0cmFjdGlvbiBEZWVwIFRlc3RpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJoYW5kbGVzIGNvbXBsZXRlIGJlbGllZiBleHRyYWN0aW9uIHdvcmtmbG93XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFeHRyYWN0QmVsaWVmcyA9IGplc3RcbiAgICAgICAgLmZuKClcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKFwiRXh0cmFjdGVkIGJlbGllZnMgdGV4dFwiKTtcbiAgICAgIG1vY2tVc2VMTE0ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNQcm9jZXNzaW5nOiBmYWxzZSxcbiAgICAgICAgc2V0SXNQcm9jZXNzaW5nOiBqZXN0LmZuKCksXG4gICAgICAgIGdlbmVyYXRlUmVzcG9uc2U6IGplc3QuZm4oKSxcbiAgICAgICAgZXh0cmFjdEJlbGllZnM6IG1vY2tFeHRyYWN0QmVsaWVmcyxcbiAgICAgICAgZ2VuZXJhdGVLbm93bGVkZ2VFbnRyaWVzOiBqZXN0LmZuKCksXG4gICAgICAgIGxsbUNsaWVudDoge30sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKCk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiSW5mZXJlbmNlXCIpKTtcblxuICAgICAgLy8gU2VsZWN0IGNvbnZlcnNhdGlvblxuICAgICAgY29uc3QgY29udmVyc2F0aW9uU2VsZWN0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKFxuICAgICAgICBcIlNlbGVjdCBhIGNvbnZlcnNhdGlvbi4uLlwiLFxuICAgICAgKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29udmVyc2F0aW9uU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJjb252LTFcIiB9IH0pO1xuXG4gICAgICAvLyBFeHRyYWN0IGJlbGllZnNcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiRXh0cmFjdCBCZWxpZWZzXCIpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrRXh0cmFjdEJlbGllZnMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIGJhc2VDb252ZXJzYXRpb24ubWVzc2FnZXMubWFwKChtKSA9PiBtLmNvbnRlbnQpLmpvaW4oXCJcXG5cIiksXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ2hlY2sgZXh0cmFjdGVkIGJlbGllZnMgYXJlIGRpc3BsYXllZFxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJFeHRyYWN0ZWQgYmVsaWVmcyB0ZXh0XCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgYmVsaWVmIGV4dHJhY3Rpb24gcHJvY2Vzc2luZyBzdGF0ZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrU2V0SXNQcm9jZXNzaW5nID0gamVzdC5mbigpO1xuICAgICAgbW9ja1VzZUxMTS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc1Byb2Nlc3Npbmc6IHRydWUsXG4gICAgICAgIHNldElzUHJvY2Vzc2luZzogbW9ja1NldElzUHJvY2Vzc2luZyxcbiAgICAgICAgZ2VuZXJhdGVSZXNwb25zZTogamVzdC5mbigpLFxuICAgICAgICBleHRyYWN0QmVsaWVmczogamVzdFxuICAgICAgICAgIC5mbigpXG4gICAgICAgICAgLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBuZXcgUHJvbWlzZSgoKSA9PiB7fSkpLCAvLyBOZXZlciByZXNvbHZlc1xuICAgICAgICBnZW5lcmF0ZUtub3dsZWRnZUVudHJpZXM6IGplc3QuZm4oKSxcbiAgICAgICAgbGxtQ2xpZW50OiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJJbmZlcmVuY2VcIikpO1xuXG4gICAgICBjb25zdCBjb252ZXJzYXRpb25TZWxlY3QgPSBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoXG4gICAgICAgIFwiU2VsZWN0IGEgY29udmVyc2F0aW9uLi4uXCIsXG4gICAgICApO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShjb252ZXJzYXRpb25TZWxlY3QsIHsgdGFyZ2V0OiB7IHZhbHVlOiBcImNvbnYtMVwiIH0gfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiRXh0cmFjdCBCZWxpZWZzXCIpKTtcblxuICAgICAgLy8gU2hvdWxkIHNob3cgcHJvY2Vzc2luZyBzdGF0ZVxuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJFeHRyYWN0aW5nLi4uXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgYmVsaWVmIGV4dHJhY3Rpb24gZXJyb3JzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tFeHRyYWN0QmVsaWVmcyA9IGplc3RcbiAgICAgICAgLmZuKClcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcihcIkV4dHJhY3Rpb24gZmFpbGVkXCIpKTtcbiAgICAgIG1vY2tVc2VMTE0ubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgaXNQcm9jZXNzaW5nOiBmYWxzZSxcbiAgICAgICAgc2V0SXNQcm9jZXNzaW5nOiBqZXN0LmZuKCksXG4gICAgICAgIGdlbmVyYXRlUmVzcG9uc2U6IGplc3QuZm4oKSxcbiAgICAgICAgZXh0cmFjdEJlbGllZnM6IG1vY2tFeHRyYWN0QmVsaWVmcyxcbiAgICAgICAgZ2VuZXJhdGVLbm93bGVkZ2VFbnRyaWVzOiBqZXN0LmZuKCksXG4gICAgICAgIGxsbUNsaWVudDoge30sXG4gICAgICB9KTtcblxuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKCk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiSW5mZXJlbmNlXCIpKTtcblxuICAgICAgY29uc3QgY29udmVyc2F0aW9uU2VsZWN0ID0gc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKFxuICAgICAgICBcIlNlbGVjdCBhIGNvbnZlcnNhdGlvbi4uLlwiLFxuICAgICAgKTtcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29udmVyc2F0aW9uU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJjb252LTFcIiB9IH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIkV4dHJhY3QgQmVsaWVmc1wiKSk7XG5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogXCJGYWlsZWQgdG8gZXh0cmFjdCBiZWxpZWZzOiBFeHRyYWN0aW9uIGZhaWxlZFwiLFxuICAgICAgICAgIHZhcmlhbnQ6IFwiZGVzdHJ1Y3RpdmVcIixcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJoYW5kbGVzIGNvbnZlcnNhdGlvbiBzZWxlY3Rpb24gZWRnZSBjYXNlc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb252ZXJzYXRpb25IaXN0b3J5ID0gW1xuICAgICAgICBjcmVhdGVNb2NrQ29udmVyc2F0aW9uKFwiY29udi0xXCIsIHsgdGl0bGU6IFwiRmlyc3QgQ29udmVyc2F0aW9uXCIgfSksXG4gICAgICAgIGNyZWF0ZU1vY2tDb252ZXJzYXRpb24oXCJjb252LTJcIiwgeyB0aXRsZTogXCJTZWNvbmQgQ29udmVyc2F0aW9uXCIgfSksXG4gICAgICBdO1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoeyBjb252ZXJzYXRpb25IaXN0b3J5IH0pO1xuXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIkluZmVyZW5jZVwiKSk7XG5cbiAgICAgIGNvbnN0IGNvbnZlcnNhdGlvblNlbGVjdCA9IHNjcmVlbi5nZXRCeURpc3BsYXlWYWx1ZShcbiAgICAgICAgXCJTZWxlY3QgYSBjb252ZXJzYXRpb24uLi5cIixcbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBoYXZlIGFsbCBjb252ZXJzYXRpb25zIGFzIG9wdGlvbnNcbiAgICAgIGZpcmVFdmVudC5jaGFuZ2UoY29udmVyc2F0aW9uU2VsZWN0LCB7IHRhcmdldDogeyB2YWx1ZTogXCJjb252LTJcIiB9IH0pO1xuICAgICAgZXhwZWN0KFxuICAgICAgICBzY3JlZW4uZ2V0QnlEaXNwbGF5VmFsdWUoXCJTZWNvbmQgQ29udmVyc2F0aW9uXCIpLFxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIktub3dsZWRnZSBOb2RlIFNlbGVjdGlvbiBEZWVwIFRlc3RpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJoYW5kbGVzIGtub3dsZWRnZSBub2RlIHNlbGVjdGlvbiBmcm9tIGdsb2JhbCBncmFwaFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZEtub3dsZWRnZU5vZGUgPSB7XG4gICAgICAgIHR5cGU6IFwiZW50cnlcIiBhcyBjb25zdCxcbiAgICAgICAgaWQ6IFwia25vd2xlZGdlLTFcIixcbiAgICAgICAgdGl0bGU6IFwiU2VsZWN0ZWQgS25vd2xlZGdlXCIsXG4gICAgICB9O1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoeyBzZWxlY3RlZEtub3dsZWRnZU5vZGUgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlIE5vZGUgU2VsZWN0aW9uXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJTZWxlY3RlZCBLbm93bGVkZ2VcIikpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyB0YWcgbm9kZSBzZWxlY3Rpb24gZnJvbSBnbG9iYWwgZ3JhcGhcIiwgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRLbm93bGVkZ2VOb2RlID0ge1xuICAgICAgICB0eXBlOiBcInRhZ1wiIGFzIGNvbnN0LFxuICAgICAgICBpZDogXCJzY2llbmNlXCIsXG4gICAgICAgIHRpdGxlOiBcIlNjaWVuY2UgVGFnXCIsXG4gICAgICB9O1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoeyBzZWxlY3RlZEtub3dsZWRnZU5vZGUgfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlIE5vZGUgU2VsZWN0aW9uXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoXCJTY2llbmNlIFRhZ1wiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJoYW5kbGVzIGNsZWFyaW5nIGtub3dsZWRnZSBub2RlIHNlbGVjdGlvblwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZEtub3dsZWRnZU5vZGUgPSB7XG4gICAgICAgIHR5cGU6IFwiZW50cnlcIiBhcyBjb25zdCxcbiAgICAgICAgaWQ6IFwia25vd2xlZGdlLTFcIixcbiAgICAgICAgdGl0bGU6IFwiU2VsZWN0ZWQgS25vd2xlZGdlXCIsXG4gICAgICB9O1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoeyBzZWxlY3RlZEtub3dsZWRnZU5vZGUgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiQmFja1wiKSk7XG5cbiAgICAgIGV4cGVjdChtb2NrT25DbGVhclNlbGVjdGVkS25vd2xlZGdlTm9kZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkFnZW50IFNlbGVjdGlvbiBhbmQgU3RhdGUgUmVzZXRcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJoYW5kbGVzIGFnZW50IHN3aXRjaGluZyBhbmQgc3RhdGUgcmVzZXRcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXJlbmRlciB9ID0gcmVuZGVyTWVtb3J5Vmlld2VyKCk7XG5cbiAgICAgIC8vIEdvIHRvIGtub3dsZWRnZSB0YWIgYW5kIHNlbGVjdCBhbiBpdGVtXG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIktub3dsZWRnZVwiKSk7XG4gICAgICBmaXJlRXZlbnQuY2xpY2soc2NyZWVuLmdldEJ5VGV4dChcIktub3dsZWRnZSBrbm93bGVkZ2UtMVwiKSk7XG5cbiAgICAgIC8vIFN3aXRjaCB0byBkaWZmZXJlbnQgYWdlbnRcbiAgICAgIGNvbnN0IG5ld0FnZW50ID0gY3JlYXRlTW9ja0FnZW50KFwiYWdlbnQtMlwiKTtcbiAgICAgIHJlcmVuZGVyKFxuICAgICAgICA8TWVtb3J5Vmlld2VyXG4gICAgICAgICAgc2VsZWN0ZWRBZ2VudD17bmV3QWdlbnR9XG4gICAgICAgICAgY29udmVyc2F0aW9uSGlzdG9yeT17W2Jhc2VDb252ZXJzYXRpb25dfVxuICAgICAgICAgIGFnZW50cz17W2Jhc2VBZ2VudCwgbmV3QWdlbnRdfVxuICAgICAgICAgIG9uQWRkS25vd2xlZGdlPXttb2NrT25BZGRLbm93bGVkZ2V9XG4gICAgICAgICAgb25VcGRhdGVBZ2VudD17bW9ja09uVXBkYXRlQWdlbnR9XG4gICAgICAgICAgb25EZWxldGVLbm93bGVkZ2U9e21vY2tPbkRlbGV0ZUtub3dsZWRnZX1cbiAgICAgICAgICBvblVwZGF0ZUtub3dsZWRnZT17bW9ja09uVXBkYXRlS25vd2xlZGdlfVxuICAgICAgICAgIHNlbGVjdGVkS25vd2xlZGdlTm9kZT17bnVsbH1cbiAgICAgICAgICBvbkNsZWFyU2VsZWN0ZWRLbm93bGVkZ2VOb2RlPXttb2NrT25DbGVhclNlbGVjdGVkS25vd2xlZGdlTm9kZX1cbiAgICAgICAgICBvblNlbGVjdEFnZW50PXttb2NrT25TZWxlY3RBZ2VudH1cbiAgICAgICAgLz4sXG4gICAgICApO1xuXG4gICAgICAvLyBTaG91bGQgc2hvdyBuZXcgYWdlbnQncyBiaW9ncmFwaHlcbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5RGlzcGxheVZhbHVlKFwiQmlvZ3JhcGh5IGZvciBhZ2VudCBhZ2VudC0yXCIpLFxuICAgICAgKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgbnVsbCBhZ2VudCBncmFjZWZ1bGx5XCIsICgpID0+IHtcbiAgICAgIHJlbmRlck1lbW9yeVZpZXdlcih7IHNlbGVjdGVkQWdlbnQ6IG51bGwgfSk7XG5cbiAgICAgIGV4cGVjdChcbiAgICAgICAgc2NyZWVuLmdldEJ5VGV4dChcIlNlbGVjdCBhbiBhZ2VudCB0byB2aWV3IHRoZWlyIG1lbW9yeVwiKSxcbiAgICAgICkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJEYXRhIEV4cG9ydCBEZWVwIFRlc3RpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJoYW5kbGVzIGtub3dsZWRnZSBleHBvcnQgd29ya2Zsb3dcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBleHBvcnRBZ2VudEtub3dsZWRnZSB9ID0gamVzdC5yZXF1aXJlTW9jayhcbiAgICAgICAgXCJAL2xpYi9rbm93bGVkZ2UtZXhwb3J0XCIsXG4gICAgICApO1xuICAgICAgZXhwb3J0QWdlbnRLbm93bGVkZ2UubW9ja1Jlc29sdmVkVmFsdWUoXCJleHBvcnRlZC1kYXRhXCIpO1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2VcIikpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJFeHBvcnQgS25vd2xlZGdlXCIpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChleHBvcnRBZ2VudEtub3dsZWRnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoYmFzZUFnZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QobW9ja1RvYXN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHRpdGxlOiBcIlN1Y2Nlc3NcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiS25vd2xlZGdlIGV4cG9ydGVkIHN1Y2Nlc3NmdWxseVwiLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwiaGFuZGxlcyBleHBvcnQgZXJyb3JzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgZXhwb3J0QWdlbnRLbm93bGVkZ2UgfSA9IGplc3QucmVxdWlyZU1vY2soXG4gICAgICAgIFwiQC9saWIva25vd2xlZGdlLWV4cG9ydFwiLFxuICAgICAgKTtcbiAgICAgIGV4cG9ydEFnZW50S25vd2xlZGdlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcihcIkV4cG9ydCBmYWlsZWRcIikpO1xuXG4gICAgICByZW5kZXJNZW1vcnlWaWV3ZXIoKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJLbm93bGVkZ2VcIikpO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNjcmVlbi5nZXRCeVRleHQoXCJFeHBvcnQgS25vd2xlZGdlXCIpKTtcblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChtb2NrVG9hc3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkZhaWxlZCB0byBleHBvcnQga25vd2xlZGdlOiBFeHBvcnQgZmFpbGVkXCIsXG4gICAgICAgICAgdmFyaWFudDogXCJkZXN0cnVjdGl2ZVwiLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlBlcmZvcm1hbmNlIGFuZCBFZGdlIENhc2VzXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiaGFuZGxlcyBsYXJnZSBrbm93bGVkZ2UgZGF0YXNldHMgZWZmaWNpZW50bHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VLbm93bGVkZ2VTZXQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1MDAgfSwgKF8sIGkpID0+XG4gICAgICAgIGNyZWF0ZU1vY2tLbm93bGVkZ2VFbnRyeShga25vd2xlZGdlLSR7aX1gLCB7XG4gICAgICAgICAgdGl0bGU6IGBLbm93bGVkZ2UgJHtpfWAsXG4gICAgICAgICAgY29udGVudDogYENvbnRlbnQgJHtpfWAsXG4gICAgICAgICAgdGFnczogW2B0YWctJHtpICUgMTB9YCwgXCJjb21tb25cIl0sXG4gICAgICAgIH0pLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgYWdlbnRXaXRoTGFyZ2VLbm93bGVkZ2UgPSBjcmVhdGVNb2NrQWdlbnQoXCJhZ2VudC0xXCIsIHtcbiAgICAgICAga25vd2xlZGdlOiBsYXJnZUtub3dsZWRnZVNldCxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKHsgc2VsZWN0ZWRBZ2VudDogYWdlbnRXaXRoTGFyZ2VLbm93bGVkZ2UgfSk7XG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTtcblxuICAgICAgLy8gVGVzdCBzZWFyY2ggcGVyZm9ybWFuY2VcbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlXCIpKTtcblxuICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzY3JlZW4uZ2V0QnlQbGFjZWhvbGRlclRleHQoXCJTZWFyY2gga25vd2xlZGdlLi4uXCIpO1xuICAgICAgZmlyZUV2ZW50LmNoYW5nZShzZWFyY2hJbnB1dCwgeyB0YXJnZXQ6IHsgdmFsdWU6IFwiS25vd2xlZGdlIDEwMFwiIH0gfSk7XG5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiS25vd2xlZGdlIDEwMFwiKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJoYW5kbGVzIG1hbGZvcm1lZCBkYXRhIGdyYWNlZnVsbHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbWFsZm9ybWVkQWdlbnQgPSB7XG4gICAgICAgIGlkOiBcIm1hbGZvcm1lZFwiLFxuICAgICAgICBuYW1lOiBcIk1hbGZvcm1lZCBBZ2VudFwiLFxuICAgICAgICBiaW9ncmFwaHk6IFwiXCIsXG4gICAgICAgIGtub3dsZWRnZTogW1xuICAgICAgICAgIHsgdGl0bGU6IFwiTWFsZm9ybWVkIEtub3dsZWRnZVwiIH0sIC8vIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXG4gICAgICAgIF0sXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKHsgc2VsZWN0ZWRBZ2VudDogbWFsZm9ybWVkQWdlbnQgfSk7XG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgbWlzc2luZyBkZXBlbmRlbmNpZXMgZ3JhY2VmdWxseVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudFdpdGhvdXRQZXJtaXNzaW9ucyA9IHtcbiAgICAgICAgLi4uYmFzZUFnZW50LFxuICAgICAgICB0b29sUGVybWlzc2lvbnM6IG51bGwsXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgcmVuZGVyTWVtb3J5Vmlld2VyKHsgc2VsZWN0ZWRBZ2VudDogYWdlbnRXaXRob3V0UGVybWlzc2lvbnMgfSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhzY3JlZW4uZ2V0QnlUZXh0KFwiVG9vbHNcIikpO1xuXG4gICAgICAvLyBTaG91bGQgdXNlIGRlZmF1bHQgcGVybWlzc2lvbnNcbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KFwiSW5mb3JtYXRpb24gQWNjZXNzIFRvb2xzXCIpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwidXNlVG9hc3QiLCJmbiIsInVzZUxMTSIsImZvcm1hdFRpbWVzdGFtcCIsImRhdGUiLCJ0b0lTT1N0cmluZyIsImV4dHJhY3RUYWdzRnJvbU1hcmtkb3duIiwiY29udGVudCIsIm1hdGNoIiwiY24iLCJhcmdzIiwiZmlsdGVyIiwiQm9vbGVhbiIsImpvaW4iLCJwYXJzZUJlbGllZnMiLCJwYXJzZVJlZmluZWRCZWxpZWZzIiwiZXhwb3J0QWdlbnRLbm93bGVkZ2UiLCJkZWJ1Z0xvZyIsImNyZWF0ZUxvZ2dlciIsImxvZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJCdXR0b24iLCJjaGlsZHJlbiIsIm9uQ2xpY2siLCJ2YXJpYW50IiwiZGlzYWJsZWQiLCJwcm9wcyIsImJ1dHRvbiIsImRhdGEtdmFyaWFudCIsIlRleHRhcmVhIiwidmFsdWUiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwidGV4dGFyZWEiLCJDYXJkIiwiY2xhc3NOYW1lIiwiZGl2IiwiQ2FyZENvbnRlbnQiLCJDYXJkSGVhZGVyIiwiQ2FyZFRpdGxlIiwiaDMiLCJTZWxlY3QiLCJvblZhbHVlQ2hhbmdlIiwiZGF0YS10ZXN0aWQiLCJzZWxlY3QiLCJlIiwidGFyZ2V0IiwiU2VsZWN0Q29udGVudCIsIlNlbGVjdEl0ZW0iLCJvcHRpb24iLCJTZWxlY3RUcmlnZ2VyIiwiU2VsZWN0VmFsdWUiLCJzcGFuIiwiU2Nyb2xsQXJlYSIsIklucHV0IiwidHlwZSIsImlucHV0IiwiQmFkZ2UiLCJjcmVhdGVNb2NrS25vd2xlZGdlRW50cnkiLCJpZCIsIm92ZXJyaWRlcyIsInRpdGxlIiwic291cmNlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRhZ3MiLCJtZXRhZGF0YSIsImNyZWF0ZU1vY2tBZ2VudCIsIm5hbWUiLCJiaW9ncmFwaHkiLCJjb2xvciIsInBvc2l0aW9uIiwieCIsInkiLCJrbm93bGVkZ2UiLCJ0b29sUGVybWlzc2lvbnMiLCJpbnRlcm5ldFNlYXJjaCIsIndlYlNjcmFwaW5nIiwid2lraXBlZGlhQWNjZXNzIiwibmV3c0FwaSIsImFjYWRlbWljU2VhcmNoIiwiZG9jdW1lbnRSZXRyaWV2YWwiLCJpbWFnZUdlbmVyYXRpb24iLCJ0ZXh0U3VtbWFyaXphdGlvbiIsInRyYW5zbGF0aW9uIiwiY29kZUV4ZWN1dGlvbiIsImNhbGN1bGF0b3IiLCJrbm93bGVkZ2VHcmFwaFF1ZXJ5IiwiZmFjdENoZWNraW5nIiwidGltZWxpbmVHZW5lcmF0b3IiLCJ3ZWF0aGVyRGF0YSIsIm1hcExvY2F0aW9uRGF0YSIsImZpbmFuY2lhbERhdGEiLCJwdWJsaWNEYXRhc2V0cyIsIm1lbW9yeVNlYXJjaCIsImNyb3NzQWdlbnRLbm93bGVkZ2UiLCJjb252ZXJzYXRpb25BbmFseXNpcyIsImF1dG9ub215RW5hYmxlZCIsImluQ29udmVyc2F0aW9uIiwiY3JlYXRlTW9ja0NvbnZlcnNhdGlvbiIsInBhcnRpY2lwYW50cyIsIm1lc3NhZ2VzIiwiY29udmVyc2F0aW9uSWQiLCJzZW5kZXJJZCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImRlc2NyaWJlIiwibW9ja1RvYXN0IiwibW9ja1VzZUxMTSIsIm1vY2tPbkFkZEtub3dsZWRnZSIsIm1vY2tPblVwZGF0ZUFnZW50IiwibW9ja09uRGVsZXRlS25vd2xlZGdlIiwibW9ja09uVXBkYXRlS25vd2xlZGdlIiwibW9ja09uQ2xlYXJTZWxlY3RlZEtub3dsZWRnZU5vZGUiLCJtb2NrT25TZWxlY3RBZ2VudCIsImJhc2VBZ2VudCIsImJhc2VDb252ZXJzYXRpb24iLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsImlzUHJvY2Vzc2luZyIsInNldElzUHJvY2Vzc2luZyIsImdlbmVyYXRlUmVzcG9uc2UiLCJleHRyYWN0QmVsaWVmcyIsImdlbmVyYXRlS25vd2xlZGdlRW50cmllcyIsImxsbUNsaWVudCIsInJlcXVpcmVNb2NrIiwibW9ja1JldHVyblZhbHVlIiwidG9hc3QiLCJkaXNtaXNzIiwidG9hc3RzIiwibW9ja0ltcGxlbWVudGF0aW9uIiwicmVuZGVyTWVtb3J5Vmlld2VyIiwiZGVmYXVsdFByb3BzIiwic2VsZWN0ZWRBZ2VudCIsImNvbnZlcnNhdGlvbkhpc3RvcnkiLCJhZ2VudHMiLCJvbkFkZEtub3dsZWRnZSIsIm9uVXBkYXRlQWdlbnQiLCJvbkRlbGV0ZUtub3dsZWRnZSIsIm9uVXBkYXRlS25vd2xlZGdlIiwic2VsZWN0ZWRLbm93bGVkZ2VOb2RlIiwib25DbGVhclNlbGVjdGVkS25vd2xlZGdlTm9kZSIsIm9uU2VsZWN0QWdlbnQiLCJyZW5kZXIiLCJNZW1vcnlWaWV3ZXIiLCJ0ZXN0IiwiZXhwZWN0Iiwic2NyZWVuIiwiZ2V0QnlEaXNwbGF5VmFsdWUiLCJ0b0JlSW5UaGVEb2N1bWVudCIsImtub3dsZWRnZVRhYiIsImdldEJ5VGV4dCIsImZpcmVFdmVudCIsImNsaWNrIiwiZ2V0QnlQbGFjZWhvbGRlclRleHQiLCJpbnRlcm5ldFNlYXJjaFRvZ2dsZSIsImdldEJ5TGFiZWxUZXh0IiwiY29udmVyc2F0aW9uU2VsZWN0IiwiY2hhbmdlIiwiYmlvZ3JhcGh5VGV4dGFyZWEiLCJ0b0hhdmVWYWx1ZSIsInNhdmVCdXR0b24iLCJ3YWl0Rm9yIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJkZXNjcmlwdGlvbiIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJ0b0JlRGlzYWJsZWQiLCJub3QiLCJ0aXRsZUlucHV0IiwiY29udGVudFRleHRhcmVhIiwidGFnc0lucHV0Iiwib2JqZWN0Q29udGFpbmluZyIsImFnZW50V2l0aEtub3dsZWRnZSIsImtub3dsZWRnZUl0ZW0iLCJhZ2VudFdpdGhNdWx0aXBsZUtub3dsZWRnZSIsInNlYXJjaElucHV0IiwicXVlcnlCeVRleHQiLCJhZ2VudFdpdGhUYWdnZWRLbm93bGVkZ2UiLCJ0YWdTZWxlY3QiLCJtb2NrRXh0cmFjdEJlbGllZnMiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsIm1hcCIsIm0iLCJtb2NrU2V0SXNQcm9jZXNzaW5nIiwiUHJvbWlzZSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJyZXJlbmRlciIsIm5ld0FnZW50IiwibGFyZ2VLbm93bGVkZ2VTZXQiLCJBcnJheSIsImZyb20iLCJsZW5ndGgiLCJfIiwiaSIsImFnZW50V2l0aExhcmdlS25vd2xlZGdlIiwic3RhcnRUaW1lIiwibm93IiwiZW5kVGltZSIsInRvQmVMZXNzVGhhbiIsIm1hbGZvcm1lZEFnZW50IiwidG9UaHJvdyIsImFnZW50V2l0aG91dFBlcm1pc3Npb25zIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7O0NBTUM7Ozs7OzhEQUVpQjt3QkFPWDt5QkFDYztxRUFHZDs7Ozs7O0FBR1AsMkNBQTJDO0FBQzNDQSxhQUFJLENBQUNDLElBQUksQ0FBQyxxQkFBcUIsSUFBTyxDQUFBO1FBQ3BDQyxVQUFVRixhQUFJLENBQUNHLEVBQUU7SUFDbkIsQ0FBQTtBQUVBSCxhQUFJLENBQUNDLElBQUksQ0FBQywwQkFBMEIsSUFBTyxDQUFBO1FBQ3pDRyxRQUFRSixhQUFJLENBQUNHLEVBQUU7SUFDakIsQ0FBQTtBQUVBSCxhQUFJLENBQUNDLElBQUksQ0FBQyxlQUFlLElBQU8sQ0FBQTtRQUM5QkksaUJBQWlCTCxhQUFJLENBQUNHLEVBQUUsQ0FBQyxDQUFDRyxPQUFTQSxLQUFLQyxXQUFXO1FBQ25EQyx5QkFBeUJSLGFBQUksQ0FBQ0csRUFBRSxDQUFDLENBQUNNLFVBQVlBLFFBQVFDLEtBQUssQ0FBQyxjQUFjLEVBQUU7UUFDNUVDLElBQUlYLGFBQUksQ0FBQ0csRUFBRSxDQUFDLENBQUMsR0FBR1MsT0FBU0EsS0FBS0MsTUFBTSxDQUFDQyxTQUFTQyxJQUFJLENBQUM7SUFDckQsQ0FBQTtBQUVBZixhQUFJLENBQUNDLElBQUksQ0FBQywyQkFB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