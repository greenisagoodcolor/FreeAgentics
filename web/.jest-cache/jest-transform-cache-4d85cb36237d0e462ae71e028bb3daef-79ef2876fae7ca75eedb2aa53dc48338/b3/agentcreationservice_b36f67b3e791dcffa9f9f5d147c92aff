138f75b94a0f1b394e03693316e288fa
"use client";
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    AgentCreationService: function() {
        return AgentCreationService;
    },
    agentCreationService: function() {
        return agentCreationService;
    },
    useAgentCreation: function() {
        return useAgentCreation;
    }
});
const _dashboardstore = require("../stores/dashboard-store");
const _dashboardapi = require("../api/dashboard-api");
class AgentCreationService {
    static getCategoryColor(category) {
        const categoryColors = {
            explorer: "#4A90E2",
            guardian: "#50C878",
            merchant: "#FFB347",
            scholar: "#9B59B6"
        };
        return categoryColors[category] || "#4A90E2";
    }
    static getInstance() {
        if (!AgentCreationService.instance) {
            AgentCreationService.instance = new AgentCreationService();
        }
        return AgentCreationService.instance;
    }
    /**
   * Create a single agent from template with optimistic updates
   */ async createAgentFromTemplate(template, config) {
        const agentId = `agent_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
        // Create optimistic agent info
        const agentInfo = {
            id: agentId,
            name: config.name || `${template.name} Instance`,
            templateId: template.id,
            status: "creating",
            progress: 0
        };
        // Add to creation queue for tracking
        this.creationQueue.set(agentId, agentInfo);
        try {
            // Optimistic update to store
            const store = _dashboardstore.useDashboardStore.getState();
            store.addAgent({
                id: agentId,
                name: agentInfo.name,
                class: template.id,
                inConversation: false,
                position: config.position || {
                    x: 0,
                    y: 0
                },
                color: AgentCreationService.getCategoryColor(template.category),
                knowledge: [],
                autonomyEnabled: template.capabilities?.includes("autonomous") || false,
                toolPermissions: {
                    // Information Access Tools
                    internetSearch: true,
                    webScraping: false,
                    wikipediaAccess: true,
                    newsApi: false,
                    academicSearch: false,
                    documentRetrieval: true,
                    // Content Generation & Processing
                    imageGeneration: false,
                    textSummarization: true,
                    translation: false,
                    codeExecution: false,
                    // Knowledge & Reasoning Tools
                    calculator: true,
                    knowledgeGraphQuery: true,
                    factChecking: true,
                    timelineGenerator: false,
                    // External Integrations
                    weatherData: false,
                    mapLocationData: false,
                    financialData: false,
                    publicDatasets: false,
                    // Agent-Specific Tools
                    memorySearch: true,
                    crossAgentKnowledge: true,
                    conversationAnalysis: true
                }
            });
            // Simulate creation progress
            await this.simulateCreationProgress(agentId);
            // Prepare backend request
            const createRequest = {
                name: agentInfo.name,
                initialPosition: config.position || {
                    x: 0,
                    y: 0,
                    z: 0
                },
                capabilities: template.capabilities,
                tags: template.useCases,
                metadata: {
                    description: config.description || template.description,
                    templateId: template.id,
                    complexity: template.complexity,
                    mathematicalFoundation: template.mathematicalFoundation,
                    customParameters: config.customParameters || {}
                }
            };
            // Call backend API
            const backendAgent = await _dashboardapi.enhancedAgentsApi.createAgent(createRequest);
            // Update agent with backend data
            const finalAgentInfo = {
                ...agentInfo,
                status: "ready",
                progress: 100,
                agentData: backendAgent
            };
            this.creationQueue.set(agentId, finalAgentInfo);
            // Update store with real backend data
            store.updateAgent(agentId, {
                id: backendAgent.agent.id || agentId,
                name: backendAgent.agent.name,
                class: backendAgent.agent.activeInference?.template,
                inConversation: false
            });
            return {
                success: true,
                agent: finalAgentInfo
            };
        } catch (error) {
            console.error("Agent creation failed:", error);
            // Update with error status
            const errorAgentInfo = {
                ...agentInfo,
                status: "error",
                error: error instanceof Error ? error.message : "Unknown error"
            };
            this.creationQueue.set(agentId, errorAgentInfo);
            // Update store with error status
            const store = _dashboardstore.useDashboardStore.getState();
            // Remove agent on error since it's not valid
            store.removeAgent(agentId);
            return {
                success: false,
                error: errorAgentInfo.error
            };
        }
    }
    /**
   * Quick Start mode - create 3 default agents
   */ async createQuickStartAgents() {
        const defaultTemplates = [
            {
                id: "explorer",
                name: "Explorer Agent",
                description: "Epistemic value maximization for environment exploration",
                complexity: "beginner",
                capabilities: [
                    "Spatial navigation",
                    "Environment mapping",
                    "Resource discovery"
                ],
                useCases: [
                    "Territory mapping",
                    "Resource scouting"
                ],
                mathematicalFoundation: {
                    beliefsStates: 64,
                    observationModalities: 3,
                    actionSpaces: 8,
                    defaultPrecision: {
                        sensory: 16.0,
                        policy: 16.0,
                        state: 1.0
                    }
                }
            },
            {
                id: "guardian",
                name: "Guardian Agent",
                description: "Risk assessment and protective behavior optimization",
                complexity: "intermediate",
                capabilities: [
                    "Threat detection",
                    "Risk assessment",
                    "Protective behavior"
                ],
                useCases: [
                    "Coalition protection",
                    "Territory defense"
                ],
                mathematicalFoundation: {
                    beliefsStates: 128,
                    observationModalities: 4,
                    actionSpaces: 12,
                    defaultPrecision: {
                        sensory: 32.0,
                        policy: 24.0,
                        state: 2.0
                    }
                }
            },
            {
                id: "scholar",
                name: "Scholar Agent",
                description: "Knowledge synthesis and information processing",
                complexity: "intermediate",
                capabilities: [
                    "Information synthesis",
                    "Knowledge graphs",
                    "Pattern recognition"
                ],
                useCases: [
                    "Research coordination",
                    "Information analysis"
                ],
                mathematicalFoundation: {
                    beliefsStates: 512,
                    observationModalities: 6,
                    actionSpaces: 10,
                    defaultPrecision: {
                        sensory: 128.0,
                        policy: 64.0,
                        state: 8.0
                    }
                }
            }
        ];
        const results = [];
        // Create agents in parallel for better UX
        const creationPromises = defaultTemplates.map(async (template, index)=>{
            const config = {
                name: `${template.name} ${index + 1}`,
                description: `Quick Start ${template.description}`,
                position: {
                    x: index * 100,
                    y: index * 50
                }
            };
            return this.createAgentFromTemplate(template, config);
        });
        const allResults = await Promise.allSettled(creationPromises);
        allResults.forEach((result)=>{
            if (result.status === "fulfilled") {
                results.push(result.value);
            } else {
                results.push({
                    success: false,
                    error: result.reason instanceof Error ? result.reason.message : "Unknown error"
                });
            }
        });
        return results;
    }
    /**
   * Get creation status for an agent
   */ getCreationStatus(agentId) {
        return this.creationQueue.get(agentId) || null;
    }
    /**
   * Simulate creation progress for better UX
   */ async simulateCreationProgress(agentId) {
        const progressSteps = [
            10,
            25,
            45,
            70,
            85
        ];
        for (const progress of progressSteps){
            await new Promise((resolve)=>setTimeout(resolve, 200 + Math.random() * 300));
            const agentInfo = this.creationQueue.get(agentId);
            if (agentInfo) {
                agentInfo.progress = progress;
                agentInfo.status = progress < 85 ? "creating" : "initializing";
                this.creationQueue.set(agentId, agentInfo);
            }
        }
    }
    /**
   * Validate agent configuration before creation
   */ validateConfiguration(template, config) {
        const errors = [];
        if (!config.name || config.name.trim().length === 0) {
            errors.push("Agent name is required");
        }
        if (config.name && config.name.length > 100) {
            errors.push("Agent name must be less than 100 characters");
        }
        if (config.description && config.description.length > 500) {
            errors.push("Description must be less than 500 characters");
        }
        if (config.position) {
            if (typeof config.position.x !== "number" || typeof config.position.y !== "number") {
                errors.push("Position coordinates must be numbers");
            }
        }
        return errors;
    }
    constructor(){
        this.creationQueue = new Map();
    }
}
const agentCreationService = AgentCreationService.getInstance();
function useAgentCreation() {
    const store = (0, _dashboardstore.useDashboardStore)();
    const createAgent = async (template, config)=>{
        // Validate configuration
        const validationErrors = agentCreationService.validateConfiguration(template, config);
        if (validationErrors.length > 0) {
            return {
                success: false,
                error: validationErrors.join(", ")
            };
        }
        return agentCreationService.createAgentFromTemplate(template, config);
    };
    const createQuickStartAgents = async ()=>{
        return agentCreationService.createQuickStartAgents();
    };
    const getCreationStatus = (agentId)=>{
        return agentCreationService.getCreationStatus(agentId);
    };
    return {
        createAgent,
        createQuickStartAgents,
        getCreationStatus,
        agents: store.agents,
        isConnected: store.wsConnected
    };
} // Types are already exported as interfaces above

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXR0aGV3bW9yb25leS9idWlsZHMvRnJlZUFnZW50aWNzL3dlYi9saWIvc2VydmljZXMvYWdlbnQtY3JlYXRpb24tc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRGFzaGJvYXJkU3RvcmUgfSBmcm9tIFwiLi4vc3RvcmVzL2Rhc2hib2FyZC1zdG9yZVwiO1xuaW1wb3J0IHtcbiAgZW5oYW5jZWRBZ2VudHNBcGksXG4gIHR5cGUgQ3JlYXRlQWdlbnRSZXF1ZXN0LFxufSBmcm9tIFwiLi4vYXBpL2Rhc2hib2FyZC1hcGlcIjtcbmltcG9ydCB0eXBlIHsgQWdlbnRUZW1wbGF0ZSB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL3VpL2hvcml6b250YWwtdGVtcGxhdGUtc2VsZWN0b3JcIjtcblxuLy8gVHlwZVNjcmlwdCBpbnRlcmZhY2VzIGZvciBhZ2VudCBjcmVhdGlvblxuZXhwb3J0IGludGVyZmFjZSBBZ2VudENyZWF0aW9uQ29uZmlnIHtcbiAgdGVtcGxhdGVJZDogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBwb3NpdGlvbj86IHsgeDogbnVtYmVyOyB5OiBudW1iZXI7IHo/OiBudW1iZXIgfTtcbiAgY3VzdG9tUGFyYW1ldGVycz86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3JlYXRlZEFnZW50SW5mbyB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgdGVtcGxhdGVJZDogc3RyaW5nO1xuICBzdGF0dXM6IFwiY3JlYXRpbmdcIiB8IFwiaW5pdGlhbGl6aW5nXCIgfCBcInJlYWR5XCIgfCBcImVycm9yXCI7XG4gIHByb2dyZXNzOiBudW1iZXI7XG4gIGVycm9yPzogc3RyaW5nO1xuICBhZ2VudERhdGE/OiBhbnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWdlbnRDcmVhdGlvblJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIGFnZW50PzogQ3JlYXRlZEFnZW50SW5mbztcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBBZ2VudENyZWF0aW9uU2VydmljZSB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBZ2VudENyZWF0aW9uU2VydmljZTtcbiAgcHJpdmF0ZSBjcmVhdGlvblF1ZXVlOiBNYXA8c3RyaW5nLCBDcmVhdGVkQWdlbnRJbmZvPiA9IG5ldyBNYXAoKTtcblxuICBwcml2YXRlIHN0YXRpYyBnZXRDYXRlZ29yeUNvbG9yKGNhdGVnb3J5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNhdGVnb3J5Q29sb3JzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgZXhwbG9yZXI6IFwiIzRBOTBFMlwiLCAvLyBCbHVlXG4gICAgICBndWFyZGlhbjogXCIjNTBDODc4XCIsIC8vIEdyZWVuXG4gICAgICBtZXJjaGFudDogXCIjRkZCMzQ3XCIsIC8vIE9yYW5nZVxuICAgICAgc2Nob2xhcjogXCIjOUI1OUI2XCIsIC8vIFB1cnBsZVxuICAgIH07XG4gICAgcmV0dXJuIGNhdGVnb3J5Q29sb3JzW2NhdGVnb3J5XSB8fCBcIiM0QTkwRTJcIjtcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBBZ2VudENyZWF0aW9uU2VydmljZSB7XG4gICAgaWYgKCFBZ2VudENyZWF0aW9uU2VydmljZS5pbnN0YW5jZSkge1xuICAgICAgQWdlbnRDcmVhdGlvblNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgQWdlbnRDcmVhdGlvblNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIEFnZW50Q3JlYXRpb25TZXJ2aWNlLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbmdsZSBhZ2VudCBmcm9tIHRlbXBsYXRlIHdpdGggb3B0aW1pc3RpYyB1cGRhdGVzXG4gICAqL1xuICBhc3luYyBjcmVhdGVBZ2VudEZyb21UZW1wbGF0ZShcbiAgICB0ZW1wbGF0ZTogQWdlbnRUZW1wbGF0ZSxcbiAgICBjb25maWc6IFBhcnRpYWw8QWdlbnRDcmVhdGlvbkNvbmZpZz4sXG4gICk6IFByb21pc2U8QWdlbnRDcmVhdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IGFnZW50SWQgPSBgYWdlbnRfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KX1gO1xuXG4gICAgLy8gQ3JlYXRlIG9wdGltaXN0aWMgYWdlbnQgaW5mb1xuICAgIGNvbnN0IGFnZW50SW5mbzogQ3JlYXRlZEFnZW50SW5mbyA9IHtcbiAgICAgIGlkOiBhZ2VudElkLFxuICAgICAgbmFtZTogY29uZmlnLm5hbWUgfHwgYCR7dGVtcGxhdGUubmFtZX0gSW5zdGFuY2VgLFxuICAgICAgdGVtcGxhdGVJZDogdGVtcGxhdGUuaWQsXG4gICAgICBzdGF0dXM6IFwiY3JlYXRpbmdcIixcbiAgICAgIHByb2dyZXNzOiAwLFxuICAgIH07XG5cbiAgICAvLyBBZGQgdG8gY3JlYXRpb24gcXVldWUgZm9yIHRyYWNraW5nXG4gICAgdGhpcy5jcmVhdGlvblF1ZXVlLnNldChhZ2VudElkLCBhZ2VudEluZm8pO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIE9wdGltaXN0aWMgdXBkYXRlIHRvIHN0b3JlXG4gICAgICBjb25zdCBzdG9yZSA9IHVzZURhc2hib2FyZFN0b3JlLmdldFN0YXRlKCk7XG4gICAgICBzdG9yZS5hZGRBZ2VudCh7XG4gICAgICAgIGlkOiBhZ2VudElkLFxuICAgICAgICBuYW1lOiBhZ2VudEluZm8ubmFtZSxcbiAgICAgICAgY2xhc3M6IHRlbXBsYXRlLmlkLFxuICAgICAgICBpbkNvbnZlcnNhdGlvbjogZmFsc2UsXG4gICAgICAgIHBvc2l0aW9uOiBjb25maWcucG9zaXRpb24gfHwgeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgIGNvbG9yOiBBZ2VudENyZWF0aW9uU2VydmljZS5nZXRDYXRlZ29yeUNvbG9yKHRlbXBsYXRlLmNhdGVnb3J5KSxcbiAgICAgICAga25vd2xlZGdlOiBbXSxcbiAgICAgICAgYXV0b25vbXlFbmFibGVkOiB0ZW1wbGF0ZS5jYXBhYmlsaXRpZXM/LmluY2x1ZGVzKFwiYXV0b25vbW91c1wiKSB8fCBmYWxzZSxcbiAgICAgICAgdG9vbFBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgLy8gSW5mb3JtYXRpb24gQWNjZXNzIFRvb2xzXG4gICAgICAgICAgaW50ZXJuZXRTZWFyY2g6IHRydWUsXG4gICAgICAgICAgd2ViU2NyYXBpbmc6IGZhbHNlLFxuICAgICAgICAgIHdpa2lwZWRpYUFjY2VzczogdHJ1ZSxcbiAgICAgICAgICBuZXdzQXBpOiBmYWxzZSxcbiAgICAgICAgICBhY2FkZW1pY1NlYXJjaDogZmFsc2UsXG4gICAgICAgICAgZG9jdW1lbnRSZXRyaWV2YWw6IHRydWUsXG5cbiAgICAgICAgICAvLyBDb250ZW50IEdlbmVyYXRpb24gJiBQcm9jZXNzaW5nXG4gICAgICAgICAgaW1hZ2VHZW5lcmF0aW9uOiBmYWxzZSxcbiAgICAgICAgICB0ZXh0U3VtbWFyaXphdGlvbjogdHJ1ZSxcbiAgICAgICAgICB0cmFuc2xhdGlvbjogZmFsc2UsXG4gICAgICAgICAgY29kZUV4ZWN1dGlvbjogZmFsc2UsXG5cbiAgICAgICAgICAvLyBLbm93bGVkZ2UgJiBSZWFzb25pbmcgVG9vbHNcbiAgICAgICAgICBjYWxjdWxhdG9yOiB0cnVlLFxuICAgICAgICAgIGtub3dsZWRnZUdyYXBoUXVlcnk6IHRydWUsXG4gICAgICAgICAgZmFjdENoZWNraW5nOiB0cnVlLFxuICAgICAgICAgIHRpbWVsaW5lR2VuZXJhdG9yOiBmYWxzZSxcblxuICAgICAgICAgIC8vIEV4dGVybmFsIEludGVncmF0aW9uc1xuICAgICAgICAgIHdlYXRoZXJEYXRhOiBmYWxzZSxcbiAgICAgICAgICBtYXBMb2NhdGlvbkRhdGE6IGZhbHNlLFxuICAgICAgICAgIGZpbmFuY2lhbERhdGE6IGZhbHNlLFxuICAgICAgICAgIHB1YmxpY0RhdGFzZXRzOiBmYWxzZSxcblxuICAgICAgICAgIC8vIEFnZW50LVNwZWNpZmljIFRvb2xzXG4gICAgICAgICAgbWVtb3J5U2VhcmNoOiB0cnVlLFxuICAgICAgICAgIGNyb3NzQWdlbnRLbm93bGVkZ2U6IHRydWUsXG4gICAgICAgICAgY29udmVyc2F0aW9uQW5hbHlzaXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gU2ltdWxhdGUgY3JlYXRpb24gcHJvZ3Jlc3NcbiAgICAgIGF3YWl0IHRoaXMuc2ltdWxhdGVDcmVhdGlvblByb2dyZXNzKGFnZW50SWQpO1xuXG4gICAgICAvLyBQcmVwYXJlIGJhY2tlbmQgcmVxdWVzdFxuICAgICAgY29uc3QgY3JlYXRlUmVxdWVzdDogQ3JlYXRlQWdlbnRSZXF1ZXN0ID0ge1xuICAgICAgICBuYW1lOiBhZ2VudEluZm8ubmFtZSxcbiAgICAgICAgaW5pdGlhbFBvc2l0aW9uOiBjb25maWcucG9zaXRpb24gfHwgeyB4OiAwLCB5OiAwLCB6OiAwIH0sXG4gICAgICAgIGNhcGFiaWxpdGllczogdGVtcGxhdGUuY2FwYWJpbGl0aWVzLFxuICAgICAgICB0YWdzOiB0ZW1wbGF0ZS51c2VDYXNlcyxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBkZXNjcmlwdGlvbjogY29uZmlnLmRlc2NyaXB0aW9uIHx8IHRlbXBsYXRlLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHRlbXBsYXRlSWQ6IHRlbXBsYXRlLmlkLFxuICAgICAgICAgIGNvbXBsZXhpdHk6IHRlbXBsYXRlLmNvbXBsZXhpdHksXG4gICAgICAgICAgbWF0aGVtYXRpY2FsRm91bmRhdGlvbjogdGVtcGxhdGUubWF0aGVtYXRpY2FsRm91bmRhdGlvbixcbiAgICAgICAgICBjdXN0b21QYXJhbWV0ZXJzOiBjb25maWcuY3VzdG9tUGFyYW1ldGVycyB8fCB7fSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIENhbGwgYmFja2VuZCBBUElcbiAgICAgIGNvbnN0IGJhY2tlbmRBZ2VudCA9IGF3YWl0IGVuaGFuY2VkQWdlbnRzQXBpLmNyZWF0ZUFnZW50KGNyZWF0ZVJlcXVlc3QpO1xuXG4gICAgICAvLyBVcGRhdGUgYWdlbnQgd2l0aCBiYWNrZW5kIGRhdGFcbiAgICAgIGNvbnN0IGZpbmFsQWdlbnRJbmZvOiBDcmVhdGVkQWdlbnRJbmZvID0ge1xuICAgICAgICAuLi5hZ2VudEluZm8sXG4gICAgICAgIHN0YXR1czogXCJyZWFkeVwiLFxuICAgICAgICBwcm9ncmVzczogMTAwLFxuICAgICAgICBhZ2VudERhdGE6IGJhY2tlbmRBZ2VudCxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuY3JlYXRpb25RdWV1ZS5zZXQoYWdlbnRJZCwgZmluYWxBZ2VudEluZm8pO1xuXG4gICAgICAvLyBVcGRhdGUgc3RvcmUgd2l0aCByZWFsIGJhY2tlbmQgZGF0YVxuICAgICAgc3RvcmUudXBkYXRlQWdlbnQoYWdlbnRJZCwge1xuICAgICAgICBpZDogYmFja2VuZEFnZW50LmFnZW50LmlkIHx8IGFnZW50SWQsXG4gICAgICAgIG5hbWU6IGJhY2tlbmRBZ2VudC5hZ2VudC5uYW1lLFxuICAgICAgICBjbGFzczogYmFja2VuZEFnZW50LmFnZW50LmFjdGl2ZUluZmVyZW5jZT8udGVtcGxhdGUsXG4gICAgICAgIGluQ29udmVyc2F0aW9uOiBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhZ2VudDogZmluYWxBZ2VudEluZm8sXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQWdlbnQgY3JlYXRpb24gZmFpbGVkOlwiLCBlcnJvcik7XG5cbiAgICAgIC8vIFVwZGF0ZSB3aXRoIGVycm9yIHN0YXR1c1xuICAgICAgY29uc3QgZXJyb3JBZ2VudEluZm86IENyZWF0ZWRBZ2VudEluZm8gPSB7XG4gICAgICAgIC4uLmFnZW50SW5mbyxcbiAgICAgICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5jcmVhdGlvblF1ZXVlLnNldChhZ2VudElkLCBlcnJvckFnZW50SW5mbyk7XG5cbiAgICAgIC8vIFVwZGF0ZSBzdG9yZSB3aXRoIGVycm9yIHN0YXR1c1xuICAgICAgY29uc3Qgc3RvcmUgPSB1c2VEYXNoYm9hcmRTdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgLy8gUmVtb3ZlIGFnZW50IG9uIGVycm9yIHNpbmNlIGl0J3Mgbm90IHZhbGlkXG4gICAgICBzdG9yZS5yZW1vdmVBZ2VudChhZ2VudElkKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvckFnZW50SW5mby5lcnJvcixcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFF1aWNrIFN0YXJ0IG1vZGUgLSBjcmVhdGUgMyBkZWZhdWx0IGFnZW50c1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlUXVpY2tTdGFydEFnZW50cygpOiBQcm9taXNlPEFnZW50Q3JlYXRpb25SZXN1bHRbXT4ge1xuICAgIGNvbnN0IGRlZmF1bHRUZW1wbGF0ZXMgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiBcImV4cGxvcmVyXCIsXG4gICAgICAgIG5hbWU6IFwiRXhwbG9yZXIgQWdlbnRcIixcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRXBpc3RlbWljIHZhbHVlIG1heGltaXphdGlvbiBmb3IgZW52aXJvbm1lbnQgZXhwbG9yYXRpb25cIixcbiAgICAgICAgY29tcGxleGl0eTogXCJiZWdpbm5lclwiIGFzIGNvbnN0LFxuICAgICAgICBjYXBhYmlsaXRpZXM6IFtcbiAgICAgICAgICBcIlNwYXRpYWwgbmF2aWdhdGlvblwiLFxuICAgICAgICAgIFwiRW52aXJvbm1lbnQgbWFwcGluZ1wiLFxuICAgICAgICAgIFwiUmVzb3VyY2UgZGlzY292ZXJ5XCIsXG4gICAgICAgIF0sXG4gICAgICAgIHVzZUNhc2VzOiBbXCJUZXJyaXRvcnkgbWFwcGluZ1wiLCBcIlJlc291cmNlIHNjb3V0aW5nXCJdLFxuICAgICAgICBtYXRoZW1hdGljYWxGb3VuZGF0aW9uOiB7XG4gICAgICAgICAgYmVsaWVmc1N0YXRlczogNjQsXG4gICAgICAgICAgb2JzZXJ2YXRpb25Nb2RhbGl0aWVzOiAzLFxuICAgICAgICAgIGFjdGlvblNwYWNlczogOCxcbiAgICAgICAgICBkZWZhdWx0UHJlY2lzaW9uOiB7IHNlbnNvcnk6IDE2LjAsIHBvbGljeTogMTYuMCwgc3RhdGU6IDEuMCB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgaWQ6IFwiZ3VhcmRpYW5cIixcbiAgICAgICAgbmFtZTogXCJHdWFyZGlhbiBBZ2VudFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJSaXNrIGFzc2Vzc21lbnQgYW5kIHByb3RlY3RpdmUgYmVoYXZpb3Igb3B0aW1pemF0aW9uXCIsXG4gICAgICAgIGNvbXBsZXhpdHk6IFwiaW50ZXJtZWRpYXRlXCIgYXMgY29uc3QsXG4gICAgICAgIGNhcGFiaWxpdGllczogW1xuICAgICAgICAgIFwiVGhyZWF0IGRldGVjdGlvblwiLFxuICAgICAgICAgIFwiUmlzayBhc3Nlc3NtZW50XCIsXG4gICAgICAgICAgXCJQcm90ZWN0aXZlIGJlaGF2aW9yXCIsXG4gICAgICAgIF0sXG4gICAgICAgIHVzZUNhc2VzOiBbXCJDb2FsaXRpb24gcHJvdGVjdGlvblwiLCBcIlRlcnJpdG9yeSBkZWZlbnNlXCJdLFxuICAgICAgICBtYXRoZW1hdGljYWxGb3VuZGF0aW9uOiB7XG4gICAgICAgICAgYmVsaWVmc1N0YXRlczogMTI4LFxuICAgICAgICAgIG9ic2VydmF0aW9uTW9kYWxpdGllczogNCxcbiAgICAgICAgICBhY3Rpb25TcGFjZXM6IDEyLFxuICAgICAgICAgIGRlZmF1bHRQcmVjaXNpb246IHsgc2Vuc29yeTogMzIuMCwgcG9saWN5OiAyNC4wLCBzdGF0ZTogMi4wIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogXCJzY2hvbGFyXCIsXG4gICAgICAgIG5hbWU6IFwiU2Nob2xhciBBZ2VudFwiLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJLbm93bGVkZ2Ugc3ludGhlc2lzIGFuZCBpbmZvcm1hdGlvbiBwcm9jZXNzaW5nXCIsXG4gICAgICAgIGNvbXBsZXhpdHk6IFwiaW50ZXJtZWRpYXRlXCIgYXMgY29uc3QsXG4gICAgICAgIGNhcGFiaWxpdGllczogW1xuICAgICAgICAgIFwiSW5mb3JtYXRpb24gc3ludGhlc2lzXCIsXG4gICAgICAgICAgXCJLbm93bGVkZ2UgZ3JhcGhzXCIsXG4gICAgICAgICAgXCJQYXR0ZXJuIHJlY29nbml0aW9uXCIsXG4gICAgICAgIF0sXG4gICAgICAgIHVzZUNhc2VzOiBbXCJSZXNlYXJjaCBjb29yZGluYXRpb25cIiwgXCJJbmZvcm1hdGlvbiBhbmFseXNpc1wiXSxcbiAgICAgICAgbWF0aGVtYXRpY2FsRm91bmRhdGlvbjoge1xuICAgICAgICAgIGJlbGllZnNTdGF0ZXM6IDUxMixcbiAgICAgICAgICBvYnNlcnZhdGlvbk1vZGFsaXRpZXM6IDYsXG4gICAgICAgICAgYWN0aW9uU3BhY2VzOiAxMCxcbiAgICAgICAgICBkZWZhdWx0UHJlY2lzaW9uOiB7IHNlbnNvcnk6IDEyOC4wLCBwb2xpY3k6IDY0LjAsIHN0YXRlOiA4LjAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IHJlc3VsdHM6IEFnZW50Q3JlYXRpb25SZXN1bHRbXSA9IFtdO1xuXG4gICAgLy8gQ3JlYXRlIGFnZW50cyBpbiBwYXJhbGxlbCBmb3IgYmV0dGVyIFVYXG4gICAgY29uc3QgY3JlYXRpb25Qcm9taXNlcyA9IGRlZmF1bHRUZW1wbGF0ZXMubWFwKGFzeW5jICh0ZW1wbGF0ZSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IGNvbmZpZzogUGFydGlhbDxBZ2VudENyZWF0aW9uQ29uZmlnPiA9IHtcbiAgICAgICAgbmFtZTogYCR7dGVtcGxhdGUubmFtZX0gJHtpbmRleCArIDF9YCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBRdWljayBTdGFydCAke3RlbXBsYXRlLmRlc2NyaXB0aW9ufWAsXG4gICAgICAgIHBvc2l0aW9uOiB7IHg6IGluZGV4ICogMTAwLCB5OiBpbmRleCAqIDUwIH0sXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVBZ2VudEZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSBhcyBhbnksIGNvbmZpZyk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBhbGxSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGNyZWF0aW9uUHJvbWlzZXMpO1xuXG4gICAgYWxsUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjpcbiAgICAgICAgICAgIHJlc3VsdC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvclxuICAgICAgICAgICAgICA/IHJlc3VsdC5yZWFzb24ubWVzc2FnZVxuICAgICAgICAgICAgICA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjcmVhdGlvbiBzdGF0dXMgZm9yIGFuIGFnZW50XG4gICAqL1xuICBnZXRDcmVhdGlvblN0YXR1cyhhZ2VudElkOiBzdHJpbmcpOiBDcmVhdGVkQWdlbnRJbmZvIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRpb25RdWV1ZS5nZXQoYWdlbnRJZCkgfHwgbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW11bGF0ZSBjcmVhdGlvbiBwcm9ncmVzcyBmb3IgYmV0dGVyIFVYXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNpbXVsYXRlQ3JlYXRpb25Qcm9ncmVzcyhhZ2VudElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwcm9ncmVzc1N0ZXBzID0gWzEwLCAyNSwgNDUsIDcwLCA4NV07XG5cbiAgICBmb3IgKGNvbnN0IHByb2dyZXNzIG9mIHByb2dyZXNzU3RlcHMpIHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PlxuICAgICAgICBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCArIE1hdGgucmFuZG9tKCkgKiAzMDApLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgYWdlbnRJbmZvID0gdGhpcy5jcmVhdGlvblF1ZXVlLmdldChhZ2VudElkKTtcbiAgICAgIGlmIChhZ2VudEluZm8pIHtcbiAgICAgICAgYWdlbnRJbmZvLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgIGFnZW50SW5mby5zdGF0dXMgPSBwcm9ncmVzcyA8IDg1ID8gXCJjcmVhdGluZ1wiIDogXCJpbml0aWFsaXppbmdcIjtcbiAgICAgICAgdGhpcy5jcmVhdGlvblF1ZXVlLnNldChhZ2VudElkLCBhZ2VudEluZm8pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhZ2VudCBjb25maWd1cmF0aW9uIGJlZm9yZSBjcmVhdGlvblxuICAgKi9cbiAgdmFsaWRhdGVDb25maWd1cmF0aW9uKFxuICAgIHRlbXBsYXRlOiBBZ2VudFRlbXBsYXRlLFxuICAgIGNvbmZpZzogUGFydGlhbDxBZ2VudENyZWF0aW9uQ29uZmlnPixcbiAgKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICghY29uZmlnLm5hbWUgfHwgY29uZmlnLm5hbWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goXCJBZ2VudCBuYW1lIGlzIHJlcXVpcmVkXCIpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcubmFtZSAmJiBjb25maWcubmFtZS5sZW5ndGggPiAxMDApIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiQWdlbnQgbmFtZSBtdXN0IGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVyc1wiKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmRlc2NyaXB0aW9uICYmIGNvbmZpZy5kZXNjcmlwdGlvbi5sZW5ndGggPiA1MDApIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiRGVzY3JpcHRpb24gbXVzdCBiZSBsZXNzIHRoYW4gNTAwIGNoYXJhY3RlcnNcIik7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5wb3NpdGlvbikge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgY29uZmlnLnBvc2l0aW9uLnggIT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgdHlwZW9mIGNvbmZpZy5wb3NpdGlvbi55ICE9PSBcIm51bWJlclwiXG4gICAgICApIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXCJQb3NpdGlvbiBjb29yZGluYXRlcyBtdXN0IGJlIG51bWJlcnNcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVycm9ycztcbiAgfVxufVxuXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXG5leHBvcnQgY29uc3QgYWdlbnRDcmVhdGlvblNlcnZpY2UgPSBBZ2VudENyZWF0aW9uU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuXG4vLyBSZWFjdCBob29rIGZvciBhZ2VudCBjcmVhdGlvblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUFnZW50Q3JlYXRpb24oKSB7XG4gIGNvbnN0IHN0b3JlID0gdXNlRGFzaGJvYXJkU3RvcmUoKTtcblxuICBjb25zdCBjcmVhdGVBZ2VudCA9IGFzeW5jIChcbiAgICB0ZW1wbGF0ZTogQWdlbnRUZW1wbGF0ZSxcbiAgICBjb25maWc6IFBhcnRpYWw8QWdlbnRDcmVhdGlvbkNvbmZpZz4sXG4gICk6IFByb21pc2U8QWdlbnRDcmVhdGlvblJlc3VsdD4gPT4ge1xuICAgIC8vIFZhbGlkYXRlIGNvbmZpZ3VyYXRpb25cbiAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gYWdlbnRDcmVhdGlvblNlcnZpY2UudmFsaWRhdGVDb25maWd1cmF0aW9uKFxuICAgICAgdGVtcGxhdGUsXG4gICAgICBjb25maWcsXG4gICAgKTtcbiAgICBpZiAodmFsaWRhdGlvbkVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IHZhbGlkYXRpb25FcnJvcnMuam9pbihcIiwgXCIpLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWdlbnRDcmVhdGlvblNlcnZpY2UuY3JlYXRlQWdlbnRGcm9tVGVtcGxhdGUodGVtcGxhdGUsIGNvbmZpZyk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUXVpY2tTdGFydEFnZW50cyA9IGFzeW5jICgpOiBQcm9taXNlPEFnZW50Q3JlYXRpb25SZXN1bHRbXT4gPT4ge1xuICAgIHJldHVybiBhZ2VudENyZWF0aW9uU2VydmljZS5jcmVhdGVRdWlja1N0YXJ0QWdlbnRzKCk7XG4gIH07XG5cbiAgY29uc3QgZ2V0Q3JlYXRpb25TdGF0dXMgPSAoYWdlbnRJZDogc3RyaW5nKTogQ3JlYXRlZEFnZW50SW5mbyB8IG51bGwgPT4ge1xuICAgIHJldHVybiBhZ2VudENyZWF0aW9uU2VydmljZS5nZXRDcmVhdGlvblN0YXR1cyhhZ2VudElkKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZUFnZW50LFxuICAgIGNyZWF0ZVF1aWNrU3RhcnRBZ2VudHMsXG4gICAgZ2V0Q3JlYXRpb25TdGF0dXMsXG4gICAgYWdlbnRzOiBzdG9yZS5hZ2VudHMsXG4gICAgaXNDb25uZWN0ZWQ6IHN0b3JlLndzQ29ubmVjdGVkLFxuICB9O1xufVxuXG4vLyBUeXBlcyBhcmUgYWxyZWFkeSBleHBvcnRlZCBhcyBpbnRlcmZhY2VzIGFib3ZlXG4iXSwibmFtZXMiOlsiQWdlbnRDcmVhdGlvblNlcnZpY2UiLCJhZ2VudENyZWF0aW9uU2VydmljZSIsInVzZUFnZW50Q3JlYXRpb24iLCJnZXRDYXRlZ29yeUNvbG9yIiwiY2F0ZWdvcnkiLCJjYXRlZ29yeUNvbG9ycyIsImV4cGxvcmVyIiwiZ3VhcmRpYW4iLCJtZXJjaGFudCIsInNjaG9sYXIiLCJnZXRJbnN0YW5jZSIsImluc3RhbmNlIiwiY3JlYXRlQWdlbnRGcm9tVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsImNvbmZpZyIsImFnZW50SWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiYWdlbnRJbmZvIiwiaWQiLCJuYW1lIiwidGVtcGxhdGVJZCIsInN0YXR1cyIsInByb2dyZXNzIiwiY3JlYXRpb25RdWV1ZSIsInNldCIsInN0b3JlIiwidXNlRGFzaGJvYXJkU3RvcmUiLCJnZXRTdGF0ZSIsImFkZEFnZW50IiwiY2xhc3MiLCJpbkNvbnZlcnNhdGlvbiIsInBvc2l0aW9uIiwieCIsInkiLCJjb2xvciIsImtub3dsZWRnZSIsImF1dG9ub215RW5hYmxlZCIsImNhcGFiaWxpdGllcyIsImluY2x1ZGVzIiwidG9vbFBlcm1pc3Npb25zIiwiaW50ZXJuZXRTZWFyY2giLCJ3ZWJTY3JhcGluZyIsIndpa2lwZWRpYUFjY2VzcyIsIm5ld3NBcGkiLCJhY2FkZW1pY1NlYXJjaCIsImRvY3VtZW50UmV0cmlldmFsIiwiaW1hZ2VHZW5lcmF0aW9uIiwidGV4dFN1bW1hcml6YXRpb24iLCJ0cmFuc2xhdGlvbiIsImNvZGVFeGVjdXRpb24iLCJjYWxjdWxhdG9yIiwia25vd2xlZGdlR3JhcGhRdWVyeSIsImZhY3RDaGVja2luZyIsInRpbWVsaW5lR2VuZXJhdG9yIiwid2VhdGhlckRhdGEiLCJtYXBMb2NhdGlvbkRhdGEiLCJmaW5hbmNpYWxEYXRhIiwicHVibGljRGF0YXNldHMiLCJtZW1vcnlTZWFyY2giLCJjcm9zc0FnZW50S25vd2xlZGdlIiwiY29udmVyc2F0aW9uQW5hbHlzaXMiLCJzaW11bGF0ZUNyZWF0aW9uUHJvZ3Jlc3MiLCJjcmVhdGVSZXF1ZXN0IiwiaW5pdGlhbFBvc2l0aW9uIiwieiIsInRhZ3MiLCJ1c2VDYXNlcyIsIm1ldGFkYXRhIiwiZGVzY3JpcHRpb24iLCJjb21wbGV4aXR5IiwibWF0aGVtYXRpY2FsRm91bmRhdGlvbiIsImN1c3RvbVBhcmFtZXRlcnMiLCJiYWNrZW5kQWdlbnQiLCJlbmhhbmNlZEFnZW50c0FwaSIsImNyZWF0ZUFnZW50IiwiZmluYWxBZ2VudEluZm8iLCJhZ2VudERhdGEiLCJ1cGRhdGVBZ2VudCIsImFnZW50IiwiYWN0aXZlSW5mZXJlbmNlIiwic3VjY2VzcyIsImVycm9yIiwiY29uc29sZSIsImVycm9yQWdlbnRJbmZvIiwiRXJyb3IiLCJtZXNzYWdlIiwicmVtb3ZlQWdlbnQiLCJjcmVhdGVRdWlja1N0YXJ0QWdlbnRzIiwiZGVmYXVsdFRlbXBsYXRlcyIsImJlbGllZnNTdGF0ZXMiLCJvYnNlcnZhdGlvbk1vZGFsaXRpZXMiLCJhY3Rpb25TcGFjZXMiLCJkZWZhdWx0UHJlY2lzaW9uIiwic2Vuc29yeSIsInBvbGljeSIsInN0YXRlIiwicmVzdWx0cyIsImNyZWF0aW9uUHJvbWlzZXMiLCJtYXAiLCJpbmRleCIsImFsbFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsU2V0dGxlZCIsImZvckVhY2giLCJyZXN1bHQiLCJwdXNoIiwidmFsdWUiLCJyZWFzb24iLCJnZXRDcmVhdGlvblN0YXR1cyIsImdldCIsInByb2dyZXNzU3RlcHMiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInZhbGlkYXRlQ29uZmlndXJhdGlvbiIsImVycm9ycyIsInRyaW0iLCJsZW5ndGgiLCJNYXAiLCJ2YWxpZGF0aW9uRXJyb3JzIiwiam9pbiIsImFnZW50cyIsImlzQ29ubmVjdGVkIiwid3ND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