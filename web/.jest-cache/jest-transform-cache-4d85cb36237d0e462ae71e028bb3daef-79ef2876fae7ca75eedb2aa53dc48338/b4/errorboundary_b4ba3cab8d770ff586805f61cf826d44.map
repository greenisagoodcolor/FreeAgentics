{"version":3,"names":["cov_2m659q10eo","actualCoverage","s","ErrorBoundary","f","useErrorHandler","_react","Component","constructor","props","state","hasError","error","getDerivedStateFromError","componentDidCatch","errorInfo","console","render","b","fallback","isLLMError","_llmerrors","LLMError","_jsxruntime","jsxs","_alert","Alert","variant","className","jsx","_lucidereact","AlertCircle","AlertTitle","provider","toUpperCase","AlertDescription","message","type","statusCode","_button","Button","size","onClick","setState","RefreshCw","children"],"sources":["/Users/matthewmoroney/builds/FreeAgentics/web/components/errorboundary.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { Component, ReactNode } from \"react\";\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\nimport { Button } from \"@/components/ui/button\";\nimport { AlertCircle, RefreshCw } from \"lucide-react\";\nimport { LLMError } from \"@/lib/llm-errors\";\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface IState {\n  hasError: boolean;\n  error: Error | null;\n}\n\nexport class ErrorBoundary extends Component<Props, IState> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false, error: null };\n  }\n\n  static getDerivedStateFromError(error: Error): IState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error(\"Error caught by boundary:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      const error = this.state.error;\n      const isLLMError = error instanceof LLMError;\n\n      return (\n        <Alert variant=\"destructive\" className=\"m-4\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertTitle>\n            {isLLMError\n              ? `${error.provider?.toUpperCase()} Error`\n              : \"Application Error\"}\n          </AlertTitle>\n          <AlertDescription className=\"mt-2\">\n            <p>{error?.message || \"An unexpected error occurred\"}</p>\n            {isLLMError && (\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Error type: {error.type}\n                {error.statusCode && ` (Status: ${error.statusCode})`}\n              </p>\n            )}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"mt-2\"\n              onClick={() => this.setState({ hasError: false, error: null })}\n            >\n              <RefreshCw className=\"h-3 w-3 mr-1\" />\n              Try Again\n            </Button>\n          </AlertDescription>\n        </Alert>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Hook-based error boundary for functional components\nexport function useErrorHandler() {\n  return (error: Error) => {\n    console.error(\"Error handled:\", error);\n    throw error; // This will be caught by the ErrorBoundary\n  };\n}\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}